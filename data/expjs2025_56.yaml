- en: 47 Dates (Date)
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 47 日期（Date）
- en: 原文：[https://exploringjs.com/js/book/ch_dates.html](https://exploringjs.com/js/book/ch_dates.html)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://exploringjs.com/js/book/ch_dates.html](https://exploringjs.com/js/book/ch_dates.html)
- en: '[47.1 Best practice: avoid the built-in `Date`](#date-libraries)'
  id: totrans-2
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[47.1 最佳实践：避免使用内置的 `Date`](#date-libraries)'
- en: '[47.1.1 Things to look for in a date library](#things-to-look-for-in-a-date-library)'
  id: totrans-3
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[47.1.1 在选择日期库时要注意的事项](#things-to-look-for-in-a-date-library)'
- en: '[47.2 Time standards](#time-standards)'
  id: totrans-4
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[47.2 时间标准](#time-standards)'
- en: '[47.2.1 Background: UTC vs. Z vs. GMT](#utc-z-gmt)'
  id: totrans-5
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[47.2.1 背景：UTC 与 Z 与 GMT](#utc-z-gmt)'
- en: '[47.2.2 Dates do not support time zones](#dates-have-no-time-zones)'
  id: totrans-6
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[47.2.2 日期不支持时区](#dates-have-no-time-zones)'
- en: '[47.3 Background: date time formats (ISO)](#date-time-formats)'
  id: totrans-7
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[47.3 背景：日期时间格式（ISO）](#date-time-formats)'
- en: '[47.3.1 Tip: append a `Z` to make date parsing deterministic](#tip-append-a-z-to-make-date-parsing-deterministic)'
  id: totrans-8
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[47.3.1 技巧：在日期解析时附加一个 `Z` 以确保确定性](#tip-append-a-z-to-make-date-parsing-deterministic)'
- en: '[47.4 Time values](#time-values)'
  id: totrans-9
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[47.4 时间值](#time-values)'
- en: '[47.4.1 Creating time values](#creating-time-values)'
  id: totrans-10
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[47.4.1 创建时间值](#creating-time-values)'
- en: '[47.4.2 Getting and setting time values](#getting-and-setting-time-values)'
  id: totrans-11
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[47.4.2 获取和设置时间值](#getting-and-setting-time-values)'
- en: '[47.5 Creating Dates](#creating-dates)'
  id: totrans-12
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[47.5 创建日期](#creating-dates)'
- en: '[47.5.1 Creating dates via numbers](#creating-dates-via-numbers)'
  id: totrans-13
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[47.5.1 通过数字创建日期](#creating-dates-via-numbers)'
- en: '[47.5.2 Parsing dates from strings](#parsing-dates-from-strings)'
  id: totrans-14
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[47.5.2 从字符串中解析日期](#parsing-dates-from-strings)'
- en: '[47.5.3 Other ways of creating dates](#other-ways-of-creating-dates)'
  id: totrans-15
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[47.5.3 创建日期的其他方法](#other-ways-of-creating-dates)'
- en: '[47.6 Getters and setters](#getters-and-setters)'
  id: totrans-16
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[47.6 获取器和设置器](#getters-and-setters)'
- en: '[47.6.1 Time unit getters and setters](#time-unit-getters-and-setters)'
  id: totrans-17
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[47.6.1 时间单位获取器和设置器](#time-unit-getters-and-setters)'
- en: '[47.7 Converting Dates to strings](#converting-dates-to-strings)'
  id: totrans-18
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[47.7 将日期转换为字符串](#converting-dates-to-strings)'
- en: '[47.7.1 Strings with times](#strings-with-times)'
  id: totrans-19
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[47.7.1 包含时间的字符串](#strings-with-times)'
- en: '[47.7.2 Strings with dates](#strings-with-dates)'
  id: totrans-20
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[47.7.2 包含日期的字符串](#strings-with-dates)'
- en: '[47.7.3 Strings with dates and times](#strings-with-dates-and-times)'
  id: totrans-21
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[47.7.3 包含日期和时间的字符串](#strings-with-dates-and-times)'
- en: '[47.7.4 Other methods](#other-methods)'
  id: totrans-22
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[47.7.4 其他方法](#other-methods)'
- en: This chapter describes JavaScript’s API for working with dates – the class `Date`.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 本章介绍了 JavaScript 用于处理日期的 API —— `Date` 类。
- en: '[47.1 Best practice: avoid the built-in `Date`](#date-libraries)'
  id: totrans-24
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[47.1 最佳实践：避免使用内置的 `Date`](#date-libraries)'
- en: 'The JavaScript `Date` API is cumbersome to use. Hence, it’s best to rely on
    a library for anything related to dates. This is functionality that already is,
    or soon will be, built in:'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: JavaScript 的 `Date` API 使用起来比较繁琐。因此，对于任何与日期相关的功能，最好依赖于库。以下是一些已经实现或即将内置的功能：
- en: '[Temporal](https://github.com/tc39/proposal-temporal) is an upcoming ECMAScript
    data time API that can already be used via polyfills.'
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[Temporal](https://github.com/tc39/proposal-temporal) 是一个即将推出的 ECMAScript 日期时间
    API，可以通过 polyfills 使用。'
- en: 'The `Intl` API is supported by most JavaScript platforms and offers useful
    date-time-related functionality:'
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Intl` API 被大多数 JavaScript 平台支持，并提供了有用的日期时间相关功能：'
- en: '[`Intl.DateTimeFormat`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/DateTimeFormat)
    provides “language-sensitive date and time formatting”.'
  id: totrans-28
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[Intl.DateTimeFormat](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/DateTimeFormat)
    提供了“语言敏感的日期和时间格式化”。'
- en: '[`Intl.RelativeTimeFormat`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/RelativeTimeFormat)
    provides “language-sensitive relative time formatting”.'
  id: totrans-29
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[Intl.RelativeTimeFormat](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/RelativeTimeFormat)
    提供了“语言敏感的相对时间格式化”。'
- en: '[`Intl.DurationFormat`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/DurationFormat)
    provides “language-sensitive duration formatting”.'
  id: totrans-30
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[Intl.DurationFormat](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/DurationFormat)
    提供了“语言敏感的持续时间格式化”。'
- en: 'Popular libraries include:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 流行库包括：
- en: 'Libraries with custom date objects (for complex use cases):'
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用自定义日期对象的库（适用于复杂用例）：
- en: '[Luxon](https://moment.github.io/luxon/)'
  id: totrans-33
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[Luxon](https://moment.github.io/luxon/)'
- en: '[Day.js](https://github.com/iamkun/dayjs)'
  id: totrans-34
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[Day.js](https://github.com/iamkun/dayjs)'
- en: '[js-joda](https://js-joda.github.io/js-joda/)'
  id: totrans-35
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[js-joda](https://js-joda.github.io/js-joda/)'
- en: '[Moment.js](https://momentjs.com)'
  id: totrans-36
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[Moment.js](https://momentjs.com)'
- en: 'Libraries that use the built-in `Date` objects (for simpler use cases):'
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用内置 `Date` 对象的库（适用于简单用例）：
- en: '[Tempo](https://tempo.formkit.com)'
  id: totrans-38
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[Tempo](https://tempo.formkit.com)'
- en: '[date-fns](https://github.com/date-fns/date-fns)'
  id: totrans-39
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[date-fns](https://github.com/date-fns/date-fns)'
- en: '[47.1.1 Things to look for in a date library](#things-to-look-for-in-a-date-library)'
  id: totrans-40
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[47.1.1 在选择日期库时要注意的事项](#things-to-look-for-in-a-date-library)'
- en: 'Two things are important to keep in mind:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 有两点需要注意：
- en: '[*Tree-shaking*](ch_next-steps.html#tree-shaking) can considerably reduce the
    size of a library. It is a technique of only deploying those exports of a library
    to a web server that are imported somewhere. Functions are much more amenable
    to tree-shaking than classes.'
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[*摇树干*](ch_next-steps.html#tree-shaking) 可以显著减少库的大小。这是一种只部署库中在某个地方导入的导出项到Web服务器的技术。函数比类更容易进行摇树干。'
- en: 'Support for time zones: As explained [later](#dates-have-no-time-zones), `Date`
    does not support time zones, which introduces a number of pitfalls and is a key
    weakness. Make sure that your date library supports them.'
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 时区支持：如[后面所述](#dates-have-no-time-zones)，`Date`不支持时区，这引入了许多陷阱，是其关键弱点。确保您的日期库支持它们。
- en: '[47.2 Time standards](#time-standards)'
  id: totrans-44
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[47.2 时间标准](#time-standards)'
- en: '[47.2.1 Background: UTC vs. Z vs. GMT](#utc-z-gmt)'
  id: totrans-45
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[47.2.1 背景：UTC vs. Z vs. GMT](#utc-z-gmt)'
- en: 'UTC, Z, and GMT are ways of specifying time that are similar, but subtly different:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: UTC、Z和GMT是表示时间的方式，它们相似但略有不同：
- en: UTC (Coordinated Universal Time) is the time standard that all times zones are
    based on. They are specified relative to it. That is, no country or territory
    has UTC as its local time zone. If a time zone has daylight savings time, its
    offset relative to UTC changes during a year.
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: UTC（协调世界时）是所有时区都基于的时间标准。它们相对于它进行指定。也就是说，没有国家或地区将UTC作为其本地时区。如果一个时区有夏令时，其相对于UTC的偏移量在一年中会发生变化。
- en: Z (Zulu Time Zone) is a military time zone that is often used in aviation and
    the military as another name for UTC+0.
  id: totrans-48
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Z（非洲时间区）是一个军事时间区，常在航空和军事中作为UTC+0的另一个名称使用。
- en: GMT (Greenwich Mean Time) is a time zone used in some European and African countries.
    It is UTC plus zero hours and therefore has the same time as UTC.
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: GMT（格林威治标准时间）是某些欧洲和非洲国家使用的时间区。它是UTC加零小时，因此与UTC时间相同。
- en: 'Sources:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 来源：
- en: '[“The Difference Between GMT and UTC”](https://www.timeanddate.com/time/gmt-utc-time.html)
    at TimeAndDate.com'
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[“GMT和UTC的区别”](https://www.timeanddate.com/time/gmt-utc-time.html) 在 TimeAndDate.com'
- en: '[“Z – Zulu Time Zone (Military Time)”](https://www.timeanddate.com/time/zones/z)
    at TimeAndDate.com'
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[“Z – 非洲时间区（军事时间）”](https://www.timeanddate.com/time/zones/z) 在 TimeAndDate.com'
- en: '[47.2.2 Dates do not support time zones](#dates-have-no-time-zones)'
  id: totrans-53
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[47.2.2 日期不支持时区](#dates-have-no-time-zones)'
- en: 'Dates support the following time standards:'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 日期支持以下时间标准：
- en: The local time zone (which depends on the current location)
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 本地时区（取决于当前位置）
- en: UTC
  id: totrans-56
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: UTC
- en: Time offsets (relative to UTC)
  id: totrans-57
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 时间偏移（相对于UTC）
- en: Depending on the operation, only some of those options are available. For example,
    when converting dates to strings or extracting time units such as the day of the
    month, we can only choose between the local time zone and UTC.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 根据操作，只有一些选项可用。例如，当将日期转换为字符串或提取时间单位（如月份的日期）时，我们只能在本地时区和UTC之间选择。
- en: 'Internally, Dates are stored as UTC. When converting from or to the local time
    zone, the necessary offsets are determined via the date. In the following example,
    the local time zone is Europe/Paris:'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 内部，日期以UTC存储。在转换到或从本地时区时，通过日期确定必要的偏移量。以下示例中，本地时区为欧洲/巴黎：
- en: '[PRE0]'
  id: totrans-60
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Whenever we create or convert dates, we need to be mindful of the time standard
    being used – for example: `new Date()` uses the local time zone while `.toISOString()`
    uses UTC.'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 每当我们创建或转换日期时，都需要注意所使用的时间标准——例如：`new Date()`使用本地时区，而`.toISOString()`使用UTC。
- en: '[PRE1]'
  id: totrans-62
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Dates interpret 0 as January. The day of the month is 27 in the local time zone,
    but 26 in UTC.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 日期将0解释为1月。在本地时区中，月份的日期是27日，但在UTC中是26日。
- en: '![Icon “tip”](../Images/8440b17bb8219cda9f9405ac83c36db0.png) **Documenting
    the time standards supported by each operation**'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: '![图标“提示”](../Images/8440b17bb8219cda9f9405ac83c36db0.png) **记录每个操作支持的时间标准**'
- en: In the remainder of this chapter, the supported time standards are noted for
    each operation.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章的剩余部分，每个操作都注明了支持的时间标准。
- en: '[47.2.2.1 The downsides of not being able to specify time zones](#the-downsides-of-not-being-able-to-specify-time-zones)'
  id: totrans-66
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '[47.2.2.1 无法指定时区的不利影响](#the-downsides-of-not-being-able-to-specify-time-zones)'
- en: 'Not being able to specify time zones has two downsides:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 无法指定时区有两个不利影响：
- en: It makes it impossible to support multiple time zones.
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它使得支持多个时区变得不可能。
- en: 'It can lead to location-specific bugs. For example, the previous example produces
    different results depending on where it is executed. To be safe:'
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这可能导致特定位置的bug。例如，前面的示例根据执行位置产生不同的结果。为了安全起见：
- en: Use UTC-based operations whenever possible
  id: totrans-70
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 尽可能使用基于UTC的操作
- en: Use `Z` or a time offset when parsing strings (see the next section for more
    information).
  id: totrans-71
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 解析字符串时使用`Z`或时差（有关更多信息，请参阅下一节）。
- en: '[47.3 Background: date time formats (ISO)](#date-time-formats)'
  id: totrans-72
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[47.3 背景：日期时间格式（ISO）](#date-time-formats)'
- en: 'Date time formats describe:'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 日期时间格式描述：
- en: 'The strings accepted by:'
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 以下字符串被接受：
- en: '`Date.parse()`'
  id: totrans-75
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Date.parse()`'
- en: '`new Date()`'
  id: totrans-76
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`new Date()`'
- en: 'The strings returned by (always longest format):'
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 由以下返回的字符串（总是最长格式）：
- en: '`Date.prototype.toISOString()`'
  id: totrans-78
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Date.prototype.toISOString()`'
- en: 'The following is an example of a date time string returned by `.toISOString()`:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是一个由`.toISOString()`返回的日期时间字符串的示例：
- en: '[PRE2]'
  id: totrans-80
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Date time formats have the following structures:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 日期时间格式有以下结构：
- en: 'Date formats: Y=year; M=month; D=day'
  id: totrans-82
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 日期格式：Y=年；M=月；D=日
- en: '[PRE3]'
  id: totrans-83
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Time formats: T=separator (the string `''T''`); H=hour; m=minute; s=second
    and millisecond; Z=Zulu Time Zone (the string `''Z''`)'
  id: totrans-84
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 时间格式：T=分隔符（字符串`'T'`）；H=小时；m=分钟；s=秒和毫秒；Z=Zulu时区（字符串`'Z'`）
- en: '[PRE4]'
  id: totrans-85
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Date time formats: are date formats followed by time formats.'
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 日期时间格式：是日期格式后跟时间格式。
- en: 'For example (longest): `YYYY-MM-DDTHH:mm:ss.sssZ`'
  id: totrans-87
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 例如（最长）：`YYYY-MM-DDTHH:mm:ss.sssZ`
- en: 'Instead of `Z` (which is UTC+0), we can also specify *time offsets* relative
    to UTC:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 除了`Z`（即UTC+0）之外，我们还可以指定相对于UTC的*时差*：
- en: '`THH:mm+HH:mm` (etc.)'
  id: totrans-89
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`THH:mm+HH:mm`（等等）'
- en: '`THH:mm-HH:mm` (etc.)'
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`THH:mm-HH:mm`（等等）'
- en: '[47.3.1 Tip: append a `Z` to make date parsing deterministic](#tip-append-a-z-to-make-date-parsing-deterministic)'
  id: totrans-91
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[47.3.1 小贴士：在日期解析中添加`Z`以使其确定性](#tip-append-a-z-to-make-date-parsing-deterministic)'
- en: 'If we add a `Z` to the end of a string, date parsing doesn’t produce different
    results at different locations. This is what happens if we write code in Paris:'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们在字符串末尾添加`Z`，日期解析在不同位置不会产生不同的结果。这就是我们在巴黎编写代码时会发生的情况：
- en: 'Without `Z`: Input is January 27 (implicitly in the Europe/Paris time zone),
    output is January 26 (in UTC).'
  id: totrans-93
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不带`Z`：输入是1月27日（隐含在欧洲/巴黎时区），输出是1月26日（UTC）。
- en: '[PRE5]'
  id: totrans-94
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'With `Z`: Input is January 27, output is January 27.'
  id: totrans-95
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 带有`Z`：输入是1月27日，输出也是1月27日。
- en: '[PRE6]'
  id: totrans-96
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '[47.4 Time values](#time-values)'
  id: totrans-97
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[47.4 时间值](#time-values)'
- en: A *time value* represents a date via the number of milliseconds since 1 January
    1970 00:00:00 UTC.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: '*时间值*通过自1970年1月1日00:00:00 UTC以来的毫秒数表示日期。'
- en: 'Time values can be used to create Dates:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 时间值可以用来创建日期：
- en: '[PRE7]'
  id: totrans-100
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'Coercing a Date to a number returns its time value:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 将日期强制转换为数字会返回其时间值：
- en: '[PRE8]'
  id: totrans-102
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'Ordering operators coerce their operands to numbers. Therefore, we can use
    these operators to compare Dates:'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 排序运算符将它们的操作数转换为数字。因此，我们可以使用这些运算符来比较日期：
- en: '[PRE9]'
  id: totrans-104
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: '[47.4.1 Creating time values](#creating-time-values)'
  id: totrans-105
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[47.4.1 创建时间值](#creating-time-values)'
- en: 'The following methods create time values:'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 以下方法创建时间值：
- en: '`Date.now(): number` (UTC)'
  id: totrans-107
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Date.now(): number` (UTC)'
- en: Returns the current time as a time value.
  id: totrans-108
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 返回当前时间作为时间值。
- en: '`Date.parse(dateTimeStr: string): number` (local time zone, UTC, time offset)'
  id: totrans-109
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Date.parse(dateTimeStr: string): number` (本地时区，UTC，时差)'
- en: Parses `dateTimeStr` and returns the corresponding time value.
  id: totrans-110
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 解析`dateTimeStr`并返回对应的时间值。
- en: '`Date.UTC(year, month, date?, hours?, minutes?, seconds?, milliseconds?): number`
    (UTC)'
  id: totrans-111
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Date.UTC(year, month, date?, hours?, minutes?, seconds?, milliseconds?): number`
    (UTC)'
- en: Returns the time value for the specified UTC date time.
  id: totrans-112
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 返回指定UTC日期时间的时值。
- en: '[47.4.2 Getting and setting time values](#getting-and-setting-time-values)'
  id: totrans-113
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[47.4.2 获取和设置时间值](#getting-and-setting-time-values)'
- en: '`Date.prototype.getTime(): number` (UTC)'
  id: totrans-114
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Date.prototype.getTime(): number` (UTC)'
- en: Returns the time value corresponding to the Date.
  id: totrans-115
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 返回与Date对应的时值。
- en: '`Date.prototype.setTime(timeValue)` (UTC)'
  id: totrans-116
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Date.prototype.setTime(timeValue)` (UTC)'
- en: Sets `this` to the date encoded by `timeValue`.
  id: totrans-117
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 将`this`设置为`timeValue`编码的日期。
- en: '[47.5 Creating Dates](#creating-dates)'
  id: totrans-118
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[47.5 创建日期](#creating-dates)'
- en: '[47.5.1 Creating dates via numbers](#creating-dates-via-numbers)'
  id: totrans-119
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[47.5.1 通过数字创建日期](#creating-dates-via-numbers)'
- en: '`new Date(year: number, month: number, date?: number, hours?: number, minutes?:
    number, seconds?: number, milliseconds?: number)` (local time zone)'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: '`new Date(year: number, month: number, date?: number, hours?: number, minutes?:
    number, seconds?: number, milliseconds?: number)` (本地时区)'
- en: 'Two of the parameters have pitfalls:'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 两个参数有陷阱：
- en: For `month`, 0 is January, 1 is February, etc.
  id: totrans-122
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于`month`，0是1月，1是2月，等等。
- en: 'If 0 ≤ `year` ≤ 99, then 1900 is added:'
  id: totrans-123
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果0 ≤ `year` ≤ 99，则添加1900：
- en: '[PRE10]'
  id: totrans-124
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE10]'
- en: That’s why, elsewhere in this chapter, we avoid the time unit `year` and always
    use `fullYear`. But in this case, we have no choice.
  id: totrans-125
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 正是因为这个原因，在本章的其他地方，我们避免使用时间单位`年`，而始终使用`fullYear`。但在这种情况下，我们别无选择。
- en: 'Example:'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 例如：
- en: '[PRE11]'
  id: totrans-127
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: Note that the input hours (21) are different from the output hours (20). The
    former refer to the local time zone, the latter to UTC.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，输入的小时（21）与输出的小时（20）不同。前者指的是本地时区，后者指的是UTC。
- en: '[47.5.2 Parsing dates from strings](#parsing-dates-from-strings)'
  id: totrans-129
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[47.5.2 从字符串解析日期](#parsing-dates-from-strings)'
- en: '`new Date(dateTimeStr: string)` (local time zone, UTC, time offset)'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: '`new Date(dateTimeStr: string)`（本地时区，UTC，时间偏移）'
- en: 'If there is a `Z` at the end, UTC is used:'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 如果末尾有 `Z`，则使用UTC：
- en: '[PRE12]'
  id: totrans-132
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'If there is no `Z` or time offset at the end, the local time zone is used:'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 如果末尾没有 `Z` 或时间偏移，则使用本地时区：
- en: '[PRE13]'
  id: totrans-134
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'If a string only contains a date, it is interpreted as UTC:'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 如果字符串只包含日期，则将其解释为UTC：
- en: '[PRE14]'
  id: totrans-136
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: '[47.5.3 Other ways of creating dates](#other-ways-of-creating-dates)'
  id: totrans-137
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[47.5.3 创建日期的其他方式](#other-ways-of-creating-dates)'
- en: '`new Date(timeValue: number)` (UTC)'
  id: totrans-138
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`new Date(timeValue: number)`（UTC）'
- en: '[PRE15]'
  id: totrans-139
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE15]'
- en: '`new Date()` (UTC)'
  id: totrans-140
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`new Date()`（UTC）'
- en: The same as `new Date(Date.now())`.
  id: totrans-141
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 与 `new Date(Date.now())` 相同。
- en: '[47.6 Getters and setters](#getters-and-setters)'
  id: totrans-142
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[47.6 获取器和设置器](#getters-and-setters)'
- en: '[47.6.1 Time unit getters and setters](#time-unit-getters-and-setters)'
  id: totrans-143
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[47.6.1 时间单位获取器和设置器](#time-unit-getters-and-setters)'
- en: 'Dates have getters and setters for time units – for example:'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 日期有用于时间单位的选择器和设置器 – 例如：
- en: '`Date.prototype.getFullYear()`'
  id: totrans-145
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Date.prototype.getFullYear()`'
- en: '`Date.prototype.setFullYear(num)`'
  id: totrans-146
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Date.prototype.setFullYear(num)`'
- en: 'These getters and setters conform to the following patterns:'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 这些获取器和设置器符合以下模式：
- en: 'Local time zone:'
  id: totrans-148
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 本地时区：
- en: '`Date.prototype.get«Unit»()`'
  id: totrans-149
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Date.prototype.get«Unit»()`'
- en: '`Date.prototype.set«Unit»(num)`'
  id: totrans-150
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Date.prototype.set«Unit»(num)`'
- en: 'UTC:'
  id: totrans-151
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: UTC：
- en: '`Date.prototype.getUTC«Unit»()`'
  id: totrans-152
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Date.prototype.getUTC«Unit»()`'
- en: '`Date.prototype.setUTC«Unit»(num)`'
  id: totrans-153
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Date.prototype.setUTC«Unit»(num)`'
- en: 'These are the time units that are supported:'
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 这些是支持的时间单位：
- en: Date
  id: totrans-155
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 日期
- en: '`FullYear`'
  id: totrans-156
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`FullYear`'
- en: '`Month`: month (0–11). **Pitfall:** 0 is January, etc.'
  id: totrans-157
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Month`：月份（0–11）。**陷阱**：0代表一月，等等。'
- en: '`Date`: day of the month (1–31)'
  id: totrans-158
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Date`：月份中的天数（1–31）'
- en: '`Day` (getter only): day of the week (0–6, 0 is Sunday)'
  id: totrans-159
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Day`（仅获取器）：星期中的天数（0–6，0代表星期日）'
- en: Time
  id: totrans-160
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 时间
- en: '`Hours`: hour (0–23)'
  id: totrans-161
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Hours`：小时（0–23）'
- en: '`Minutes`: minutes (0–59)'
  id: totrans-162
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Minutes`：分钟（0–59）'
- en: '`Seconds`: seconds (0–59)'
  id: totrans-163
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Seconds`：秒（0–59）'
- en: '`Milliseconds`: milliseconds (0–999)'
  id: totrans-164
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Milliseconds`：毫秒（0–999）'
- en: 'There is one more getter that doesn’t conform to the previously mentioned patterns:'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 还有一个不符合之前提到的模式的获取器：
- en: '`Date.prototype.getTimezoneOffset()`'
  id: totrans-166
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Date.prototype.getTimezoneOffset()`'
- en: 'Returns the time difference between local time zone and UTC in minutes. For
    example, for Europe/Paris, it returns `-120` (CEST, Central European Summer Time)
    or `-60` (CET, Central European Time):'
  id: totrans-167
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 返回本地时区与UTC之间的时间差（以分钟为单位）。例如，对于欧洲/巴黎，它返回 `-120`（CEST，中欧夏令时）或 `-60`（CET，中欧时间）：
- en: '[PRE16]'
  id: totrans-168
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE16]'
- en: '[47.7 Converting Dates to strings](#converting-dates-to-strings)'
  id: totrans-169
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[47.7 将日期转换为字符串](#converting-dates-to-strings)'
- en: 'Example Date:'
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 示例日期：
- en: '[PRE17]'
  id: totrans-171
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: '[47.7.1 Strings with times](#strings-with-times)'
  id: totrans-172
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[47.7.1 包含时间的字符串](#strings-with-times)'
- en: '`Date.prototype.toTimeString()` (local time zone)'
  id: totrans-173
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Date.prototype.toTimeString()`（本地时区）'
- en: '[PRE18]'
  id: totrans-174
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE18]'
- en: '[47.7.2 Strings with dates](#strings-with-dates)'
  id: totrans-175
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[47.7.2 包含日期的字符串](#strings-with-dates)'
- en: '`Date.prototype.toDateString()` (local time zone)'
  id: totrans-176
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Date.prototype.toDateString()`（本地时区）'
- en: '[PRE19]'
  id: totrans-177
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE19]'
- en: '[47.7.3 Strings with dates and times](#strings-with-dates-and-times)'
  id: totrans-178
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[47.7.3 包含日期和时间的字符串](#strings-with-dates-and-times)'
- en: '`Date.prototype.toString()` (local time zone)'
  id: totrans-179
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Date.prototype.toString()`（本地时区）'
- en: '[PRE20]'
  id: totrans-180
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE20]'
- en: '`Date.prototype.toUTCString()` (UTC)'
  id: totrans-181
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Date.prototype.toUTCString()`（UTC）'
- en: '[PRE21]'
  id: totrans-182
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE21]'
- en: '`Date.prototype.toISOString()` (UTC)'
  id: totrans-183
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Date.prototype.toISOString()`（UTC）'
- en: '[PRE22]'
  id: totrans-184
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE22]'
- en: '[47.7.4 Other methods](#other-methods)'
  id: totrans-185
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[47.7.4 其他方法](#other-methods)'
- en: The following three methods are not really part of ECMAScript, but rather of
    [the ECMAScript internationalization API](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl).
    That API has much functionality for formatting dates (including support for time
    zones), but not for parsing them.
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 以下三个方法实际上不是ECMAScript的一部分，而是[ECMAScript国际化API](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl)的一部分。该API具有许多用于格式化日期的功能（包括对时区的支持），但不用于解析。
- en: '`Date.prototype.toLocaleTimeString()`'
  id: totrans-187
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Date.prototype.toLocaleTimeString()`'
- en: '`Date.prototype.toLocaleDateString()`'
  id: totrans-188
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Date.prototype.toLocaleDateString()`'
- en: '`Date.prototype.toLocaleString()`'
  id: totrans-189
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Date.prototype.toLocaleString()`'
- en: '![Icon “exercise”](../Images/4fc2ec98bb44cc1f4de7c6a46d9dd043.png) **Exercise:
    Creating a date string**'
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: '![练习图标“exercise”](../Images/4fc2ec98bb44cc1f4de7c6a46d9dd043.png) **练习：创建日期字符串**'
- en: '`exercises/dates/create_date_string_test.mjs`'
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: '`exercises/dates/create_date_string_test.mjs`'
