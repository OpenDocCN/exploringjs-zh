- en: 46â€ƒRegular expressions (RegExp)
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 46 æ­£åˆ™è¡¨è¾¾å¼ï¼ˆRegExpï¼‰
- en: åŸæ–‡ï¼š[https://exploringjs.com/js/book/ch_regexps.html](https://exploringjs.com/js/book/ch_regexps.html)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åŸæ–‡ï¼š[https://exploringjs.com/js/book/ch_regexps.html](https://exploringjs.com/js/book/ch_regexps.html)
- en: '[46.1â€ƒCreating regular expressions](#creating-regular-expressions)'
  id: totrans-2
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.1 åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼](#creating-regular-expressions)'
- en: '[46.1.1â€ƒLiteral vs. constructor](#regex-literal-vs-constructor)'
  id: totrans-3
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.1.1 å­—é¢é‡ä¸æ„é€ å‡½æ•°](#regex-literal-vs-constructor)'
- en: '[46.1.2â€ƒTip: Use `String.raw` literals with `new RegExp()`](#tip-use-stringraw-literals-with-new-regexp)'
  id: totrans-4
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.1.2 å°è´´å£«ï¼šä½¿ç”¨ `String.raw` å­—é¢é‡ä¸ `new RegExp()`](#tip-use-stringraw-literals-with-new-regexp)'
- en: '[46.1.3â€ƒCloning and non-destructively modifying regular expressions](#cloning-regexps)'
  id: totrans-5
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.1.3 å…‹éš†å’Œä¸å¯ç ´ååœ°ä¿®æ”¹æ­£åˆ™è¡¨è¾¾å¼](#cloning-regexps)'
- en: '[46.2â€ƒSyntax characters and escaping](#escaping-for-regexp)'
  id: totrans-6
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.2 è¯­æ³•å­—ç¬¦å’Œè½¬ä¹‰](#escaping-for-regexp)'
- en: '[46.2.1â€ƒSyntax characters](#syntax-characters)'
  id: totrans-7
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.2.1 è¯­æ³•å­—ç¬¦](#syntax-characters)'
- en: '[46.2.2â€ƒIllegal top-level escaping](#illegal-toplevel-escaping)'
  id: totrans-8
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.2.2 éæ³•é¡¶å±‚è½¬ä¹‰](#illegal-toplevel-escaping)'
- en: '[46.2.3â€ƒEscaping inside character classes (`[Â·Â·Â·]`)](#escaping-inside-character-classes)'
  id: totrans-9
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.2.3 å­—ç¬¦ç±»å†…éƒ¨è½¬ä¹‰ (`[Â·Â·Â·]`)](#escaping-inside-character-classes)'
- en: '[46.3â€ƒRegular expressions: the concept of a character](#regular-expression-character)'
  id: totrans-10
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.3 æ­£åˆ™è¡¨è¾¾å¼ï¼šå­—ç¬¦çš„æ¦‚å¿µ](#regular-expression-character)'
- en: '[46.4â€ƒSyntax: matching single characters](#syntax-matching-single-characters)'
  id: totrans-11
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.4 è¯­æ³•ï¼šåŒ¹é…å•ä¸ªå­—ç¬¦](#syntax-matching-single-characters)'
- en: '[46.5â€ƒSyntax: character class escapes](#syntax-character-class-escapes)'
  id: totrans-12
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.5 è¯­æ³•ï¼šå­—ç¬¦ç±»è½¬ä¹‰](#syntax-character-class-escapes)'
- en: '[46.5.1â€ƒBasic character class escapes (sets of code units): `\d \D \s \S \w
    \W`](#basic-character-class-escapes)'
  id: totrans-13
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.5.1 åŸºæœ¬å­—ç¬¦ç±»è½¬ä¹‰ï¼ˆä»£ç å•å…ƒé›†åˆï¼‰ï¼š`\d \D \s \S \w \W`](#basic-character-class-escapes)'
- en: '[46.5.2â€ƒUnicode property escapes: `\p{}` and `\P{}`](#unicode-property-escapes)'
  id: totrans-14
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.5.2 Unicodeå±æ€§è½¬ä¹‰ï¼š`\p{}` å’Œ `\P{}`](#unicode-property-escapes)'
- en: '[46.5.3â€ƒUnicode character property escapes ^(ES2018)](#unicode-character-property-escapes)'
  id: totrans-15
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.5.3 Unicodeå­—ç¬¦å±æ€§è½¬ä¹‰ ^(ES2018)](#unicode-character-property-escapes)'
- en: '[46.5.4â€ƒUnicode string property escapes ^(ES2024)](#unicode-string-property-escapes)'
  id: totrans-16
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.5.4 Unicodeå­—ç¬¦ä¸²å±æ€§è½¬ä¹‰ ^(ES2024)](#unicode-string-property-escapes)'
- en: '[46.6â€ƒSyntax: character classes](#syntax-character-classes)'
  id: totrans-17
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.6 è¯­æ³•ï¼šå­—ç¬¦ç±»](#syntax-character-classes)'
- en: '[46.6.1â€ƒCode point sequences in character classes ^(ES2024)](#character-class-code-point-sequences)'
  id: totrans-18
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.6.1 å­—ç¬¦ç±»ä¸­çš„ç ç‚¹åºåˆ— ^(ES2024)](#character-class-code-point-sequences)'
- en: '[46.6.2â€ƒSet operations for character classes ^(ES2024)](#regexp-character-class-set-operations)'
  id: totrans-19
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.6.2 å­—ç¬¦ç±»é›†åˆæ“ä½œ ^(ES2024)](#regexp-character-class-set-operations)'
- en: '[46.7â€ƒSyntax: capture groups](#regexp-capture-groups)'
  id: totrans-20
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.7 è¯­æ³•ï¼šæ•è·ç»„](#regexp-capture-groups)'
- en: '[46.8â€ƒSyntax: quantifiers](#regexp-quantifiers)'
  id: totrans-21
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.8 è¯­æ³•ï¼šé‡è¯](#regexp-quantifiers)'
- en: '[46.9â€ƒSyntax: assertions](#regexp-assertions)'
  id: totrans-22
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.9 è¯­æ³•ï¼šæ–­è¨€](#regexp-assertions)'
- en: '[46.9.1â€ƒLookahead assertions](#regexp-lookahead-assertions)'
  id: totrans-23
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.9.1 å‰ç»æ–­è¨€](#regexp-lookahead-assertions)'
- en: '[46.9.2â€ƒLookbehind assertions ^(ES2018)](#regexp-lookbehind-assertions)'
  id: totrans-24
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.9.2 åç»æ–­è¨€ ^(ES2018)](#regexp-lookbehind-assertions)'
- en: '[46.10â€ƒSyntax: disjunction (`|`)](#syntax-disjunction-)'
  id: totrans-25
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.10 è¯­æ³•ï¼šæå–ï¼ˆ`|`ï¼‰](#syntax-disjunction-)'
- en: '[46.11â€ƒRegular expression flags](#regexp-flags)'
  id: totrans-26
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.11 æ­£åˆ™è¡¨è¾¾å¼æ ‡å¿—](#regexp-flags)'
- en: '[46.11.1â€ƒHow to order regular expression flags?](#order-of-regexp-flags)'
  id: totrans-27
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.11.1 å¦‚ä½•æ’åºæ­£åˆ™è¡¨è¾¾å¼æ ‡å¿—ï¼Ÿ](#order-of-regexp-flags)'
- en: '[46.11.2â€ƒWithout the Unicode flags `/u` and `/v`: characters are UTF-16 code
    units](#without-the-unicode-flags-u-and-v-characters-are-utf16-code-units)'
  id: totrans-28
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.11.2 æ²¡æœ‰Unicodeæ ‡å¿— `/u` å’Œ `/v`ï¼šå­—ç¬¦æ˜¯UTF-16ç å•å…ƒ](#without-the-unicode-flags-u-and-v-characters-are-utf16-code-units)'
- en: '[46.11.3â€ƒFlag `/u`: characters are code points ^(ES6)](#regexp-flag-unicode)'
  id: totrans-29
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.11.3 æ ‡å¿— `/u`ï¼šå­—ç¬¦æ˜¯ç ç‚¹ ^(ES6)](#regexp-flag-unicode)'
- en: '[46.11.4â€ƒFlag `/v`: limited support for multi-code-point grapheme clusters
    ^(ES2024)](#regexp-flag-unicode-sets)'
  id: totrans-30
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.11.4 æ ‡å¿— `/v`ï¼šå¯¹å¤šç ç‚¹å›¾å½¢ç°‡çš„æœ‰é™æ”¯æŒ ^(ES2024)](#regexp-flag-unicode-sets)'
- en: '[46.12â€ƒPattern modifiers (inline flags) ^(ES2025)](#regexp-pattern-modifiers)'
  id: totrans-31
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.12 æ¨¡å¼ä¿®é¥°ç¬¦ï¼ˆå†…è”æ ‡å¿—ï¼‰^(ES2025)](#regexp-pattern-modifiers)'
- en: '[46.12.1â€ƒThe syntax of pattern modifiers](#the-syntax-of-pattern-modifiers)'
  id: totrans-32
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.12.1 æ¨¡å¼ä¿®é¥°ç¬¦çš„è¯­æ³•](#the-syntax-of-pattern-modifiers)'
- en: '[46.12.2â€ƒWhich flags are supported?](#which-flags-are-supported)'
  id: totrans-33
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.12.2 å“ªäº›æ ‡å¿—è¢«æ”¯æŒï¼Ÿ](#which-flags-are-supported)'
- en: '[46.12.3â€ƒUse case: changing flags for part of a regular expression](#use-case-changing-flags-for-part-of-a-regular-expression)'
  id: totrans-34
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.12.3 ä½¿ç”¨æ¡ˆä¾‹ï¼šæ”¹å˜æ­£åˆ™è¡¨è¾¾å¼éƒ¨åˆ†æ ‡å¿—](#use-case-changing-flags-for-part-of-a-regular-expression)'
- en: '[46.12.4â€ƒUse case: inlining flags](#use-case-inlining-flags)'
  id: totrans-35
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.12.4 ä½¿ç”¨æ¡ˆä¾‹ï¼šå†…è”æ ‡å¿—](#use-case-inlining-flags)'
- en: '[46.12.5â€ƒUse case: regular expression fragments that change flags](#use-case-regular-expression-fragments-that-change-flags)'
  id: totrans-36
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.12.5 ä½¿ç”¨æ¡ˆä¾‹ï¼šæ”¹å˜æ ‡å¿—çš„æ­£åˆ™è¡¨è¾¾å¼ç‰‡æ®µ](#use-case-regular-expression-fragments-that-change-flags)'
- en: '[46.13â€ƒProperties of regular expression objects](#properties-of-regular-expression-objects)'
  id: totrans-37
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.13 æ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡å±æ€§](#properties-of-regular-expression-objects)'
- en: '[46.13.1â€ƒFlags as properties](#flags-as-properties)'
  id: totrans-38
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.13.1â€ƒå±æ€§ä½œä¸ºå±æ€§](#flags-as-properties)'
- en: '[46.13.2â€ƒOther properties](#other-properties)'
  id: totrans-39
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.13.2â€ƒå…¶ä»–å±æ€§](#other-properties)'
- en: '[46.14â€ƒMatch objects](#match-objects)'
  id: totrans-40
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.14â€ƒåŒ¹é…å¯¹è±¡](#match-objects)'
- en: '[46.14.1â€ƒMatch indices in match objects ^(ES2022)](#regexp-match-indices)'
  id: totrans-41
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.14.1â€ƒåŒ¹é…å¯¹è±¡ä¸­çš„ç´¢å¼•^(ES2022)](#regexp-match-indices)'
- en: '[46.15â€ƒMethods for working with regular expressions](#methods-for-working-with-regular-expressions)'
  id: totrans-42
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.15â€ƒå¤„ç†æ­£åˆ™è¡¨è¾¾å¼çš„æ–¹æ³•](#methods-for-working-with-regular-expressions)'
- en: '[46.15.1â€ƒBy default, regular expressions match anywhere in a string](#by-default-regular-expressions-match-anywhere-in-a-string)'
  id: totrans-43
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.15.1â€ƒé»˜è®¤æƒ…å†µä¸‹ï¼Œæ­£åˆ™è¡¨è¾¾å¼åœ¨å­—ç¬¦ä¸²çš„ä»»ä½•ä½ç½®è¿›è¡ŒåŒ¹é…](#by-default-regular-expressions-match-anywhere-in-a-string)'
- en: '[46.15.2â€ƒ`string.match(regExp)` without `/g`: getting a match object for the
    first match](#String.prototype.match)'
  id: totrans-44
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.15.2â€ƒ`string.match(regExp)` ä¸å¸¦ `/g`ï¼šè·å–ç¬¬ä¸€ä¸ªåŒ¹é…çš„åŒ¹é…å¯¹è±¡](#String.prototype.match)'
- en: '[46.15.3â€ƒ`string.match(regExp)` with `/g`: getting all group 0 captures ^(ES3)](#stringmatchregexp-with-g-getting-all-group-0-captures-es3)'
  id: totrans-45
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.15.3â€ƒ`string.match(regExp)` å¸¦æœ‰ `/g`ï¼šè·å–æ‰€æœ‰ç»„ 0 æ•è·^(ES3)](#stringmatchregexp-with-g-getting-all-group-0-captures-es3)'
- en: '[46.15.4â€ƒ`string.matchAll(regExp)`: getting an iterable over all match objects
    ^(ES2020)](#String.prototype.matchAll)'
  id: totrans-46
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.15.4â€ƒ`string.matchAll(regExp)`ï¼šè·å–æ‰€æœ‰åŒ¹é…å¯¹è±¡çš„è¿­ä»£å™¨^(ES2020)](#String.prototype.matchAll)'
- en: '[46.15.5â€ƒ`regExp.exec(str)`: capturing groups ^(ES3)](#RegExp.prototype.exec)'
  id: totrans-47
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.15.5â€ƒ`regExp.exec(str)`ï¼šæ•è·ç»„^(ES3)](#RegExp.prototype.exec)'
- en: '[46.15.6â€ƒ`string.match()` vs. `string.matchAll()` vs. `regExp.exec()`](#match-vs-matchall-vs-exec)'
  id: totrans-48
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.15.6â€ƒ`string.match()` ä¸ `string.matchAll()` ä¸ `regExp.exec()`](#match-vs-matchall-vs-exec)'
- en: '[46.15.7â€ƒReplacing with `string.replace()` and `string.replaceAll()`](#replace-replaceAll)'
  id: totrans-49
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.15.7â€ƒä½¿ç”¨ `string.replace()` å’Œ `string.replaceAll()` è¿›è¡Œæ›¿æ¢](#replace-replaceAll)'
- en: '[46.15.8â€ƒ`regExp.test(str)`: is there a match? ^(ES3)](#RegExp.prototype.test)'
  id: totrans-50
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.15.8â€ƒ`regExp.test(str)`ï¼šæ˜¯å¦æœ‰åŒ¹é…ï¼Ÿ^(ES3)](#RegExp.prototype.test)'
- en: '[46.15.9â€ƒ`string.search(regExp)`: at what index is the match? ^(ES3)](#String.prototype.search)'
  id: totrans-51
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.15.9â€ƒ`string.search(regExp)`ï¼šåŒ¹é…åœ¨ä»€ä¹ˆç´¢å¼•å¤„ï¼Ÿ^(ES3)](#String.prototype.search)'
- en: '[46.15.10â€ƒ`string.split(separator, limit?)`: splitting strings ^(ES3)](#String.prototype.split)'
  id: totrans-52
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.15.10â€ƒ`string.split(separator, limit?)`ï¼šåˆ†å‰²å­—ç¬¦ä¸²^(ES3)](#String.prototype.split)'
- en: '[46.16â€ƒThe flags `/g` and `/y`, and the property `.lastIndex` (advanced)](#regexp-flags-gy)'
  id: totrans-53
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.16â€ƒæ ‡å¿— `/g` å’Œ `/y`ï¼Œä»¥åŠå±æ€§ `.lastIndex`ï¼ˆé«˜çº§ï¼‰](#regexp-flags-gy)'
- en: '[46.16.1â€ƒThe flags `/g` and `/y`](#the-flags-g-and-y)'
  id: totrans-54
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.16.1â€ƒæ ‡å¿— `/g` å’Œ `/y`](#the-flags-g-and-y)'
- en: '[46.16.2â€ƒHow exactly are methods affected by `/g` and `/y`?](#how-exactly-are-methods-affected-by-g-and-y)'
  id: totrans-55
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.16.2â€ƒ`/g` å’Œ `/y` å¦‚ä½•å½±å“æ–¹æ³•ï¼Ÿ](#how-exactly-are-methods-affected-by-g-and-y)'
- en: '[46.16.3â€ƒFour pitfalls of `/g` and `/y` and how to deal with them](#four-pitfalls-of-g-and-y-and-how-to-deal-with-them)'
  id: totrans-56
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.16.3â€ƒ`/g` å’Œ `/y` çš„å››ä¸ªé™·é˜±ä»¥åŠå¦‚ä½•å¤„ç†å®ƒä»¬](#four-pitfalls-of-g-and-y-and-how-to-deal-with-them)'
- en: '[46.16.4â€ƒUse case for `.lastIndex`: starting matching at a given index](#use-case-for-lastindex-starting-matching-at-a-given-index)'
  id: totrans-57
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.16.4â€ƒ`.lastIndex` çš„ç”¨æ³•ï¼šä»æŒ‡å®šç´¢å¼•å¼€å§‹åŒ¹é…](#use-case-for-lastindex-starting-matching-at-a-given-index)'
- en: '[46.16.5â€ƒThe downsides and an upside of `.lastIndex`](#regexp-lastindex-upsides-downsides)'
  id: totrans-58
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.16.5â€ƒ`.lastIndex` çš„ç¼ºç‚¹å’Œä¼˜ç‚¹](#regexp-lastindex-upsides-downsides)'
- en: '[46.17â€ƒ`RegExp.escape()`: escaping text so that it can be used inside a regular
    expression ^(ES2025)](#RegExp.escape)'
  id: totrans-59
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.17â€ƒ`RegExp.escape()`ï¼šè½¬ä¹‰æ–‡æœ¬ä»¥ä¾¿åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ä½¿ç”¨^(ES2025)](#RegExp.escape)'
- en: '[46.17.1â€ƒUse case for `RegExp.escape()`: replacing all occurrences of a text](#use-case-for-regexpescape-replacing-all-occurrences-of-a-text)'
  id: totrans-60
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.17.1â€ƒ`RegExp.escape()` çš„ç”¨æ³•ï¼šæ›¿æ¢æ‰€æœ‰æ–‡æœ¬å‡ºç°](#use-case-for-regexpescape-replacing-all-occurrences-of-a-text)'
- en: '[46.17.2â€ƒUse case for `RegExp.escape()`: part of a regular expression must
    match a given text](#use-case-for-regexpescape-part-of-a-regular-expression-must-match-a-given-text)'
  id: totrans-61
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.17.2â€ƒ`RegExp.escape()` çš„ç”¨æ³•ï¼šæ­£åˆ™è¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†å¿…é¡»åŒ¹é…ç»™å®šçš„æ–‡æœ¬](#use-case-for-regexpescape-part-of-a-regular-expression-must-match-a-given-text)'
- en: '[46.18â€ƒMatching everything or nothing](#matching-everything-or-nothing)'
  id: totrans-62
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.18â€ƒåŒ¹é…æ‰€æœ‰å†…å®¹æˆ–æ— å†…å®¹](#matching-everything-or-nothing)'
- en: '[46.19â€ƒTips for making regular expressions easier to use](#tips-for-making-regular-expressions-easier-to-use)'
  id: totrans-63
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.19â€ƒä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼çš„æŠ€å·§](#tips-for-making-regular-expressions-easier-to-use)'
- en: '[46.19.1â€ƒTip: Use flag `/v`](#tip-use-flag-v)'
  id: totrans-64
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.19.1â€ƒæŠ€å·§ï¼šä½¿ç”¨æ ‡å¿— `/v`](#tip-use-flag-v)'
- en: '[46.19.2â€ƒTip: order flags alphabetically](#tip-order-flags-alphabetically)'
  id: totrans-65
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.19.2â€ƒæŠ€å·§ï¼šæŒ‰å­—æ¯é¡ºåºæ’åˆ—æ ‡å¿—](#tip-order-flags-alphabetically)'
- en: '[46.19.3â€ƒTip: Use named capture groups](#tip-use-named-capture-groups)'
  id: totrans-66
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.19.3â€ƒæŠ€å·§ï¼šä½¿ç”¨å‘½åæ•è·ç»„](#tip-use-named-capture-groups)'
- en: '[46.19.4â€ƒTip: insignificant whitespace and line comments via `#`](#tip-insignificant-whitespace-and-line-comments-via-)'
  id: totrans-67
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.19.4â€ƒæŠ€å·§ï¼šé€šè¿‡ `#` ä½¿ç”¨ä¸é‡è¦çš„ç©ºç™½å’Œè¡Œæ³¨é‡Š](#tip-insignificant-whitespace-and-line-comments-via-)'
- en: '[46.19.5â€ƒTip: Write tests for your regular expression](#tip-write-tests-for-your-regular-expression)'
  id: totrans-68
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.19.5â€ƒæŠ€å·§ï¼šä¸ºä½ çš„æ­£åˆ™è¡¨è¾¾å¼ç¼–å†™æµ‹è¯•](#tip-write-tests-for-your-regular-expression)'
- en: '[46.19.6â€ƒTip: Mention examples in your documentation](#tip-mention-examples-in-your-documentation)'
  id: totrans-69
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.19.6 æç¤ºï¼šåœ¨æ‚¨çš„æ–‡æ¡£ä¸­æåŠç¤ºä¾‹](#tip-mention-examples-in-your-documentation)'
- en: '[46.19.7â€ƒBonus tip: Use interpolation to reuse patterns](#bonus-tip-use-interpolation-to-reuse-patterns)'
  id: totrans-70
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.19.7 å¥–åŠ±æç¤ºï¼šä½¿ç”¨æ’å€¼æ¥é‡ç”¨æ¨¡å¼](#bonus-tip-use-interpolation-to-reuse-patterns)'
- en: '[46.19.8â€ƒBonus tip: insignificant whitespace without a library](#bonus-tip-insignificant-whitespace-without-a-library)'
  id: totrans-71
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.19.8 å¥–åŠ±æç¤ºï¼šæ— éœ€åº“çš„æ— æ„ä¹‰ç©ºç™½](#bonus-tip-insignificant-whitespace-without-a-library)'
- en: '[46.19.9â€ƒConclusion: This is how regular expressions are meant to be written](#conclusion-this-is-how-regular-expressions-are-meant-to-be-written)'
  id: totrans-72
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.19.9 ç»“è®ºï¼šè¿™å°±æ˜¯æ­£åˆ™è¡¨è¾¾å¼åº”è¯¥è¢«ç¼–å†™çš„æ–¹å¼](#conclusion-this-is-how-regular-expressions-are-meant-to-be-written)'
- en: '[46.20â€ƒQuick reference: regular expression functionality](#quickref-RegExp)'
  id: totrans-73
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.20 å¿«é€Ÿå‚è€ƒï¼šæ­£åˆ™è¡¨è¾¾å¼åŠŸèƒ½](#quickref-RegExp)'
- en: '[46.20.1â€ƒSummary: `.global` (`/g`) and `.sticky` (`/y`)](#summary-flags-global-sticky)'
  id: totrans-74
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.20.1 æ‘˜è¦ï¼š`.global` (`/g`) å’Œ `.sticky` (`/y`)](#summary-flags-global-sticky)'
- en: '[46.20.2â€ƒ`String.prototype.*`: matching and searching](#stringprototype-matching-and-searching)'
  id: totrans-75
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.20.2 `String.prototype.*`: åŒ¹é…å’Œæœç´¢](#stringprototype-matching-and-searching)'
- en: '[46.20.3â€ƒ`String.prototype.*`: splitting and replacing](#stringprototype-splitting-and-replacing)'
  id: totrans-76
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.20.3 `String.prototype.*`: åˆ†å‰²å’Œæ›¿æ¢](#stringprototype-splitting-and-replacing)'
- en: '[46.20.4â€ƒ`RegExp.prototype.*`](#regexpprototype)'
  id: totrans-77
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[46.20.4 `RegExp.prototype.*`](#regexpprototype)'
- en: '![Icon â€œreadingâ€](../Images/0fb62b2fc33a72829ae9fb174dedd0d2.png)â€‚**Availability
    of features**'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: '![å›¾æ ‡â€œé˜…è¯»â€](../Images/0fb62b2fc33a72829ae9fb174dedd0d2.png) **åŠŸèƒ½å¯ç”¨æ€§**'
- en: Unless stated otherwise, each regular expression feature has been available
    since ES3.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: é™¤éå¦æœ‰è¯´æ˜ï¼Œå¦åˆ™æ¯ä¸ªæ­£åˆ™è¡¨è¾¾å¼åŠŸèƒ½è‡ª ES3 ä»¥æ¥éƒ½å¯ç”¨ã€‚
- en: '[46.1â€ƒCreating regular expressions](#creating-regular-expressions)'
  id: totrans-80
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[46.1 åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼](#creating-regular-expressions)'
- en: '[46.1.1â€ƒLiteral vs. constructor](#regex-literal-vs-constructor)'
  id: totrans-81
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.1.1 å­—é¢é‡ä¸æ„é€ å‡½æ•°](#regex-literal-vs-constructor)'
- en: 'The two main ways of creating regular expressions are:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼çš„ä¸¤ç§ä¸»è¦æ–¹å¼æ˜¯ï¼š
- en: 'Literal: compiled statically (at load time).'
  id: totrans-83
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å­—é¢é‡ï¼šåœ¨åŠ è½½æ—¶é™æ€ç¼–è¯‘ã€‚
- en: '[PRE0]'
  id: totrans-84
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Constructor: compiled dynamically (at runtime).'
  id: totrans-85
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ„é€ å‡½æ•°ï¼šåœ¨è¿è¡Œæ—¶åŠ¨æ€ç¼–è¯‘ã€‚
- en: '[PRE1]'
  id: totrans-86
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Both regular expressions have the same two parts:'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸¤ä¸ªæ­£åˆ™è¡¨è¾¾å¼éƒ½æœ‰ç›¸åŒçš„ä¸¤ä¸ªéƒ¨åˆ†ï¼š
- en: The *body* `abc` â€“ the actual regular expression.
  id: totrans-88
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*ä¸»ä½“* `abc`â€”â€”å®é™…çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚'
- en: The *flags* `i` and `v`. Flags configure how the pattern is interpreted. For
    example, `i` enables case-insensitive matching. A list of available flags is given
    [later in this chapter](#regexp-flags).
  id: totrans-89
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*æ ‡å¿—* `i` å’Œ `v`ã€‚æ ‡å¿—é…ç½®äº†æ¨¡å¼æ˜¯å¦‚ä½•è¢«è§£é‡Šçš„ã€‚ä¾‹å¦‚ï¼Œ`i` å¯ç”¨ä¸åŒºåˆ†å¤§å°å†™çš„åŒ¹é…ã€‚å¯ç”¨çš„æ ‡å¿—åˆ—è¡¨å°†åœ¨æœ¬ç« åé¢ç»™å‡º [æ­£åˆ™è¡¨è¾¾å¼æ ‡å¿—](#regexp-flags)ã€‚'
- en: '![Icon â€œtipâ€](../Images/8440b17bb8219cda9f9405ac83c36db0.png)â€‚**Recommended:
    flag `/v` ^(ES2024)**'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: '![å›¾æ ‡â€œæç¤ºâ€](../Images/8440b17bb8219cda9f9405ac83c36db0.png) **æ¨èï¼šæ ‡å¿— `/v` ^ï¼ˆES2024ï¼‰**'
- en: Flag `/v` enables important features and is recommended for all regular expressions.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: æ ‡å¿— `/v` å¯ç”¨é‡è¦åŠŸèƒ½ï¼Œå¹¶æ¨èç”¨äºæ‰€æœ‰æ­£åˆ™è¡¨è¾¾å¼ã€‚
- en: '[46.1.2â€ƒTip: Use `String.raw` literals with `new RegExp()`](#tip-use-stringraw-literals-with-new-regexp)'
  id: totrans-92
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.1.2 æç¤ºï¼šä½¿ç”¨ `String.raw` å­—é¢é‡ä¸ `new RegExp()`](#tip-use-stringraw-literals-with-new-regexp)'
- en: 'If we use a normal string literal as an argument for `new RegExp()`, every
    regular expression backslash has to be escaped. If we use [`String.raw`](ch_template-literals.html#raw-string-literals)
    as a template tag then thatâ€™s not necessary. The following three regular expressions
    are all equivalent:'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœæˆ‘ä»¬å°†æ™®é€šå­—ç¬¦ä¸²å­—é¢é‡ä½œä¸º `new RegExp()` çš„å‚æ•°ï¼Œåˆ™æ¯ä¸ªæ­£åˆ™è¡¨è¾¾å¼åæ–œæ éƒ½å¿…é¡»è½¬ä¹‰ã€‚å¦‚æœæˆ‘ä»¬ä½¿ç”¨ [String.raw](ch_template-literals.html#raw-string-literals)
    ä½œä¸ºæ¨¡æ¿æ ‡ç­¾ï¼Œåˆ™ä¸éœ€è¦è¿™æ ·åšã€‚ä»¥ä¸‹ä¸‰ä¸ªæ­£åˆ™è¡¨è¾¾å¼éƒ½æ˜¯ç­‰æ•ˆçš„ï¼š
- en: '[PRE2]'
  id: totrans-94
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'If we use `String.raw` often, we can abbreviate it:'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœæˆ‘ä»¬ç»å¸¸ä½¿ç”¨ `String.raw`ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶ç¼©å†™ï¼š
- en: '[PRE3]'
  id: totrans-96
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '[46.1.3â€ƒCloning and non-destructively modifying regular expressions](#cloning-regexps)'
  id: totrans-97
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.1.3 å…‹éš†å’Œä¸å¯ç ´ååœ°ä¿®æ”¹æ­£åˆ™è¡¨è¾¾å¼](#cloning-regexps)'
- en: 'There are two variants of the constructor `RegExp()`:'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: '`RegExp()` æ„é€ å‡½æ•°æœ‰ä¸¤ç§å˜ä½“ï¼š'
- en: '`new RegExp(pattern : string, flags = '''')` ^(ES3)'
  id: totrans-99
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`new RegExp(pattern : string, flags = '''')` ^ï¼ˆES3ï¼‰'
- en: A new regular expression is created as specified via `pattern`. If `flags` is
    missing, the empty string `''` is used.
  id: totrans-100
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: æ ¹æ®é€šè¿‡ `pattern` æŒ‡å®šåˆ›å»ºä¸€ä¸ªæ–°çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚å¦‚æœ `flags` ç¼ºå¤±ï¼Œåˆ™ä½¿ç”¨ç©ºå­—ç¬¦ä¸² `''`ã€‚
- en: '`new RegExp(regExp : RegExp, flags = regExp.flags)` ^(ES6)'
  id: totrans-101
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`new RegExp(regExp : RegExp, flags = regExp.flags)` ^ï¼ˆES6ï¼‰'
- en: '`regExp` is cloned. If `flags` is provided, then it determines the flags of
    the clone.'
  id: totrans-102
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`regExp` è¢«å…‹éš†ã€‚å¦‚æœæä¾›äº† `flags`ï¼Œåˆ™å®ƒç¡®å®šå…‹éš†çš„æ ‡å¿—ã€‚'
- en: 'The second variant is useful for cloning regular expressions, optionally while
    modifying them. Flags are immutable and this is the only way of changing them
    â€“ for example:'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: ç¬¬äºŒç§å˜ä½“åœ¨å…‹éš†æ­£åˆ™è¡¨è¾¾å¼æ—¶å¾ˆæœ‰ç”¨ï¼Œå¯é€‰åœ°åŒæ—¶ä¿®æ”¹å®ƒä»¬ã€‚æ ‡å¿—æ˜¯ä¸å¯å˜çš„ï¼Œè¿™æ˜¯æ›´æ”¹å®ƒä»¬çš„å”¯ä¸€æ–¹æ³•â€”â€”ä¾‹å¦‚ï¼š
- en: '[PRE4]'
  id: totrans-104
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '`new Set()` iterates over its argument which means that a string is split into
    code points. Those code points become Set elements, which eliminates duplicates.
    Before we can join them into a string, we have to convert them to an Array and
    do so via `Array.from()`.'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: '`new Set()`éå†å…¶å‚æ•°ï¼Œè¿™æ„å‘³ç€å­—ç¬¦ä¸²è¢«åˆ†å‰²æˆç ç‚¹ã€‚è¿™äº›ç ç‚¹æˆä¸ºSetå…ƒç´ ï¼Œä»è€Œæ¶ˆé™¤äº†é‡å¤ã€‚åœ¨æˆ‘ä»¬èƒ½å¤Ÿå°†å®ƒä»¬è¿æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²ä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»å°†å®ƒä»¬è½¬æ¢æˆä¸€ä¸ªæ•°ç»„ï¼Œå¹¶é€šè¿‡`Array.from()`æ¥å®ç°ã€‚'
- en: '[46.2â€ƒSyntax characters and escaping](#escaping-for-regexp)'
  id: totrans-106
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[46.2â€ƒè¯­æ³•å­—ç¬¦å’Œè½¬ä¹‰](#escaping-for-regexp)'
- en: '[46.2.1â€ƒSyntax characters](#syntax-characters)'
  id: totrans-107
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.2.1â€ƒè¯­æ³•å­—ç¬¦](#syntax-characters)'
- en: At the top level of a regular expression, the following [*Syntax Characters*](https://tc39.es/ecma262/#prod-SyntaxCharacter)
    are special. They are escaped by prefixing a backslash (`\`).
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æ­£åˆ™è¡¨è¾¾å¼çš„é¡¶çº§ï¼Œä»¥ä¸‹[*è¯­æ³•å­—ç¬¦*](https://tc39.es/ecma262/#prod-SyntaxCharacter)æ˜¯ç‰¹æ®Šçš„ã€‚å®ƒä»¬é€šè¿‡åœ¨å‰é¢åŠ åæ–œæ ï¼ˆ`\`ï¼‰æ¥è½¬ä¹‰ã€‚
- en: '[PRE5]'
  id: totrans-109
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'This is an example:'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ˜¯ä¸€ä¸ªä¾‹å­ï¼š
- en: '[PRE6]'
  id: totrans-111
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'In regular expression literals, we must escape slashes:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æ­£åˆ™è¡¨è¾¾å¼å­—é¢é‡ä¸­ï¼Œæˆ‘ä»¬å¿…é¡»è½¬ä¹‰æ–œæ ï¼š
- en: '[PRE7]'
  id: totrans-113
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'In the argument of `new RegExp()`, we donâ€™t have to escape slashes:'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨`new RegExp()`çš„å‚æ•°ä¸­ï¼Œæˆ‘ä»¬ä¸éœ€è¦è½¬ä¹‰æ–œæ ï¼š
- en: '[PRE8]'
  id: totrans-115
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: '[46.2.2â€ƒIllegal top-level escaping](#illegal-toplevel-escaping)'
  id: totrans-116
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.2.2â€ƒéæ³•é¡¶çº§è½¬ä¹‰](#illegal-toplevel-escaping)'
- en: With a Unicode flag (`/u` or `/v`), escaping a non-syntax character at the top
    level is a syntax error. That enables syntax such as `\p{Â·Â·Â·}`.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨Unicodeæ ‡å¿—ï¼ˆ`/u`æˆ–`/v`ï¼‰ï¼Œåœ¨é¡¶çº§è½¬ä¹‰éè¯­æ³•å­—ç¬¦æ˜¯ä¸€ä¸ªè¯­æ³•é”™è¯¯ã€‚è¿™å…è®¸ä½¿ç”¨åƒ`\p{Â·Â·Â·}`è¿™æ ·çš„è¯­æ³•ã€‚
- en: '[PRE9]'
  id: totrans-118
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'Without flag `/u` and `/v`, an escaped non-syntax character at the top level
    matches itself:'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: æ²¡æœ‰æ ‡å¿—`/u`å’Œ`/v`ï¼Œé¡¶çº§è½¬ä¹‰çš„éè¯­æ³•å­—ç¬¦åŒ¹é…è‡ªèº«ï¼š
- en: '[PRE10]'
  id: totrans-120
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: '[46.2.3â€ƒEscaping inside character classes (`[Â·Â·Â·]`)](#escaping-inside-character-classes)'
  id: totrans-121
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.2.3â€ƒåœ¨å­—ç¬¦ç±»å†…éƒ¨è½¬ä¹‰(`[Â·Â·Â·]`)](#escaping-inside-character-classes)'
- en: The rules for escaping inside character classes are different if we use the
    recommended flag `/v`. We look at those first before we look at the rules for
    regular expressions that have no Unicode flag (neither `/u` nor `/v`).
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœæˆ‘ä»¬ä½¿ç”¨æ¨èçš„æ ‡å¿—`/v`ï¼Œåˆ™å­—ç¬¦ç±»å†…éƒ¨è½¬ä¹‰çš„è§„åˆ™æ˜¯ä¸åŒçš„ã€‚æˆ‘ä»¬åœ¨æŸ¥çœ‹æ²¡æœ‰Unicodeæ ‡å¿—ï¼ˆæ—¢ä¸æ˜¯`/u`ä¹Ÿä¸æ˜¯`/v`ï¼‰çš„æ­£åˆ™è¡¨è¾¾å¼è§„åˆ™ä¹‹å‰ï¼Œå…ˆæŸ¥çœ‹è¿™äº›è§„åˆ™ã€‚
- en: '[46.2.3.1â€ƒEscaping inside character classes: flag `/v`](#escaping-inside-character-classes-flag-v)'
  id: totrans-123
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '[46.2.3.1â€ƒåœ¨å­—ç¬¦ç±»å†…éƒ¨è½¬ä¹‰ï¼šæ ‡å¿—`/v`](#escaping-inside-character-classes-flag-v)'
- en: 'The following characters can be escaped via backslash:'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: ä»¥ä¸‹å­—ç¬¦å¯ä»¥é€šè¿‡åæ–œæ è½¬ä¹‰ï¼š
- en: '[*Syntax Characters*](https://tc39.es/ecma262/#prod-SyntaxCharacter):'
  id: totrans-125
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[*è¯­æ³•å­—ç¬¦*](https://tc39.es/ecma262/#prod-SyntaxCharacter):'
- en: '[PRE11]'
  id: totrans-126
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'Slash:'
  id: totrans-127
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ–œæ ï¼š
- en: '[PRE12]'
  id: totrans-128
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE12]'
- en: '[*Class Set Reserved Punctuators*](https://tc39.es/ecma262/#prod-ClassSetReservedDoublePunctuator):'
  id: totrans-129
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[*ç±»é›†ä¿ç•™åŒæ ‡ç‚¹ç¬¦å·*](https://tc39.es/ecma262/#prod-ClassSetReservedDoublePunctuator):'
- en: '[PRE13]'
  id: totrans-130
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'Interestingly, we donâ€™t always have to escape these characters. Only the following
    sequences of characters donâ€™t match themselves and have to be escaped:'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: æœ‰è¶£çš„æ˜¯ï¼Œæˆ‘ä»¬å¹¶ä¸æ€»æ˜¯éœ€è¦è½¬ä¹‰è¿™äº›å­—ç¬¦ã€‚åªæœ‰ä»¥ä¸‹å­—ç¬¦åºåˆ—ä¸åŒ¹é…è‡ªèº«å¹¶ä¸”å¿…é¡»è½¬ä¹‰ï¼š
- en: A single `^` only has to be escaped if it comes first.
  id: totrans-132
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å•ä¸ª`^`åªæœ‰åœ¨å®ƒæ˜¯ç¬¬ä¸€ä¸ªå­—ç¬¦æ—¶æ‰éœ€è¦è½¬ä¹‰ã€‚
- en: '[*Class Set Syntax Characters*](https://tc39.es/ecma262/#prod-ClassSetSyntaxCharacter)
    must always be escaped:'
  id: totrans-133
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[*ç±»é›†è¯­æ³•å­—ç¬¦*](https://tc39.es/ecma262/#prod-ClassSetSyntaxCharacter)å¿…é¡»å§‹ç»ˆè½¬ä¹‰ï¼š'
- en: '[PRE14]'
  id: totrans-134
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE14]'
- en: '[*Class Set Reserved Double Punctuators*](https://tc39.es/ecma262/#prod-ClassSetReservedDoublePunctuator)
    must always be escaped (at least one of them):'
  id: totrans-135
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[*ç±»é›†ä¿ç•™åŒæ ‡ç‚¹ç¬¦å·*](https://tc39.es/ecma262/#prod-ClassSetReservedDoublePunctuator)å¿…é¡»å§‹ç»ˆè½¬ä¹‰ï¼ˆè‡³å°‘æœ‰ä¸€ä¸ªï¼‰ï¼š'
- en: '[PRE15]'
  id: totrans-136
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE15]'
- en: '[46.2.3.2â€ƒEscaping inside character classes: no Unicode flag (neither `/u`
    nor `/v`)](#escaping-inside-character-classes-no-unicode-flag-neither-u-nor-v)'
  id: totrans-137
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '[46.2.3.2â€ƒåœ¨å­—ç¬¦ç±»å†…éƒ¨è½¬ä¹‰ï¼šæ²¡æœ‰Unicodeæ ‡å¿—ï¼ˆæ—¢ä¸æ˜¯`/u`ä¹Ÿä¸æ˜¯`/v`ï¼‰](#escaping-inside-character-classes-no-unicode-flag-neither-u-nor-v)'
- en: 'We always must escape: `\ ]`'
  id: totrans-138
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬æ€»æ˜¯å¿…é¡»è½¬ä¹‰ï¼š`\]`
- en: 'Some characters only have to be escaped in some locations:'
  id: totrans-139
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä¸€äº›å­—ç¬¦åªåœ¨æŸäº›ä½ç½®éœ€è¦è½¬ä¹‰ï¼š
- en: '`^` only has to be escaped if it comes first.'
  id: totrans-140
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`^`åªæœ‰åœ¨å®ƒæ˜¯ç¬¬ä¸€ä¸ªå­—ç¬¦æ—¶æ‰éœ€è¦è½¬ä¹‰ã€‚'
- en: '`-` only has to be escaped if it doesnâ€™t come first or last.'
  id: totrans-141
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-`åªæœ‰åœ¨å®ƒä¸æ˜¯ç¬¬ä¸€ä¸ªæˆ–æœ€åä¸€ä¸ªå­—ç¬¦æ—¶æ‰éœ€è¦è½¬ä¹‰ã€‚'
- en: '[46.3â€ƒRegular expressions: the concept of a character](#regular-expression-character)'
  id: totrans-142
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[46.3â€ƒæ­£åˆ™è¡¨è¾¾å¼ï¼šå­—ç¬¦çš„æ¦‚å¿µ](#regular-expression-character)'
- en: 'In the context of regular expressions, â€œcharacterâ€ means â€œatomic unit of textâ€:'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æ­£åˆ™è¡¨è¾¾å¼çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œâ€œå­—ç¬¦â€æ„å‘³ç€â€œæ–‡æœ¬çš„åŸå­å•ä½â€ï¼š
- en: Without the Unicode flags (`/u` and `/v`), a character is a JavaScript character
    (a UTF-16 code unit).
  id: totrans-144
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ²¡æœ‰Unicodeæ ‡å¿—ï¼ˆ`/u`å’Œ`/v`ï¼‰ï¼Œä¸€ä¸ªå­—ç¬¦æ˜¯JavaScriptå­—ç¬¦ï¼ˆä¸€ä¸ªUTF-16ä»£ç å•å…ƒï¼‰ã€‚
- en: With a Unicode flag, a character is a code point.
  id: totrans-145
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä½¿ç”¨Unicodeæ ‡å¿—ï¼Œä¸€ä¸ªå­—ç¬¦æ˜¯ä¸€ä¸ªç ç‚¹ã€‚
- en: 'For example, a dot (`.`) matches a single character:'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: ä¾‹å¦‚ï¼Œä¸€ä¸ªç‚¹ï¼ˆ`.`ï¼‰åŒ¹é…å•ä¸ªå­—ç¬¦ï¼š
- en: '[PRE16]'
  id: totrans-147
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: '[46.4â€ƒSyntax: matching single characters](#syntax-matching-single-characters)'
  id: totrans-148
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[46.4â€ƒè¯­æ³•ï¼šåŒ¹é…å•ä¸ªå­—ç¬¦](#syntax-matching-single-characters)'
- en: 'These constructs match single characters:'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™äº›æ„é€ åŒ¹é…å•ä¸ªå­—ç¬¦ï¼š
- en: '*Pattern characters* are all characters *except* syntax characters (`^`, `$`,
    etc.). Pattern characters match themselves. Examples: `A b % -`'
  id: totrans-150
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*æ¨¡å¼å­—ç¬¦* æ˜¯æ‰€æœ‰å­—ç¬¦ *é™¤äº†* è¯­æ³•å­—ç¬¦ï¼ˆ`^`ã€`$` ç­‰ï¼‰ã€‚æ¨¡å¼å­—ç¬¦åŒ¹é…è‡ªèº«ã€‚ä¾‹å¦‚ï¼š`A b % -`'
- en: '`.` matches any character. We can use [flag `/s` (`dotAll`)](#regexp-dot-all-flag)
    to control if the dot matches line terminators or not.'
  id: totrans-151
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`.` åŒ¹é…ä»»ä½•å­—ç¬¦ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ [æ ‡å¿— `/s` (`dotAll`)](#regexp-dot-all-flag) æ¥æ§åˆ¶ç‚¹æ˜¯å¦åŒ¹é…è¡Œç»ˆæ­¢ç¬¦ã€‚'
- en: '*Character escapes* (each escape matches a single fixed character):'
  id: totrans-152
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*å­—ç¬¦è½¬ä¹‰*ï¼ˆæ¯ä¸ªè½¬ä¹‰åŒ¹é…ä¸€ä¸ªå›ºå®šçš„å­—ç¬¦ï¼‰ï¼š'
- en: 'Control escapes (for a few control characters):'
  id: totrans-153
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ§åˆ¶è½¬ä¹‰ï¼ˆç”¨äºä¸€äº›æ§åˆ¶å­—ç¬¦ï¼‰ï¼š
- en: '`\f`: form feed (FF)'
  id: totrans-154
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`\f`: åˆ†é¡µ (FF)'
- en: '`\n`: line feed (LF)'
  id: totrans-155
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`\n`: æ¢è¡Œ (LF)'
- en: '`\r`: carriage return (CR)'
  id: totrans-156
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`\r`: å›è½¦ (CR)'
- en: '`\t`: character tabulation'
  id: totrans-157
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`\t`: åˆ¶è¡¨ç¬¦'
- en: '`\v`: line tabulation'
  id: totrans-158
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`\v`: æ¢è¡Œåˆ¶è¡¨ç¬¦'
- en: 'Control characters: `\cA` (Ctrl-A), â€¦, `\cZ` (Ctrl-Z)'
  id: totrans-159
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ§åˆ¶å­—ç¬¦ï¼š`\cA` (Ctrl-A), â€¦, `\cZ` (Ctrl-Z)
- en: 'Hex escape (first 256 Unicode code points): `\x20` (space)'
  id: totrans-160
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: åå…­è¿›åˆ¶è½¬ä¹‰ï¼ˆå‰ 256 ä¸ª Unicode ä»£ç ç‚¹ï¼‰ï¼š`\x20` (ç©ºæ ¼)
- en: 'Unicode code unit escapes: `\u00E4` (Ã¤)'
  id: totrans-161
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Unicode ä»£ç å•å…ƒè½¬ä¹‰ï¼š`\u00E4` (Ã¤)
- en: 'Unicode code point escapes (require Unicode flag `/u` or `/v`): `\u{1F642}`
    (ğŸ™‚)'
  id: totrans-162
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Unicode ä»£ç ç‚¹è½¬ä¹‰ï¼ˆéœ€è¦ Unicode æ ‡å¿— `/u` æˆ– `/v`ï¼‰ï¼š`\u{1F642}` (ğŸ™‚)
- en: 'Identity escapes match the escaped characters (these are the rules with a Unicode
    flag `/u` or `/v`; without them, most characters can be identity-escaped):'
  id: totrans-163
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ ‡è¯†ç¬¦è½¬ä¹‰åŒ¹é…è½¬ä¹‰å­—ç¬¦ï¼ˆè¿™äº›æ˜¯å¸¦æœ‰ Unicode æ ‡å¿— `/u` æˆ– `/v` çš„è§„åˆ™ï¼›æ²¡æœ‰å®ƒä»¬ï¼Œå¤§å¤šæ•°å­—ç¬¦éƒ½å¯ä»¥è¿›è¡Œæ ‡è¯†ç¬¦è½¬ä¹‰ï¼‰ï¼š
- en: 'We can escape the following [syntax characters](https://tc39.es/ecma262/#prod-SyntaxCharacter)
    by prefixing them with backslashes:'
  id: totrans-164
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨å®ƒä»¬å‰é¢åŠ ä¸Šåæ–œæ æ¥è½¬ä¹‰ä»¥ä¸‹ [è¯­æ³•å­—ç¬¦](https://tc39.es/ecma262/#prod-SyntaxCharacter)ï¼š
- en: '[PRE17]'
  id: totrans-165
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'We can also escape a slash like this: `\/`'
  id: totrans-166
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬ä¹Ÿå¯ä»¥è¿™æ ·è½¬ä¹‰æ–œæ ï¼š`\/`
- en: '[46.5â€ƒSyntax: character class escapes](#syntax-character-class-escapes)'
  id: totrans-167
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[46.5â€ƒè¯­æ³•ï¼šå­—ç¬¦ç±»è½¬ä¹‰](#syntax-character-class-escapes)'
- en: Character class escapes match sets of code units, sets of code points or sets
    of code point sequences.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: å­—ç¬¦ç±»è½¬ä¹‰åŒ¹é…ä»£ç å•å…ƒé›†åˆã€ä»£ç ç‚¹é›†åˆæˆ–ä»£ç ç‚¹åºåˆ—é›†åˆã€‚
- en: '[46.5.1â€ƒBasic character class escapes (sets of code units): `\d \D \s \S \w
    \W`](#basic-character-class-escapes)'
  id: totrans-169
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.5.1â€ƒåŸºæœ¬å­—ç¬¦ç±»è½¬ä¹‰ï¼ˆä»£ç å•å…ƒé›†åˆï¼‰ï¼š`\d \D \s \S \w \W`](#basic-character-class-escapes)'
- en: 'The following character class escapes and their complements are always supported:'
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: ä»¥ä¸‹å­—ç¬¦ç±»è½¬ä¹‰åŠå…¶è¡¥é›†å§‹ç»ˆå—æ”¯æŒï¼š
- en: '|  | Escape | Equivalent | Complement |'
  id: totrans-171
  prefs: []
  type: TYPE_TB
  zh: '|  | è½¬ä¹‰ | ç­‰ä»· | è¡¥é›† |'
- en: '| --- | --- | --- | --- |'
  id: totrans-172
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- | --- |'
- en: '| Digits | `\d` | `[0-9]` | `\D` |'
  id: totrans-173
  prefs: []
  type: TYPE_TB
  zh: '| æ•°å­— | `\d` | `[0-9]` | `\D` |'
- en: '| â€œWordâ€ characters | `\w` | `[a-zA-Z0-9_]` | `\W` |'
  id: totrans-174
  prefs: []
  type: TYPE_TB
  zh: '| â€œå•è¯â€å­—ç¬¦ | `\w` | `[a-zA-Z0-9_]` | `\W` |'
- en: '| Whitespace | `\s` |  | `\S` |'
  id: totrans-175
  prefs: []
  type: TYPE_TB
  zh: '| ç©ºç™½å­—ç¬¦ | `\s` |  | `\S` |'
- en: 'Note:'
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: æ³¨æ„ï¼š
- en: 'Whitespace: `\s` matches all whitespace code points: space, tab, line terminators,
    etc. They all fit into single UTF-16 code units.'
  id: totrans-177
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ç©ºç™½å­—ç¬¦ï¼š`\s` åŒ¹é…æ‰€æœ‰ç©ºç™½ä»£ç ç‚¹ï¼šç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€è¡Œç»ˆæ­¢ç¬¦ç­‰ã€‚å®ƒä»¬éƒ½é€‚åˆå•ä¸ª UTF-16 ä»£ç å•å…ƒã€‚
- en: â€œWordâ€ characters are related to identifiers in programming languages.
  id: totrans-178
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: â€œå•è¯â€å­—ç¬¦ä¸ç¼–ç¨‹è¯­è¨€ä¸­çš„æ ‡è¯†ç¬¦ç›¸å…³ã€‚
- en: 'Examples:'
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: ç¤ºä¾‹ï¼š
- en: '[PRE18]'
  id: totrans-180
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: '[46.5.2â€ƒUnicode property escapes: `\p{}` and `\P{}`](#unicode-property-escapes)'
  id: totrans-181
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.5.2â€ƒUnicode å±æ€§è½¬ä¹‰ï¼š`\p{}` å’Œ `\P{}`](#unicode-property-escapes)'
- en: 'Unicode property escapes look like this:'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: Unicode å±æ€§è½¬ä¹‰çœ‹èµ·æ¥åƒè¿™æ ·ï¼š
- en: 'Positive escape: `\p{UP}` matches Unicode characters or Unicode strings that
    have the Unicode property `UP`.'
  id: totrans-183
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ­£è½¬ä¹‰ï¼š`\p{UP}` åŒ¹é…å…·æœ‰ Unicode å±æ€§ `UP` çš„ Unicode å­—ç¬¦æˆ– Unicode å­—ç¬¦ä¸²ã€‚
- en: 'Negative escape: `\P{UP}` matches Unicode characters that do not have the Unicode
    property `UP`.'
  id: totrans-184
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: è´Ÿè½¬ä¹‰ï¼š`\P{UP}` åŒ¹é…æ²¡æœ‰ Unicode å±æ€§ `UP` çš„ Unicode å­—ç¬¦ã€‚
- en: 'There are two kinds of Unicode properties:'
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: æœ‰ä¸¤ç§ Unicode å±æ€§ï¼š
- en: '*Unicode character properties* are properties of code points. They specify
    sets of code points.'
  id: totrans-186
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*Unicode å­—ç¬¦å±æ€§* æ˜¯ä»£ç ç‚¹çš„å±æ€§ã€‚å®ƒä»¬æŒ‡å®šäº†ä¸€ç»„ä»£ç ç‚¹ã€‚'
- en: 'Example: `White_Space`'
  id: totrans-187
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: ç¤ºä¾‹ï¼š`White_Space`
- en: Supported by flag `/u` and flag `/v`
  id: totrans-188
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: ç”±æ ‡å¿— `/u` å’Œæ ‡å¿— `/v` æ”¯æŒ
- en: Introduced in ES2018
  id: totrans-189
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: åœ¨ ES2018 ä¸­å¼•å…¥
- en: '*Unicode string properties* are properties of sequences of code points. They
    specify sets of code point strings. String property escapes can only be positive.'
  id: totrans-190
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*Unicode å­—ç¬¦ä¸²å±æ€§* æ˜¯ä¸€ç³»åˆ—ä»£ç ç‚¹çš„å±æ€§ã€‚å®ƒä»¬æŒ‡å®šäº†ä¸€ç»„ä»£ç ç‚¹å­—ç¬¦ä¸²ã€‚å­—ç¬¦ä¸²å±æ€§è½¬ä¹‰åªèƒ½ä¸ºæ­£ã€‚'
- en: 'Example: `RGI_Emoji`'
  id: totrans-191
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: ç¤ºä¾‹ï¼š`RGI_Emoji`
- en: Only supported by flag `/v`
  id: totrans-192
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä»…ç”±æ ‡å¿— `/v` æ”¯æŒ
- en: Introduced in ES2024
  id: totrans-193
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: åœ¨ ES2024 ä¸­å¼•å…¥
- en: 'A quick example before we look at everything in more detail. This is how we
    can escape the Unicode character property `White_Space`:'
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æˆ‘ä»¬æ›´è¯¦ç»†åœ°æŸ¥çœ‹æ‰€æœ‰å†…å®¹ä¹‹å‰ï¼Œå…ˆå¿«é€Ÿçœ‹ä¸€ä¸‹ç¤ºä¾‹ã€‚è¿™æ˜¯å¦‚ä½•è½¬ä¹‰ Unicode å­—ç¬¦å±æ€§ `White_Space` çš„ï¼š
- en: '[PRE19]'
  id: totrans-195
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: '[46.5.3â€ƒUnicode character property escapes ^(ES2018)](#unicode-character-property-escapes)'
  id: totrans-196
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.5.3â€ƒUnicode å­—ç¬¦å±æ€§è½¬ä¹‰ (ES2018)](#unicode-character-property-escapes)'
- en: 'With flag `/u` or flag `/v`, we can use `\p{}` and `\P{}` to specify sets of
    code points via *Unicode character properties* (weâ€™ll learn more about those in
    the next subsection). That looks like this:'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨æ ‡å¿— `/u` æˆ–æ ‡å¿— `/v`ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `\p{}` å’Œ `\P{}` é€šè¿‡ *Unicode å­—ç¬¦å±æ€§* æŒ‡å®šä»£ç ç‚¹é›†ï¼ˆæˆ‘ä»¬å°†åœ¨ä¸‹ä¸€å°èŠ‚ä¸­äº†è§£æ›´å¤šå…³äºè¿™äº›å†…å®¹ï¼‰ã€‚è¿™çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ï¼š
- en: '`\p{prop=value}`: matches all characters whose Unicode character property `prop`
    has the value `value`.'
  id: totrans-198
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`\p{prop=value}`: åŒ¹é…æ‰€æœ‰å…¶ Unicode å­—ç¬¦å±æ€§ `prop` çš„å€¼ä¸º `value` çš„å­—ç¬¦ã€‚'
- en: '`\P{prop=value}`: matches all characters that do not have a Unicode character
    property `prop` whose value is `value`.'
  id: totrans-199
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`\P{prop=value}`: åŒ¹é…æ‰€æœ‰æ²¡æœ‰ Unicode å­—ç¬¦å±æ€§ `prop` çš„å€¼ä¸º `value` çš„å­—ç¬¦ã€‚'
- en: '`\p{bin_prop}`: matches all characters whose binary Unicode character property
    `bin_prop` is True.'
  id: totrans-200
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`\P{bin_prop}`: åŒ¹é…æ‰€æœ‰å…¶äºŒè¿›åˆ¶ Unicode å­—ç¬¦å±æ€§ `bin_prop` ä¸º True çš„å­—ç¬¦ã€‚'
- en: '`\P{bin_prop}`: matches all characters whose binary Unicode character property
    `bin_prop` is False.'
  id: totrans-201
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`\P{bin_prop}`: åŒ¹é…æ‰€æœ‰å…¶äºŒè¿›åˆ¶ Unicode å­—ç¬¦å±æ€§ `bin_prop` ä¸º False çš„å­—ç¬¦ã€‚'
- en: 'Comments:'
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: æ³¨é‡Šï¼š
- en: 'Forms (3) and (4) can be used as abbreviations if the property is `General_Category`.
    For example, the following two escapes are equivalent:'
  id: totrans-203
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å½¢å¼ (3) å’Œ (4) å¯ä»¥ç”¨ä½œç¼©å†™ï¼Œå¦‚æœå±æ€§æ˜¯ `General_Category`ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹ä¸¤ä¸ªè½¬ä¹‰æ˜¯ç­‰ä»·çš„ï¼š
- en: '[PRE20]'
  id: totrans-204
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE20]'
- en: Without the flags `/u` and `/v`, `\p` is the same as `p`.
  id: totrans-205
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ²¡æœ‰æ ‡å¿— `/u` å’Œ `/v`ï¼Œ`\p` ä¸ `p` ç›¸åŒã€‚
- en: 'Examples:'
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: ç¤ºä¾‹ï¼š
- en: 'Checking for whitespace:'
  id: totrans-207
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ£€æŸ¥ç©ºç™½å­—ç¬¦ï¼š
- en: '[PRE21]'
  id: totrans-208
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'Checking for Greek letters:'
  id: totrans-209
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ£€æŸ¥å¸Œè…Šå­—æ¯ï¼š
- en: '[PRE22]'
  id: totrans-210
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'Deleting any letters:'
  id: totrans-211
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: åˆ é™¤ä»»ä½•å­—æ¯ï¼š
- en: '[PRE23]'
  id: totrans-212
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE23]'
- en: 'Deleting lowercase letters:'
  id: totrans-213
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: åˆ é™¤å°å†™å­—æ¯ï¼š
- en: '[PRE24]'
  id: totrans-214
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE24]'
- en: '[46.5.3.1â€ƒUnicode character properties](#unicode-character-properties)'
  id: totrans-215
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '[46.5.3.1â€ƒUnicode å­—ç¬¦å±æ€§](#unicode-character-properties)'
- en: 'In the Unicode standard, each character has *properties* â€“ metadata describing
    it. Properties play an important role in defining the nature of a character. Quoting
    [the Unicode Standard, Sect. 3.3, D3](http://www.unicode.org/versions/Unicode9.0.0/ch03.pdf):'
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ Unicode æ ‡å‡†ä¸­ï¼Œæ¯ä¸ªå­—ç¬¦éƒ½æœ‰ *å±æ€§* â€“ æè¿°å®ƒçš„å…ƒæ•°æ®ã€‚å±æ€§åœ¨å®šä¹‰å­—ç¬¦æ€§è´¨æ–¹é¢å‘æŒ¥ç€é‡è¦ä½œç”¨ã€‚å¼•ç”¨ [Unicode æ ‡å‡†ç¬¬ 3.3 èŠ‚ï¼ŒD3](http://www.unicode.org/versions/Unicode9.0.0/ch03.pdf)ï¼š
- en: The semantics of a character are determined by its identity, normative properties,
    and behavior.
  id: totrans-217
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å­—ç¬¦çš„è¯­ä¹‰ç”±å…¶èº«ä»½ã€è§„èŒƒæ€§å±æ€§å’Œè¡Œä¸ºå†³å®šã€‚
- en: 'These are a few examples of properties:'
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™äº›æ˜¯ä¸€äº›å±æ€§çš„ä¾‹å­ï¼š
- en: '`Name`: a unique name, composed of uppercase letters, digits, hyphens, and
    spaces â€“ for example:'
  id: totrans-219
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Name`: ä¸€ä¸ªå”¯ä¸€åç§°ï¼Œç”±å¤§å†™å­—æ¯ã€æ•°å­—ã€è¿å­—ç¬¦å’Œç©ºæ ¼ç»„æˆ â€“ ä¾‹å¦‚ï¼š'
- en: 'A: `Name = LATIN CAPITAL LETTER A`'
  id: totrans-220
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'A: `Name = LATIN CAPITAL LETTER A`'
- en: 'ğŸ™‚: `Name = SLIGHTLY SMILING FACE`'
  id: totrans-221
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'ğŸ™‚: `Name = SLIGHTLY SMILING FACE`'
- en: '`General_Category`: categorizes characters â€“ for example:'
  id: totrans-222
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`General_Category`: å¯¹å­—ç¬¦è¿›è¡Œåˆ†ç±» â€“ ä¾‹å¦‚ï¼š'
- en: 'x: `General_Category = Lowercase_Letter`'
  id: totrans-223
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'x: `General_Category = Lowercase_Letter`'
- en: '3: `General_Category = Number`'
  id: totrans-224
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '3: `General_Category = Number`'
- en: '$: `General_Category = Currency_Symbol`'
  id: totrans-225
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '$: `General_Category = Currency_Symbol`'
- en: '`White_Space`: used for marking invisible spacing characters, such as spaces,
    tabs and newlines â€“ for example:'
  id: totrans-226
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`White_Space`: ç”¨äºæ ‡è®°ä¸å¯è§ç©ºæ ¼å­—ç¬¦ï¼Œä¾‹å¦‚ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦å’Œæ¢è¡Œç¬¦ â€“ ä¾‹å¦‚ï¼š'
- en: '\t: `White_Space = True`'
  id: totrans-227
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '\t: `White_Space = True`'
- en: 'Ï€: `White_Space = False`'
  id: totrans-228
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Ï€: `White_Space = False`'
- en: '`Age`: version of the Unicode Standard in which a character was introduced
    â€“ for example: The Euro sign â‚¬ was added in version 2.1 of the Unicode standard.'
  id: totrans-229
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Age`: å­—ç¬¦é¦–æ¬¡è¢«å¼•å…¥çš„ Unicode æ ‡å‡†ç‰ˆæœ¬ â€“ ä¾‹å¦‚ï¼šæ¬§å…ƒç¬¦å· â‚¬ è¢«æ·»åŠ åˆ° Unicode æ ‡å‡†çš„ 2.1 ç‰ˆæœ¬ä¸­ã€‚'
- en: 'â‚¬: `Age = 2.1`'
  id: totrans-230
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'â‚¬: `Age = 2.1`'
- en: '`Block`: a contiguous range of code points. Blocks donâ€™t overlap and their
    names are unique. For example:'
  id: totrans-231
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Block`: ä¸€ç³»åˆ—è¿ç»­çš„ä»£ç ç‚¹ã€‚å—ä¸é‡å ï¼Œå¹¶ä¸”å®ƒä»¬çš„åç§°æ˜¯å”¯ä¸€çš„ã€‚ä¾‹å¦‚ï¼š'
- en: 'S: `Block = Basic_Latin` (range 0x0000..0x007F)'
  id: totrans-232
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'S: `Block = Basic_Latin` (èŒƒå›´ 0x0000..0x007F)'
- en: 'ğŸ™‚: `Block = Emoticons` (range 0x1F600..0x1F64F)'
  id: totrans-233
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'ğŸ™‚: `Block = Emoticons` (èŒƒå›´ 0x1F600..0x1F64F)'
- en: '`Script`: is a collection of characters used by one or more writing systems.'
  id: totrans-234
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Script`: æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªä¹¦å†™ç³»ç»Ÿä½¿ç”¨çš„å­—ç¬¦é›†åˆã€‚'
- en: Some scripts support several writing systems. For example, the Latin script
    supports the writing systems English, French, German, Latin, etc.
  id: totrans-235
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä¸€äº›è„šæœ¬æ”¯æŒå¤šç§ä¹¦å†™ç³»ç»Ÿã€‚ä¾‹å¦‚ï¼Œæ‹‰ä¸å­—æ¯è„šæœ¬æ”¯æŒè‹±è¯­ã€æ³•è¯­ã€å¾·è¯­ã€æ‹‰ä¸è¯­ç­‰ä¹¦å†™ç³»ç»Ÿã€‚
- en: Some languages can be written in multiple alternate writing systems that are
    supported by multiple scripts. For example, Turkish used the Arabic script before
    it transitioned to the Latin script in the early 20th century.
  id: totrans-236
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä¸€äº›è¯­è¨€å¯ä»¥ç”¨å¤šç§ç”±å¤šç§è„šæœ¬æ”¯æŒçš„æ›¿ä»£ä¹¦å†™ç³»ç»Ÿæ¥ä¹¦å†™ã€‚ä¾‹å¦‚ï¼ŒåœŸè€³å…¶è¯­åœ¨ 20 ä¸–çºªåˆæœŸè¿‡æ¸¡åˆ°æ‹‰ä¸å­—æ¯è„šæœ¬ä¹‹å‰ä½¿ç”¨äº†é˜¿æ‹‰ä¼¯å­—æ¯è„šæœ¬ã€‚
- en: 'Examples:'
  id: totrans-237
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: ç¤ºä¾‹ï¼š
- en: 'Î±: `Script = Greek`'
  id: totrans-238
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Î±: `Script = Greek`'
- en: 'Ğ”: `Script = Cyrillic`'
  id: totrans-239
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Ğ”: `Script = Cyrillic`'
- en: 'Further reading:'
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: è¿›ä¸€æ­¥é˜…è¯»ï¼š
- en: 'Lists of Unicode properties and their values: [â€œUnicode Standard Annex #44:
    Unicode Character Databaseâ€](https://unicode.org/reports/tr44/#Properties) (Editors:
    Mark Davis, LaurenÈ›iu Iancu, Ken Whistler)'
  id: totrans-241
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Unicode å±æ€§åŠå…¶å€¼çš„åˆ—è¡¨ï¼š[â€œUnicode æ ‡å‡†é™„ä»¶ #44ï¼šUnicode å­—ç¬¦æ•°æ®åº“â€](https://unicode.org/reports/tr44/#Properties)ï¼ˆç¼–è¾‘è€…ï¼šMark
    Davis, LaurenÈ›iu Iancu, Ken Whistlerï¼‰'
- en: '[46.5.4â€ƒUnicode string property escapes ^(ES2024)](#unicode-string-property-escapes)'
  id: totrans-242
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.5.4â€ƒUnicodeå­—ç¬¦ä¸²å±æ€§è½¬ä¹‰^(ES2024)](#unicode-string-property-escapes)'
- en: 'Only flag `/v` lets us use `\p{}` to specify sets of code point sequences via
    *Unicode string properties* (negation via `\P{}` is not supported). For example,
    `RGI_Emoji` is a Unicode string property:'
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: åªæœ‰æ ‡å¿—`/v`å…è®¸æˆ‘ä»¬ä½¿ç”¨`\p{}`é€šè¿‡*Unicodeå­—ç¬¦ä¸²å±æ€§*æŒ‡å®šä»£ç ç‚¹åºåˆ—çš„é›†åˆï¼ˆé€šè¿‡`\P{}`è¿›è¡Œå¦å®šä¸æ”¯æŒï¼‰ã€‚ä¾‹å¦‚ï¼Œ`RGI_Emoji`æ˜¯ä¸€ä¸ªUnicodeå­—ç¬¦ä¸²å±æ€§ï¼š
- en: '[PRE25]'
  id: totrans-244
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: 'Letâ€™s see how the Unicode character property `Emoji` does with these inputs:'
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬çœ‹çœ‹Unicodeå­—ç¬¦å±æ€§`Emoji`å¦‚ä½•å¤„ç†è¿™äº›è¾“å…¥ï¼š
- en: '[PRE26]'
  id: totrans-246
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: As expected, it only matches single code points.
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚é¢„æœŸï¼Œå®ƒåªåŒ¹é…å•ä¸ªä»£ç ç‚¹ã€‚
- en: '[46.5.4.1â€ƒUnicode string properties](#unicode-string-properties)'
  id: totrans-248
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '[46.5.4.1â€ƒUnicodeå­—ç¬¦ä¸²å±æ€§](#unicode-string-properties)'
- en: 'For now, only the following Unicode string properties are supported by JavaScript:'
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: ç›®å‰ï¼ŒJavaScriptåªæ”¯æŒä»¥ä¸‹Unicodeå­—ç¬¦ä¸²å±æ€§ï¼š
- en: '`Basic_Emoji`: single code points'
  id: totrans-250
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Basic_Emoji`ï¼šå•ä¸ªä»£ç ç‚¹'
- en: '`Emoji_Keycap_Sequence`'
  id: totrans-251
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Emoji_Keycap_Sequence`'
- en: '`RGI_Emoji_Modifier_Sequence`'
  id: totrans-252
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`RGI_Emoji_Modifier_Sequence`'
- en: '`RGI_Emoji_Flag_Sequence`'
  id: totrans-253
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`RGI_Emoji_Flag_Sequence`'
- en: '`RGI_Emoji_Tag_Sequence`'
  id: totrans-254
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`RGI_Emoji_Tag_Sequence`'
- en: '`RGI_Emoji_ZWJ_Sequence`'
  id: totrans-255
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`RGI_Emoji_ZWJ_Sequence`'
- en: '`RGI_Emoji`: union of all of the above sets'
  id: totrans-256
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`RGI_Emoji`ï¼šä¸Šè¿°æ‰€æœ‰é›†åˆçš„å¹¶é›†'
- en: 'The semantics of Unicode string properties are defined in [text files](https://www.unicode.org/reports/tr51/#Emoji_Properties_and_Data_Files)
    that enumerate code point sequences likes this (`\x{23}` is `#`):'
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: Unicodeå­—ç¬¦ä¸²å±æ€§çš„è¯­ä¹‰åœ¨[æ–‡æœ¬æ–‡ä»¶](https://www.unicode.org/reports/tr51/#Emoji_Properties_and_Data_Files)ä¸­å®šä¹‰ï¼Œè¯¥æ–‡ä»¶åˆ—ä¸¾äº†å¦‚ä¸‹ä»£ç ç‚¹åºåˆ—ï¼ˆ`\x{23}`æ˜¯`#`ï¼‰ï¼š
- en: '[PRE27]'
  id: totrans-258
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: 'Further reading:'
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: è¿›ä¸€æ­¥é˜…è¯»ï¼š
- en: '[Section â€œProperties of Stringsâ€](https://www.unicode.org/reports/tr23/#PropertyStringsDefinitions)
    in â€œUnicode Technical Report #23: The Unicode Character Property Modelâ€ defines
    what properties of strings are.'
  id: totrans-260
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: â€œUnicodeæŠ€æœ¯æŠ¥å‘Š#23ï¼šUnicodeå­—ç¬¦å±æ€§æ¨¡å‹â€ä¸­çš„[â€œå­—ç¬¦ä¸²å±æ€§â€éƒ¨åˆ†](https://www.unicode.org/reports/tr23/#PropertyStringsDefinitions)å®šä¹‰äº†å­—ç¬¦ä¸²çš„å±æ€§æ˜¯ä»€ä¹ˆã€‚
- en: '[Table â€œBinary Unicode properties of stringsâ€](https://tc39.es/ecma262/#table-binary-unicode-properties-of-strings)
    in the ECMAScript specification lists the properties of strings that are supported
    by JavaScript.'
  id: totrans-261
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ECMAScriptè§„èŒƒä¸­çš„[â€œäºŒè¿›åˆ¶Unicodeå­—ç¬¦ä¸²å±æ€§è¡¨â€](https://tc39.es/ecma262/#table-binary-unicode-properties-of-strings)åˆ—å‡ºäº†JavaScriptæ”¯æŒçš„å­—ç¬¦ä¸²å±æ€§ã€‚
- en: '[46.6â€ƒSyntax: character classes](#syntax-character-classes)'
  id: totrans-262
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[46.6â€ƒè¯­æ³•ï¼šå­—ç¬¦ç±»](#syntax-character-classes)'
- en: 'A *character class* wraps *class ranges* in square brackets. The class ranges
    specify a set of characters:'
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€ä¸ª*å­—ç¬¦ç±»*å°†*ç±»èŒƒå›´*æ‹¬åœ¨æ–¹æ‹¬å·ä¸­ã€‚ç±»èŒƒå›´æŒ‡å®šä¸€ç»„å­—ç¬¦ï¼š
- en: '`[Â«class rangesÂ»]` matches any character in the set.'
  id: totrans-264
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`[Â«class rangesÂ»]`åŒ¹é…é›†åˆä¸­çš„ä»»ä½•å­—ç¬¦ã€‚'
- en: '`[^Â«class rangesÂ»]` matches any character not in the set.'
  id: totrans-265
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`[^Â«class rangesÂ»]`åŒ¹é…é›†åˆä¸­ä¸å­˜åœ¨çš„ä»»ä½•å­—ç¬¦ã€‚'
- en: 'Rules for class ranges:'
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: ç±»èŒƒå›´è§„åˆ™ï¼š
- en: 'Non-syntax characters stand for themselves: `[abc]`'
  id: totrans-267
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: éè¯­æ³•å­—ç¬¦ä»£è¡¨è‡ªèº«ï¼š`[abc]`
- en: 'What characters must be escaped depends on the flags:'
  id: totrans-268
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å¿…é¡»è½¬ä¹‰å“ªäº›å­—ç¬¦å–å†³äºæ ‡å¿—ï¼š
- en: 'Flag `/v`: Some of the following characters only have to be escaped if they
    appear twice, but itâ€™s easier to always escape them. For details, see [â€œEscaping
    inside character classes (`[Â·Â·Â·]`)â€ (Â§46.2.3)](#escaping-inside-character-classes).'
  id: totrans-269
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ ‡å¿—`/v`ï¼šä»¥ä¸‹ä¸€äº›å­—ç¬¦åªæœ‰åœ¨å‡ºç°ä¸¤æ¬¡æ—¶æ‰éœ€è¦è½¬ä¹‰ï¼Œä½†å§‹ç»ˆè½¬ä¹‰å®ƒä»¬æ›´ç®€å•ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…[â€œå­—ç¬¦ç±»å†…çš„è½¬ä¹‰ï¼ˆÂ§46.2.3ï¼‰â€](#escaping-inside-character-classes)ã€‚
- en: '[Syntax Characters](https://tc39.es/ecma262/#prod-SyntaxCharacter):'
  id: totrans-270
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[â€œè¯­æ³•å­—ç¬¦â€](https://tc39.es/ecma262/#prod-SyntaxCharacter):'
- en: '[PRE28]'
  id: totrans-271
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE28]'
- en: 'Slash:'
  id: totrans-272
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ–œæ ï¼š
- en: '[PRE29]'
  id: totrans-273
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE29]'
- en: '[Class Set Reserved Punctuators](https://tc39.es/ecma262/#prod-ClassSetReservedPunctuator):'
  id: totrans-274
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[ç±»é›†ä¿ç•™æ ‡ç‚¹ç¬¦å·](https://tc39.es/ecma262/#prod-ClassSetReservedPunctuator):'
- en: '[PRE30]'
  id: totrans-275
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE30]'
- en: 'No Unicode flag (neither `/v` nor `/u`):'
  id: totrans-276
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'æ²¡æœ‰Unicodeæ ‡å¿—ï¼ˆæ—¢æ²¡æœ‰`/v`ä¹Ÿæ²¡æœ‰`/u`ï¼‰:'
- en: 'We always must escape: `\ ]`'
  id: totrans-277
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¿…é¡»å§‹ç»ˆè½¬ä¹‰ï¼š`\ ]`
- en: 'Some characters only have to be escaped in some locations:'
  id: totrans-278
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä¸€äº›å­—ç¬¦åœ¨æŸäº›ä½ç½®æ‰éœ€è¦è½¬ä¹‰ï¼š
- en: '`^` only has to be escaped if it comes first.'
  id: totrans-279
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`^`åªæœ‰åœ¨å®ƒæ˜¯æœ€å‰é¢çš„å­—ç¬¦æ—¶æ‰éœ€è¦è½¬ä¹‰ã€‚'
- en: '`-` only has to be escaped if it doesnâ€™t come first or last.'
  id: totrans-280
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-`åªæœ‰åœ¨å®ƒä¸æ˜¯ç¬¬ä¸€ä¸ªæˆ–æœ€åä¸€ä¸ªå­—ç¬¦æ—¶æ‰éœ€è¦è½¬ä¹‰ã€‚'
- en: Character escapes (`\n`, `\x20`, `\u{1F44D}`, etc.) have the usual meanings.
  id: totrans-281
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å­—ç¬¦è½¬ä¹‰ç¬¦ï¼ˆ`\n`ï¼Œ`\x20`ï¼Œ`\u{1F44D}`ç­‰ï¼‰å…·æœ‰é€šå¸¸çš„å«ä¹‰ã€‚
- en: 'Watch out: `\b` stands for backspace. Elsewhere in a regular expression, it
    matches word boundaries.'
  id: totrans-282
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ³¨æ„ï¼š`\b`ä»£è¡¨é€€æ ¼ã€‚åœ¨å…¶ä»–æ­£åˆ™è¡¨è¾¾å¼ä¸­ï¼Œå®ƒåŒ¹é…å•è¯è¾¹ç•Œã€‚
- en: Character class escapes (`\d`, `\P{White_Space}`, `\p{RGI_Emoji}`, etc.) have
    the usual meanings.
  id: totrans-283
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å­—ç¬¦ç±»è½¬ä¹‰ç¬¦ï¼ˆ`\d`ï¼Œ`\P{White_Space}`ï¼Œ`\p{RGI_Emoji}`ç­‰ï¼‰å…·æœ‰é€šå¸¸çš„å«ä¹‰ã€‚
- en: 'A range of characters is specified via a dash: `[a-z]`'
  id: totrans-284
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: é€šè¿‡è¿å­—ç¬¦æŒ‡å®šå­—ç¬¦èŒƒå›´ï¼š`[a-z]`
- en: '[46.6.1â€ƒCode point sequences in character classes ^(ES2024)](#character-class-code-point-sequences)'
  id: totrans-285
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.6.1â€ƒå­—ç¬¦ç±»ä¸­çš„ä»£ç ç‚¹åºåˆ—^(ES2024)](#character-class-code-point-sequences)'
- en: 'With flag `/v`, we can use `\q{}` to add code point sequences to the set defined
    by a character class. This syntax is also called:'
  id: totrans-286
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨æ ‡å¿— `/v`ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `\q{}` å‘ç”±å­—ç¬¦ç±»å®šä¹‰çš„é›†åˆä¸­æ·»åŠ ä»£ç ç‚¹åºåˆ—ã€‚è¿™ç§è¯­æ³•ä¹Ÿç§°ä¸ºï¼š
- en: '*Class string disjunction* (by [the ECMAScript specification](https://tc39.es/ecma262/#prod-ClassStringDisjunction))'
  id: totrans-287
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*ç±»å­—ç¬¦ä¸²æå–*ï¼ˆç”± [ECMAScript è§„èŒƒ](https://tc39.es/ecma262/#prod-ClassStringDisjunction)ï¼‰'
- en: '*String literal* (by [the ECMAScript proposal for flag `/v`](https://github.com/tc39/proposal-regexp-v-flag))'
  id: totrans-288
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*å­—ç¬¦ä¸²å­—é¢é‡*ï¼ˆç”± [ECMAScript å¯¹ `/v` æ ‡å¿—çš„ææ¡ˆ](https://github.com/tc39/proposal-regexp-v-flag)ï¼‰'
- en: 'This is an example of using `\q{}`:'
  id: totrans-289
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨ `\q{}` çš„ç¤ºä¾‹ï¼š
- en: '[PRE31]'
  id: totrans-290
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: 'Without `\q{}`, a [grapheme cluster](ch_unicode.html#grapheme-clusters) with
    multiple code points is still treated as multiple characters:'
  id: totrans-291
  prefs: []
  type: TYPE_NORMAL
  zh: æ²¡æœ‰ä½¿ç”¨ `\q{}`ï¼Œå…·æœ‰å¤šä¸ªä»£ç ç‚¹çš„ [å›¾å½¢ç¾¤](ch_unicode.html#grapheme-clusters) ä»ç„¶è¢«è§†ä¸ºå¤šä¸ªå­—ç¬¦ï¼š
- en: '[PRE32]'
  id: totrans-292
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: 'We can use a single `\q{}` to add multiple code point sequences â€“ if we separate
    them with pipes:'
  id: totrans-293
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å•ä¸ª `\q{}` æ·»åŠ å¤šä¸ªä»£ç ç‚¹åºåˆ—â€”â€”å¦‚æœæˆ‘ä»¬ç”¨ç®¡é“ç¬¦åˆ†éš”å®ƒä»¬ï¼š
- en: '[PRE33]'
  id: totrans-294
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: '[46.6.2â€ƒSet operations for character classes ^(ES2024)](#regexp-character-class-set-operations)'
  id: totrans-295
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.6.2â€ƒå­—ç¬¦ç±»çš„é›†åˆæ“ä½œ^(ES2024)](#regexp-character-class-set-operations)'
- en: Flag `/v` enables set operations for character classes.
  id: totrans-296
  prefs: []
  type: TYPE_NORMAL
  zh: æ ‡å¿— `/v` å¯ç”¨å­—ç¬¦ç±»çš„é›†åˆæ“ä½œã€‚
- en: '[46.6.2.1â€ƒNesting character classes](#nesting-character-classes)'
  id: totrans-297
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '[46.6.2.1â€ƒåµŒå¥—å­—ç¬¦ç±»](#nesting-character-classes)'
- en: 'To enable set operations for character classes, we must be able to nest them.
    Character class escapes already provide some kind of nesting:'
  id: totrans-298
  prefs: []
  type: TYPE_NORMAL
  zh: è¦å¯ç”¨å­—ç¬¦ç±»çš„é›†åˆæ“ä½œï¼Œæˆ‘ä»¬å¿…é¡»èƒ½å¤ŸåµŒå¥—å®ƒä»¬ã€‚å­—ç¬¦ç±»è½¬ä¹‰å·²ç»æä¾›äº†ä¸€äº›åµŒå¥—åŠŸèƒ½ï¼š
- en: '[PRE34]'
  id: totrans-299
  prefs: []
  type: TYPE_PRE
  zh: '[PRE34]'
- en: 'With flag `/v`, we can additionally nest character classes (the regular expression
    below is equivalent to the regular expression in the previous example):'
  id: totrans-300
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨æ ‡å¿— `/v`ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åµŒå¥—å­—ç¬¦ç±»ï¼ˆä¸‹é¢çš„æ­£åˆ™è¡¨è¾¾å¼ä¸ä¸Šä¸€ä¸ªç¤ºä¾‹ä¸­çš„æ­£åˆ™è¡¨è¾¾å¼ç­‰ä»·ï¼‰ï¼š
- en: '[PRE35]'
  id: totrans-301
  prefs: []
  type: TYPE_PRE
  zh: '[PRE35]'
- en: '[46.6.2.2â€ƒSubtraction of character sets via `--`](#subtraction-of-character-sets-via-)'
  id: totrans-302
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '[46.6.2.2â€ƒé€šè¿‡ `--` çš„å­—ç¬¦é›†å‡æ³•](#subtraction-of-character-sets-via-)'
- en: 'We can use the `--` operator to set-theoretically subtract the character sets
    defined by character classes or character class escapes:'
  id: totrans-303
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `--` æ“ä½œç¬¦ä»ç†è®ºä¸Šå‡å»ç”±å­—ç¬¦ç±»æˆ–å­—ç¬¦ç±»è½¬ä¹‰å®šä¹‰çš„å­—ç¬¦é›†ï¼š
- en: '[PRE36]'
  id: totrans-304
  prefs: []
  type: TYPE_PRE
  zh: '[PRE36]'
- en: 'Single code points can also be used on either side of the `--` operator:'
  id: totrans-305
  prefs: []
  type: TYPE_NORMAL
  zh: å•ä¸ªä»£ç ç‚¹ä¹Ÿå¯ä»¥ç”¨äº `--` æ“ä½œç¬¦çš„ä¸¤ä¾§ï¼š
- en: '[PRE37]'
  id: totrans-306
  prefs: []
  type: TYPE_PRE
  zh: '[PRE37]'
- en: '[46.6.2.3â€ƒIntersection of character sets via `&&`](#intersection-of-character-sets-via-)'
  id: totrans-307
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '[46.6.2.3â€ƒé€šè¿‡ `&&` çš„å­—ç¬¦é›†äº¤é›†](#intersection-of-character-sets-via-)'
- en: 'We can use the `&&` operator to set-theoretically intersect the character sets
    defined by character classes or character class escapes:'
  id: totrans-308
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `&&` æ“ä½œç¬¦ä»ç†è®ºä¸Šäº¤é›†ç”±å­—ç¬¦ç±»æˆ–å­—ç¬¦ç±»è½¬ä¹‰å®šä¹‰çš„å­—ç¬¦é›†ï¼š
- en: '[PRE38]'
  id: totrans-309
  prefs: []
  type: TYPE_PRE
  zh: '[PRE38]'
- en: '[46.6.2.4â€ƒUnion of characters sets](#union-of-characters-sets)'
  id: totrans-310
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '[46.6.2.4â€ƒå­—ç¬¦é›†çš„å¹¶é›†](#union-of-characters-sets)'
- en: 'Two compute the set-theoretical union of character sets, we only need to write
    their definining constructs next to each other inside a character class:'
  id: totrans-311
  prefs: []
  type: TYPE_NORMAL
  zh: è¦è®¡ç®—å­—ç¬¦é›†çš„é›†åˆè®ºå¹¶é›†ï¼Œæˆ‘ä»¬åªéœ€åœ¨å­—ç¬¦ç±»å†…éƒ¨å°†å®ƒä»¬çš„å®šä¹‰ç»“æ„å¹¶æ’æ”¾ç½®ï¼š
- en: '[PRE39]'
  id: totrans-312
  prefs: []
  type: TYPE_PRE
  zh: '[PRE39]'
- en: '[46.7â€ƒSyntax: capture groups](#regexp-capture-groups)'
  id: totrans-313
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[46.7â€ƒè¯­æ³•ï¼šæ•è·ç»„](#regexp-capture-groups)'
- en: 'Numbered capture group: `(a+)`'
  id: totrans-314
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'ç¼–å·æ•è·ç»„: `(a+)`'
- en: 'Backreference: `\1`, `\2`, etc.'
  id: totrans-315
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: å›æº¯å¼•ç”¨ï¼š`\1`ï¼Œ`\2` ç­‰ã€‚
- en: 'Named capture group ^(ES2018): `(?<as>a+)`'
  id: totrans-316
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'å‘½åæ•è·ç»„^(ES2018): `(?<as>a+)`'
- en: 'Backreference: `\k<as>`'
  id: totrans-317
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: å›æº¯å¼•ç”¨ï¼š`\k<as>`
- en: 'Noncapturing group: `(?:a+)`'
  id: totrans-318
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'éæ•è·ç»„: `(?:a+)`'
- en: '[46.8â€ƒSyntax: quantifiers](#regexp-quantifiers)'
  id: totrans-319
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[46.8â€ƒè¯­æ³•ï¼šé‡è¯](#regexp-quantifiers)'
- en: 'By default, all of the following quantifiers are *greedy* (they match as many
    characters as possible):'
  id: totrans-320
  prefs: []
  type: TYPE_NORMAL
  zh: é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰ä»¥ä¸‹é‡è¯éƒ½æ˜¯ *è´ªå©ªçš„*ï¼ˆå®ƒä»¬å°½å¯èƒ½å¤šåœ°åŒ¹é…å­—ç¬¦ï¼‰ï¼š
- en: '`?`: match never or once'
  id: totrans-321
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`?`: åŒ¹é…é›¶æ¬¡æˆ–ä¸€æ¬¡'
- en: '`*`: match zero or more times'
  id: totrans-322
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`*`: åŒ¹é…é›¶æ¬¡æˆ–å¤šæ¬¡'
- en: '`+`: match one or more times'
  id: totrans-323
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`+`: åŒ¹é…ä¸€æ¬¡æˆ–å¤šæ¬¡'
- en: '`{n}`: match `n` times'
  id: totrans-324
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`{n}`: åŒ¹é… `n` æ¬¡'
- en: '`{n,}`: match `n` or more times'
  id: totrans-325
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`{n,}`: åŒ¹é… `n` æ¬¡æˆ–æ›´å¤šæ¬¡'
- en: '`{n,m}`: match at least `n` times, at most `m` times.'
  id: totrans-326
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`{n,m}`: è‡³å°‘åŒ¹é… `n` æ¬¡ï¼Œæœ€å¤šåŒ¹é… `m` æ¬¡ã€‚'
- en: 'To make them *reluctant* (so that they match as few characters as possible),
    put question marks (`?`) after them:'
  id: totrans-327
  prefs: []
  type: TYPE_NORMAL
  zh: è¦ä½¿å®ƒä»¬ *çŠ¹è±«ä¸å†³*ï¼ˆä»¥ä¾¿å®ƒä»¬å°½å¯èƒ½å°‘åœ°åŒ¹é…å­—ç¬¦ï¼‰ï¼Œåœ¨å®ƒä»¬åé¢æ”¾ç½®é—®å·ï¼ˆ`?`ï¼‰ï¼š
- en: '[PRE40]'
  id: totrans-328
  prefs: []
  type: TYPE_PRE
  zh: '[PRE40]'
- en: '[46.9â€ƒSyntax: assertions](#regexp-assertions)'
  id: totrans-329
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[46.9â€ƒè¯­æ³•ï¼šæ–­è¨€](#regexp-assertions)'
- en: '`^` matches only at the beginning of the input'
  id: totrans-330
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`^` ä»…åŒ¹é…è¾“å…¥çš„å¼€å§‹'
- en: '`$` matches only at the end of the input'
  id: totrans-331
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`$` ä»…åŒ¹é…è¾“å…¥çš„ç»“æŸ'
- en: '`\b` matches only at a word boundary'
  id: totrans-332
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`\b` ä»…åœ¨å•è¯è¾¹ç•Œå¤„åŒ¹é…'
- en: '`\B` matches only when not at a word boundary'
  id: totrans-333
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`\B` ä»…åœ¨éå•è¯è¾¹ç•Œå¤„åŒ¹é…'
- en: 'Overview of available lookaround assertions:'
  id: totrans-334
  prefs: []
  type: TYPE_NORMAL
  zh: å¯ç”¨å‰ç»æ–­è¨€æ¦‚è¿°ï¼š
- en: '| Pattern | Name |  |'
  id: totrans-335
  prefs: []
  type: TYPE_TB
  zh: '| æ¨¡å¼ | åç§° |  |'
- en: '| --- | --- | --- |'
  id: totrans-336
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| `(?=Â«patternÂ»)` | Positive lookahead | ES3 |'
  id: totrans-337
  prefs: []
  type: TYPE_TB
  zh: '| `(?=Â«patternÂ»)` | æ­£å‘å‰è§† | ES3 |'
- en: '| `(?!Â«patternÂ»)` | Negative lookahead | ES3 |'
  id: totrans-338
  prefs: []
  type: TYPE_TB
  zh: '| `(?!Â«patternÂ»)` | è´Ÿå‘å‰è§† | ES3 |'
- en: '| `(?<=Â«patternÂ»)` | Positive lookbehind | ES2018 |'
  id: totrans-339
  prefs: []
  type: TYPE_TB
  zh: '| `(?<=Â«patternÂ»)` | æ­£å‘åè§† | ES2018 |'
- en: '| `(?<!Â«patternÂ»)` | Negative lookbehind | ES2018 |'
  id: totrans-340
  prefs: []
  type: TYPE_TB
  zh: '| `(?<!Â«patternÂ»)` | è´Ÿå‘åè§† | ES2018 |'
- en: '[46.9.1â€ƒLookahead assertions](#regexp-lookahead-assertions)'
  id: totrans-341
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.9.1â€ƒå‘å‰è§†æ–­è¨€](#regexp-lookahead-assertions)'
- en: '**Positive lookahead:** `(?=Â«patternÂ»)` matches if `pattern` matches what comes
    next.'
  id: totrans-342
  prefs: []
  type: TYPE_NORMAL
  zh: '**æ­£å‘å‰è§†åŒ¹é…:** `(?=Â«patternÂ»)` å¦‚æœ `pattern` åŒ¹é…æ¥ä¸‹æ¥çš„å†…å®¹ï¼Œåˆ™åŒ¹é…ã€‚'
- en: 'Example: sequences of lowercase letters that are followed by an `X`.'
  id: totrans-343
  prefs: []
  type: TYPE_NORMAL
  zh: ç¤ºä¾‹ï¼šç”± `X` åç¼€çš„å°å†™å­—æ¯åºåˆ—ã€‚
- en: '[PRE41]'
  id: totrans-344
  prefs: []
  type: TYPE_PRE
  zh: '[PRE41]'
- en: Note that the `X` itself is not part of the matched substring.
  id: totrans-345
  prefs: []
  type: TYPE_NORMAL
  zh: æ³¨æ„ï¼Œ`X` æœ¬èº«ä¸æ˜¯åŒ¹é…å­ä¸²çš„ä¸€éƒ¨åˆ†ã€‚
- en: '**Negative lookahead:** `(?!Â«patternÂ»)` matches if `pattern` does not match
    what comes next.'
  id: totrans-346
  prefs: []
  type: TYPE_NORMAL
  zh: '**è´Ÿå‘å‰è§†åŒ¹é…:** `(?!Â«patternÂ»)` å¦‚æœ `pattern` ä¸åŒ¹é…æ¥ä¸‹æ¥çš„å†…å®¹ï¼Œåˆ™åŒ¹é…ã€‚'
- en: 'Example: sequences of lowercase letters that are not followed by an `X`.'
  id: totrans-347
  prefs: []
  type: TYPE_NORMAL
  zh: ç¤ºä¾‹ï¼šç”± `X` åç¼€çš„å°å†™å­—æ¯åºåˆ—ã€‚
- en: '[PRE42]'
  id: totrans-348
  prefs: []
  type: TYPE_PRE
  zh: '[PRE42]'
- en: '[46.9.2â€ƒLookbehind assertions ^(ES2018)](#regexp-lookbehind-assertions)'
  id: totrans-349
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.9.2â€ƒå‘åè§†æ–­è¨€ (ES2018)](#regexp-lookbehind-assertions)'
- en: '**Positive lookbehind:** `(?<=Â«patternÂ»)` matches if `pattern` matches what
    came before.'
  id: totrans-350
  prefs: []
  type: TYPE_NORMAL
  zh: '**æ­£å‘åè§†åŒ¹é…:** `(?<=Â«patternÂ»)` å¦‚æœ `pattern` åŒ¹é…å‰é¢çš„å†…å®¹ï¼Œåˆ™åŒ¹é…ã€‚'
- en: 'Example: sequences of lowercase letters that are preceded by an `X`.'
  id: totrans-351
  prefs: []
  type: TYPE_NORMAL
  zh: ç¤ºä¾‹ï¼šç”± `X` å‰ç¼€çš„å°å†™å­—æ¯åºåˆ—ã€‚
- en: '[PRE43]'
  id: totrans-352
  prefs: []
  type: TYPE_PRE
  zh: '[PRE43]'
- en: '**Negative lookbehind:** `(?<!Â«patternÂ»)` matches if `pattern` does not match
    what came before.'
  id: totrans-353
  prefs: []
  type: TYPE_NORMAL
  zh: '**è´Ÿå‘åè§†åŒ¹é…:** `(?<!Â«patternÂ»)` å¦‚æœ `pattern` ä¸åŒ¹é…å‰é¢çš„å†…å®¹ï¼Œåˆ™åŒ¹é…ã€‚'
- en: 'Example: sequences of lowercase letters that are not preceded by an `X`.'
  id: totrans-354
  prefs: []
  type: TYPE_NORMAL
  zh: ç¤ºä¾‹ï¼šç”± `X` å‰ç¼€çš„å°å†™å­—æ¯åºåˆ—ã€‚
- en: '[PRE44]'
  id: totrans-355
  prefs: []
  type: TYPE_PRE
  zh: '[PRE44]'
- en: 'Example: replace â€œ.jsâ€ with â€œ.htmlâ€, but not in â€œNode.jsâ€.'
  id: totrans-356
  prefs: []
  type: TYPE_NORMAL
  zh: ç¤ºä¾‹ï¼šå°† â€œ.jsâ€ æ›¿æ¢ä¸º â€œ.htmlâ€ï¼Œä½†ä¸åœ¨ â€œNode.jsâ€ ä¸­æ›¿æ¢ã€‚
- en: '[PRE45]'
  id: totrans-357
  prefs: []
  type: TYPE_PRE
  zh: '[PRE45]'
- en: '[46.10â€ƒSyntax: disjunction (`|`)](#syntax-disjunction-)'
  id: totrans-358
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[46.10â€ƒè¯­æ³•ï¼šæå–ï¼ˆ`|`ï¼‰](#syntax-disjunction-)'
- en: 'Caveat: this operator has low precedence (binds very weakly). Use groups if
    necessary:'
  id: totrans-359
  prefs: []
  type: TYPE_NORMAL
  zh: æ³¨æ„ï¼šæ­¤æ“ä½œç¬¦ä¼˜å…ˆçº§ä½ï¼ˆç»‘å®šéå¸¸å¼±ï¼‰ã€‚å¦‚æœ‰å¿…è¦ï¼Œè¯·ä½¿ç”¨åˆ†ç»„ï¼š
- en: '`^aa|zz$` matches all strings that start with `aa` and/or end with `zz`.'
  id: totrans-360
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`^aa|zz$` åŒ¹é…æ‰€æœ‰ä»¥ `aa` å¼€å¤´å’Œ/æˆ–ä»¥ `zz` ç»“å°¾çš„å­—ç¬¦ä¸²ã€‚'
- en: Note that `|` has a lower precedence than `^` and `$`.
  id: totrans-361
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ³¨æ„ï¼Œ`|` çš„ä¼˜å…ˆçº§ä½äº `^` å’Œ `$`ã€‚
- en: '`^(aa|zz)$` matches the two strings `''aa''` and `''zz''`.'
  id: totrans-362
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`^(aa|zz)$` åŒ¹é…ä¸¤ä¸ªå­—ç¬¦ä¸² `''aa''` å’Œ `''zz''`ã€‚'
- en: '`^a(a|z)z$` matches the two strings `''aaz''` and `''azz''`.'
  id: totrans-363
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`^a(a|z)z$` åŒ¹é…ä¸¤ä¸ªå­—ç¬¦ä¸² `''aaz''` å’Œ `''azz''`ã€‚'
- en: '[46.11â€ƒRegular expression flags](#regexp-flags)'
  id: totrans-364
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[46.11â€ƒæ­£åˆ™è¡¨è¾¾å¼æ ‡å¿—](#regexp-flags)'
- en: '| Literal flag | Property name | ES | Description |'
  id: totrans-365
  prefs: []
  type: TYPE_TB
  zh: '| æ–‡å­—æ ‡å¿— | å±æ€§å | ES | æè¿° |'
- en: '| --- | --- | --- | --- |'
  id: totrans-366
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- | --- |'
- en: '| `d` | `hasIndices` | ES2022 | Switch on match indices |'
  id: totrans-367
  prefs: []
  type: TYPE_TB
  zh: '| `d` | `hasIndices` | ES2022 | å¼€å¯åŒ¹é…ç´¢å¼• |'
- en: '| `g` | `global` | ES3 | Match multiple times |'
  id: totrans-368
  prefs: []
  type: TYPE_TB
  zh: '| `g` | `global` | ES3 | å¤šæ¬¡åŒ¹é… |'
- en: '| `i` | `ignoreCase` | ES3 | Match case-insensitively |'
  id: totrans-369
  prefs: []
  type: TYPE_TB
  zh: '| `i` | `ignoreCase` | ES3 | ä¸åŒºåˆ†å¤§å°å†™åŒ¹é… |'
- en: '| `m` | `multiline` | ES3 | `^` and `$` match per line |'
  id: totrans-370
  prefs: []
  type: TYPE_TB
  zh: '| `m` | `multiline` | ES3 | `^` å’Œ `$` æ¯è¡ŒåŒ¹é… |'
- en: '| `s` | `dotAll` | ES2018 | Dot matches line terminators |'
  id: totrans-371
  prefs: []
  type: TYPE_TB
  zh: '| `s` | `dotAll` | ES2018 | ç‚¹å·åŒ¹é…è¡Œç»ˆæ­¢ç¬¦ |'
- en: '| `u` | `unicode` | ES6 | Unicode mode |'
  id: totrans-372
  prefs: []
  type: TYPE_TB
  zh: '| `u` | `unicode` | ES6 | Unicode æ¨¡å¼ |'
- en: '| `v` | `unicodeSets` | ES2024 | Unicode sets mode (**recommended**) |'
  id: totrans-373
  prefs: []
  type: TYPE_TB
  zh: '| `v` | `unicodeSets` | ES2024 | Unicode é›†åˆæ¨¡å¼ï¼ˆ**æ¨è**ï¼‰ |'
- en: '| `y` | `sticky` | ES6 | No characters between matches |'
  id: totrans-374
  prefs: []
  type: TYPE_TB
  zh: '| `y` | `sticky` | ES6 | åŒ¹é…ä¹‹é—´æ²¡æœ‰å­—ç¬¦ |'
- en: 'Table 46.1: These are the regular expression flags supported by JavaScript.'
  id: totrans-375
  prefs: []
  type: TYPE_NORMAL
  zh: è¡¨ 46.1ï¼šè¿™æ˜¯ JavaScript æ”¯æŒçš„æ­£åˆ™è¡¨è¾¾å¼æ ‡å¿—ã€‚
- en: 'The following regular expression flags are available in JavaScript ([table
    46.1](#tbl:reg-exp-flags-table) provides a compact overview):'
  id: totrans-376
  prefs: []
  type: TYPE_NORMAL
  zh: ä»¥ä¸‹æ­£åˆ™è¡¨è¾¾å¼æ ‡å¿—åœ¨ JavaScript ä¸­å¯ç”¨ï¼ˆ[è¡¨ 46.1](#tbl:reg-exp-flags-table) æä¾›äº†ç´§å‡‘çš„æ¦‚è¿°ï¼‰ï¼š
- en: '`/d` (`.hasIndices`): Some RegExp-related methods return *match objects* that
    describe where the regular expression matched in an input string. If this flag
    is on, each match object includes *match indices* which tell us where each group
    capture starts and ends. More information: [â€œMatch indices in match objects ^(ES2022)â€
    (Â§46.14.1)](#regexp-match-indices).'
  id: totrans-377
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`/d`ï¼ˆ`.hasIndices`ï¼‰ï¼šæŸäº›ä¸ RegExp ç›¸å…³çš„æ–¹æ³•è¿”å› *match å¯¹è±¡*ï¼Œæè¿°æ­£åˆ™è¡¨è¾¾å¼åœ¨è¾“å…¥å­—ç¬¦ä¸²ä¸­çš„åŒ¹é…ä½ç½®ã€‚å¦‚æœæ­¤æ ‡å¿—å¼€å¯ï¼Œæ¯ä¸ª
    match å¯¹è±¡éƒ½åŒ…å« *match ç´¢å¼•*ï¼Œå‘Šè¯‰æˆ‘ä»¬æ¯ä¸ªåˆ†ç»„æ•è·çš„å¼€å§‹å’Œç»“æŸä½ç½®ã€‚æ›´å¤šä¿¡æ¯ï¼š[â€œMatch indices in match objects
    (ES2022)â€ (Â§46.14.1)](#regexp-match-indices)ã€‚'
- en: '`/g` (`.global`) fundamentally changes how the following methods work.'
  id: totrans-378
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`/g`ï¼ˆ`.global`ï¼‰ä»æ ¹æœ¬ä¸Šæ”¹å˜äº†åç»­æ–¹æ³•çš„å·¥ä½œæ–¹å¼ã€‚'
- en: '`String.prototype.match()`'
  id: totrans-379
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`String.prototype.match()`'
- en: '`RegExp.prototype.exec()`'
  id: totrans-380
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`RegExp.prototype.exec()`'
- en: '`RegExp.prototype.test()`'
  id: totrans-381
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`RegExp.prototype.test()`'
- en: 'How, is explained in [â€œThe flags `/g` and `/y`, and the property `.lastIndex`
    (advanced)â€ (Â§46.16)](#regexp-flags-gy). In a nutshell: Without `/g`, the methods
    only consider the first match for a regular expression in an input string. With
    `/g`, they consider all matches.'
  id: totrans-382
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: è§£é‡Šè§ [â€œThe flags `/g` and `/y`, and the property `.lastIndex` (advanced)â€ (Â§46.16)](#regexp-flags-gy)ã€‚ç®€è€Œè¨€ä¹‹ï¼šæ²¡æœ‰
    `/g`ï¼Œæ–¹æ³•åªè€ƒè™‘è¾“å…¥å­—ç¬¦ä¸²ä¸­æ­£åˆ™è¡¨è¾¾å¼çš„ç¬¬ä¸€ä¸ªåŒ¹é…ã€‚æœ‰ `/g`ï¼Œå®ƒä»¬è€ƒè™‘æ‰€æœ‰åŒ¹é…ã€‚
- en: '`/i` (`.ignoreCase`) switches on case-insensitive matching:'
  id: totrans-383
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`/i`ï¼ˆ`.ignoreCase`ï¼‰å¼€å¯ä¸åŒºåˆ†å¤§å°å†™åŒ¹é…ï¼š'
- en: '[PRE46]'
  id: totrans-384
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE46]'
- en: '`/m` (`.multiline`): If this flag is on, `^` matches the beginning of each
    line and `$` matches the end of each line. If it is off, `^` matches the beginning
    of the whole input string and `$` matches the end of the whole input string.'
  id: totrans-385
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`/m` (`.multiline`): å¦‚æœæ­¤æ ‡å¿—å¼€å¯ï¼Œ`^` åŒ¹é…æ¯ä¸€è¡Œçš„å¼€å§‹ï¼Œ`$` åŒ¹é…æ¯ä¸€è¡Œçš„ç»“æŸã€‚å¦‚æœå…³é—­ï¼Œ`^` åŒ¹é…æ•´ä¸ªè¾“å…¥å­—ç¬¦ä¸²çš„å¼€å§‹ï¼Œ`$`
    åŒ¹é…æ•´ä¸ªè¾“å…¥å­—ç¬¦ä¸²çš„ç»“æŸã€‚'
- en: '[PRE47]'
  id: totrans-386
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE47]'
- en: '`/s` (`.dotAll`): By default, the dot does not match line terminators. With
    this flag, it does:'
  id: totrans-387
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`/s` (`.dotAll`): é»˜è®¤æƒ…å†µä¸‹ï¼Œç‚¹ä¸åŒ¹é…è¡Œç»ˆæ­¢ç¬¦ã€‚ä½¿ç”¨æ­¤æ ‡å¿—æ—¶ï¼Œå®ƒä¼šåŒ¹é…ï¼š'
- en: '[PRE48]'
  id: totrans-388
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE48]'
- en: 'Workaround: If `/s` isnâ€™t supported, we can use `[^]` instead of a dot.'
  id: totrans-389
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: è§£å†³æ–¹æ¡ˆï¼šå¦‚æœ `/s` ä¸å—æ”¯æŒï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ `[^]` ä»£æ›¿ç‚¹ã€‚
- en: '[PRE49]'
  id: totrans-390
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE49]'
- en: 'Better support for Unicode (the â€œUnicode flagsâ€):'
  id: totrans-391
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'æ›´å¥½çš„ Unicode æ”¯æŒï¼ˆâ€œUnicode æ ‡å¿—â€ï¼‰ï¼š '
- en: '`/u` (`.unicode`): By default, the atomic units of matching are JavaScript
    characters (Unicode code units). This flag switches to Unicode code points as
    atomic units. It is explained in [â€œFlag `/u`: characters are code points ^(ES6)â€
    (Â§46.11.3)](#regexp-flag-unicode).'
  id: totrans-392
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`/u` (`.unicode`): é»˜è®¤æƒ…å†µä¸‹ï¼ŒåŒ¹é…çš„åŸå­å•ä½æ˜¯ JavaScript å­—ç¬¦ï¼ˆUnicode ä»£ç å•å…ƒï¼‰ã€‚æ­¤æ ‡å¿—å°†åŸå­å•ä½åˆ‡æ¢ä¸º Unicode
    ä»£ç ç‚¹ã€‚è¿™åœ¨[â€œæ ‡å¿— `/u`ï¼šå­—ç¬¦æ˜¯ä»£ç ç‚¹ï¼ˆES6ï¼‰â€ï¼ˆÂ§46.11.3ï¼‰](#regexp-flag-unicode)ä¸­æœ‰è§£é‡Šã€‚'
- en: '`/v` (`.unicodeSets`): This flag improves and replaces flag `/u`. It supports
    multi-code-point grapheme clusters and set operations in character classes. It
    is explained in [â€œFlag `/v`: limited support for multi-code-point grapheme clusters
    ^(ES2024)â€ (Â§46.11.4)](#regexp-flag-unicode-sets). **I recommend to use flag `/v`
    with all regular expressions** â€“ due to all the features it enables.'
  id: totrans-393
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`/v` (`.unicodeSets`): æ­¤æ ‡å¿—æ”¹è¿›å¹¶å–ä»£äº†æ ‡å¿— `/u`ã€‚å®ƒæ”¯æŒå­—ç¬¦ç±»ä¸­çš„å¤šä»£ç ç‚¹å›¾å½¢ç¾¤é›†å’Œé›†åˆè¿ç®—ã€‚è¿™åœ¨[â€œæ ‡å¿— `/v`ï¼šå¯¹å¤šä»£ç ç‚¹å›¾å½¢ç¾¤é›†çš„æœ‰é™æ”¯æŒï¼ˆES2024ï¼‰â€ï¼ˆÂ§46.11.4ï¼‰](#regexp-flag-unicode-sets)ä¸­æœ‰è§£é‡Šã€‚**æˆ‘å»ºè®®å¯¹æ‰€æœ‰æ­£åˆ™è¡¨è¾¾å¼ä½¿ç”¨æ ‡å¿—
    `/v`**â€”â€”å› ä¸ºå®ƒå¯ç”¨äº†æ‰€æœ‰è¿™äº›åŠŸèƒ½ã€‚'
- en: '`/y` (`.sticky`): This flag mainly makes sense in conjunction with `/g`. When
    both are switched on, any match must directly follow the previous one (that is,
    it must start at index `.lastIndex` of the regular expression object). Therefore,
    the first match must be at index 0.'
  id: totrans-394
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`/y` (`.sticky`): è¿™ä¸ªæ ‡å¿—ä¸»è¦ä¸ `/g` ç»“åˆä½¿ç”¨æ‰æœ‰æ„ä¹‰ã€‚å½“ä¸¤è€…éƒ½å¼€å¯æ—¶ï¼Œä»»ä½•åŒ¹é…å¿…é¡»ç›´æ¥è·Ÿåœ¨å…ˆå‰çš„åŒ¹é…ä¹‹åï¼ˆå³ï¼Œå®ƒå¿…é¡»ä»æ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡çš„
    `.lastIndex` ç´¢å¼•å¤„å¼€å§‹ï¼‰ã€‚å› æ­¤ï¼Œç¬¬ä¸€ä¸ªåŒ¹é…å¿…é¡»ä½äºç´¢å¼• 0ã€‚'
- en: '[PRE50]'
  id: totrans-395
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE50]'
- en: 'The main use case for `/y` is tokenization (during parsing). More information
    on this flag: [â€œThe flags `/g` and `/y`, and the property `.lastIndex` (advanced)â€
    (Â§46.16)](#regexp-flags-gy).'
  id: totrans-396
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`/y` çš„ä¸»è¦ç”¨ä¾‹æ˜¯æ ‡è®°åŒ–ï¼ˆåœ¨è§£æè¿‡ç¨‹ä¸­ï¼‰ã€‚æœ‰å…³æ­¤æ ‡å¿—çš„æ›´å¤šä¿¡æ¯ï¼š[â€œæ ‡å¿— `/g` å’Œ `/y`ï¼Œä»¥åŠå±æ€§ `.lastIndex`ï¼ˆé«˜çº§ï¼‰â€ï¼ˆÂ§46.16ï¼‰](#regexp-flags-gy)ã€‚'
- en: '[46.11.1â€ƒHow to order regular expression flags?](#order-of-regexp-flags)'
  id: totrans-397
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.11.1 å¦‚ä½•æ’åºæ­£åˆ™è¡¨è¾¾å¼æ ‡å¿—ï¼Ÿ](#order-of-regexp-flags)'
- en: 'Consider the following regular expression: `/â€œ([^â€]+)â€/vdg`'
  id: totrans-398
  prefs: []
  type: TYPE_NORMAL
  zh: è€ƒè™‘ä»¥ä¸‹æ­£åˆ™è¡¨è¾¾å¼ï¼š`/â€œ([^â€]+)â€/vdg`
- en: 'In which order should we list its flags? Two options are:'
  id: totrans-399
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨åˆ—å‡ºå…¶æ ‡å¿—çš„é¡ºåºä¸­ï¼Œæœ‰ä¸¤ç§é€‰æ‹©ï¼š
- en: 'Alphabetical order: `/dgv`'
  id: totrans-400
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å­—æ¯é¡ºåºï¼š`/dgv`
- en: 'In order of importance (arguably, `/v` is most fundamental etc.): `/vgd`'
  id: totrans-401
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: æŒ‰é‡è¦æ€§æ’åºï¼ˆå¯ä»¥è¯´ `/v` æ˜¯æœ€åŸºç¡€çš„ç­‰ï¼‰ï¼š`/vgd`
- en: 'Given that (2) is not obvious, (1) is the better choice. JavaScript also uses
    it for the RegExp property `.flags` :'
  id: totrans-402
  prefs: []
  type: TYPE_NORMAL
  zh: ç”±äºï¼ˆ2ï¼‰ä¸æ˜æ˜¾ï¼Œï¼ˆ1ï¼‰æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚JavaScript ä¹Ÿå°†å…¶ç”¨äº RegExp å±æ€§ `.flags`ï¼š
- en: '[PRE51]'
  id: totrans-403
  prefs: []
  type: TYPE_PRE
  zh: '[PRE51]'
- en: '[46.11.2â€ƒWithout the Unicode flags `/u` and `/v`: characters are UTF-16 code
    units](#without-the-unicode-flags-u-and-v-characters-are-utf16-code-units)'
  id: totrans-404
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.11.2 æ²¡æœ‰Unicodeæ ‡å¿— `/u` å’Œ `/v`ï¼šå­—ç¬¦æ˜¯UTF-16ä»£ç å•å…ƒ](#without-the-unicode-flags-u-and-v-characters-are-utf16-code-units)'
- en: 'Without the Unicode flags `/u` and `/v`, most constructs work with single UTF-16
    code units, which is problematic whenever a character has more than one code unit
    â€“ e.g. ğŸ™‚:'
  id: totrans-405
  prefs: []
  type: TYPE_NORMAL
  zh: æ²¡æœ‰Unicodeæ ‡å¿— `/u` å’Œ `/v` æ—¶ï¼Œå¤§å¤šæ•°ç»“æ„ä½¿ç”¨å•ä¸ª UTF-16 ä»£ç å•å…ƒï¼Œè¿™åœ¨å­—ç¬¦æœ‰å¤šä¸ªä»£ç å•å…ƒæ—¶ä¼šæœ‰é—®é¢˜â€”â€”ä¾‹å¦‚ :)ï¼š
- en: '[PRE52]'
  id: totrans-406
  prefs: []
  type: TYPE_PRE
  zh: '[PRE52]'
- en: 'Without Unicode flags, the largest character we can escape is a code unit,
    via a *code unit escape*. It consists of `\u` followed by four hexadecimal digits:'
  id: totrans-407
  prefs: []
  type: TYPE_NORMAL
  zh: æ²¡æœ‰Unicodeæ ‡å¿—æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ª*ä»£ç å•å…ƒè½¬ä¹‰*æ¥è½¬ä¹‰æœ€å¤§çš„å­—ç¬¦ï¼Œè¯¥è½¬ä¹‰ç”± `\u` åè·Ÿå››ä¸ªåå…­è¿›åˆ¶æ•°å­—ç»„æˆï¼š
- en: '[PRE53]'
  id: totrans-408
  prefs: []
  type: TYPE_PRE
  zh: '[PRE53]'
- en: 'The dot operator (`.`) matches code units, which is why we get two matches
    instead of one:'
  id: totrans-409
  prefs: []
  type: TYPE_NORMAL
  zh: ç‚¹æ“ä½œç¬¦ï¼ˆ`.`ï¼‰åŒ¹é…ä»£ç å•å…ƒï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬å¾—åˆ°ä¸¤ä¸ªåŒ¹é…è€Œä¸æ˜¯ä¸€ä¸ªï¼š
- en: '[PRE54]'
  id: totrans-410
  prefs: []
  type: TYPE_PRE
  zh: '[PRE54]'
- en: 'Quantifiers apply to code units and therefore only repeat the second half of
    ğŸ™‚:'
  id: totrans-411
  prefs: []
  type: TYPE_NORMAL
  zh: é‡è¯é€‚ç”¨äºä»£ç å•å…ƒï¼Œå› æ­¤åªä¼šé‡å¤ :) çš„ååŠéƒ¨åˆ†ï¼š
- en: '[PRE55]'
  id: totrans-412
  prefs: []
  type: TYPE_PRE
  zh: '[PRE55]'
- en: 'Character class escapes define sets of code units. Therefore, the class escape
    `\D` for â€œnot a decimal digitâ€ gets two matches:'
  id: totrans-413
  prefs: []
  type: TYPE_NORMAL
  zh: å­—ç¬¦ç±»è½¬ä¹‰å®šä¹‰äº†ä¸€ç»„ä»£ç å•å…ƒã€‚å› æ­¤ï¼Œè¡¨ç¤ºâ€œéåè¿›åˆ¶æ•°å­—â€çš„ç±»è½¬ä¹‰ `\D` ä¼šå¾—åˆ°ä¸¤ä¸ªåŒ¹é…ï¼š
- en: '[PRE56]'
  id: totrans-414
  prefs: []
  type: TYPE_PRE
  zh: '[PRE56]'
- en: 'Character classes define sets of code units. Therefore, putting ğŸ™‚ in a character
    class has unintuitive consequences:'
  id: totrans-415
  prefs: []
  type: TYPE_NORMAL
  zh: å­—ç¬¦ç±»å®šä¹‰äº†ä¸€ç»„ä»£ç å•å…ƒã€‚å› æ­¤ï¼Œå°† :) æ”¾å…¥å­—ç¬¦ç±»ä¼šæœ‰ä¸ç›´è§‚çš„ç»“æœï¼š
- en: '[PRE57]'
  id: totrans-416
  prefs: []
  type: TYPE_PRE
  zh: '[PRE57]'
- en: '[46.11.3â€ƒFlag `/u`: characters are code points ^(ES6)](#regexp-flag-unicode)'
  id: totrans-417
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.11.3 æ ‡å¿— `/u`ï¼šå­—ç¬¦æ˜¯ä»£ç ç‚¹ï¼ˆES6ï¼‰](#regexp-flag-unicode)'
- en: In the previous subsection, we encountered problems when we wanted to match
    a code point with more than one UTF-16 code unit â€“ such as ğŸ™‚. Flag `/u` enables
    support for code points and fixes those problems.
  id: totrans-418
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨å‰é¢çš„å­èŠ‚ä¸­ï¼Œå½“æˆ‘ä»¬æƒ³è¦åŒ¹é…å…·æœ‰å¤šä¸ª UTF-16 ä»£ç å•å…ƒçš„ä»£ç ç‚¹æ—¶ï¼Œæˆ‘ä»¬é‡åˆ°äº†é—®é¢˜ â€“ ä¾‹å¦‚ ğŸ™‚ã€‚æ ‡å¿— `/u` å¯ç”¨äº†å¯¹ä»£ç ç‚¹çš„æ”¯æŒå¹¶è§£å†³äº†è¿™äº›é—®é¢˜ã€‚
- en: 'We can escape code points via *code point escapes* â€“ `\u{}` with one to six
    hexadecimal digits:'
  id: totrans-419
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¯ä»¥é€šè¿‡ *ä»£ç ç‚¹è½¬ä¹‰* æ¥è½¬ä¹‰ä»£ç ç‚¹ â€“ `\u{}`ï¼Œå…¶ä¸­åŒ…å«ä¸€åˆ°å…­ä¸ªåå…­è¿›åˆ¶æ•°å­—ï¼š
- en: '[PRE58]'
  id: totrans-420
  prefs: []
  type: TYPE_PRE
  zh: '[PRE58]'
- en: 'The dot operator (`.`) matches code points:'
  id: totrans-421
  prefs: []
  type: TYPE_NORMAL
  zh: ç‚¹æ“ä½œç¬¦ (`.`) åŒ¹é…ä»£ç ç‚¹ï¼š
- en: '[PRE59]'
  id: totrans-422
  prefs: []
  type: TYPE_PRE
  zh: '[PRE59]'
- en: 'Quantifiers apply to code points:'
  id: totrans-423
  prefs: []
  type: TYPE_NORMAL
  zh: é‡è¯é€‚ç”¨äºä»£ç ç‚¹ï¼š
- en: '[PRE60]'
  id: totrans-424
  prefs: []
  type: TYPE_PRE
  zh: '[PRE60]'
- en: 'Character class escapes define sets of code points:'
  id: totrans-425
  prefs: []
  type: TYPE_NORMAL
  zh: å­—ç¬¦ç±»è½¬ä¹‰å®šä¹‰äº†ä¸€ç»„ä»£ç ç‚¹ï¼š
- en: '[PRE61]'
  id: totrans-426
  prefs: []
  type: TYPE_PRE
  zh: '[PRE61]'
- en: 'A new kind of character class escapes is supported â€“ [Unicode character property
    escapes](#unicode-character-property-escapes) specify sets of code points:'
  id: totrans-427
  prefs: []
  type: TYPE_NORMAL
  zh: æ”¯æŒä¸€ç§æ–°çš„å­—ç¬¦ç±»è½¬ä¹‰ â€“ [Unicode å­—ç¬¦å±æ€§è½¬ä¹‰](#unicode-character-property-escapes)æŒ‡å®šäº†ä¸€ç»„ä»£ç ç‚¹ï¼š
- en: '[PRE62]'
  id: totrans-428
  prefs: []
  type: TYPE_PRE
  zh: '[PRE62]'
- en: 'Character classes also define sets of code points:'
  id: totrans-429
  prefs: []
  type: TYPE_NORMAL
  zh: å­—ç¬¦ç±»ä¹Ÿå®šä¹‰äº†ä¸€ç»„ä»£ç ç‚¹ï¼š
- en: '[PRE63]'
  id: totrans-430
  prefs: []
  type: TYPE_PRE
  zh: '[PRE63]'
- en: '[46.11.4â€ƒFlag `/v`: limited support for multi-code-point grapheme clusters
    ^(ES2024)](#regexp-flag-unicode-sets)'
  id: totrans-431
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.11.4â€ƒæ ‡å¿— `/v`: å¯¹å¤šä»£ç ç‚¹å›¾å½¢ç°‡çš„æœ‰é™æ”¯æŒ^(ES2024)](#regexp-flag-unicode-sets)'
- en: '![Icon â€œtipâ€](../Images/8440b17bb8219cda9f9405ac83c36db0.png)â€‚**Use flag `/v`
    whenever you can**'
  id: totrans-432
  prefs: []
  type: TYPE_NORMAL
  zh: '![å›¾æ ‡â€œæç¤ºâ€](../Images/8440b17bb8219cda9f9405ac83c36db0.png)â€‚**å°½å¯èƒ½ä½¿ç”¨æ ‡å¿— `/v`**'
- en: This flag improves many aspects of JavaScriptâ€™s regular expressions and should
    be used by default. If a platform doesnâ€™t support it yet, you should at least
    use `/u`.
  id: totrans-433
  prefs: []
  type: TYPE_NORMAL
  zh: æ­¤æ ‡å¿—æ”¹è¿›äº† JavaScript æ­£åˆ™è¡¨è¾¾å¼çš„è®¸å¤šæ–¹é¢ï¼Œåº”é»˜è®¤ä½¿ç”¨ã€‚å¦‚æœå¹³å°å°šæœªæ”¯æŒï¼Œè‡³å°‘åº”ä½¿ç”¨ `/u`ã€‚
- en: Flag `/v` builds on the improvements brought by flag `/u` and fixes several
    of its shortcomings.
  id: totrans-434
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ ‡å¿— `/v` å»ºç«‹åœ¨æ ‡å¿— `/u` å¸¦æ¥çš„æ”¹è¿›ä¹‹ä¸Šï¼Œå¹¶ä¿®å¤äº†å…¶å‡ ä¸ªç¼ºç‚¹ã€‚
- en: 'Note that flag `/v` and flag `/u` are mutually exclusive â€“ we canâ€™t use both
    at the same time:'
  id: totrans-435
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ³¨æ„ï¼Œæ ‡å¿— `/v` å’Œæ ‡å¿— `/u` æ˜¯äº’æ–¥çš„ â€“ æˆ‘ä»¬ä¸èƒ½åŒæ—¶ä½¿ç”¨ä¸¤è€…ï¼š
- en: '[PRE64]'
  id: totrans-436
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE64]'
- en: '[46.11.4.1â€ƒLimitation of flag `/u`: handling grapheme clusters with more than
    one code point](#limitation-of-flag-u-handling-grapheme-clusters-with-more-than-one-code-point)'
  id: totrans-437
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '[46.11.4.1â€ƒæ ‡å¿— `/u` çš„é™åˆ¶ï¼šå¤„ç†åŒ…å«å¤šä¸ªä»£ç ç‚¹çš„å›¾å½¢ç°‡](#limitation-of-flag-u-handling-grapheme-clusters-with-more-than-one-code-point)'
- en: 'Some font glyphs are represented by *grapheme clusters* (code point sequences)
    with more than one code point â€“Â e.g. ğŸ˜µâ€ğŸ’«:'
  id: totrans-438
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€äº›å­—ä½“ç¬¦å·ç”±åŒ…å«å¤šä¸ªä»£ç ç‚¹çš„ *å›¾å½¢ç°‡*ï¼ˆä»£ç ç‚¹åºåˆ—ï¼‰è¡¨ç¤º â€“ ä¾‹å¦‚ ğŸ˜µâ€ğŸ’«ï¼š
- en: '[PRE65]'
  id: totrans-439
  prefs: []
  type: TYPE_PRE
  zh: '[PRE65]'
- en: 'Flag `/u` does not help us with those kinds of grapheme clusters:'
  id: totrans-440
  prefs: []
  type: TYPE_NORMAL
  zh: æ ‡å¿— `/u` å¹¶æ²¡æœ‰å¸®åŠ©æˆ‘ä»¬å¤„ç†é‚£äº›ç±»å‹çš„å›¾å½¢ç°‡ï¼š
- en: '[PRE66]'
  id: totrans-441
  prefs: []
  type: TYPE_PRE
  zh: '[PRE66]'
- en: '[46.11.4.2â€ƒFlag `/v`: Unicode string property escapes and character class string
    literals](#flag-v-unicode-string-property-escapes-and-character-class-string-literals)'
  id: totrans-442
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '[46.11.4.2â€ƒæ ‡å¿— `/v`: Unicode å­—ç¬¦ä¸²å±æ€§è½¬ä¹‰å’Œå­—ç¬¦ç±»å­—ç¬¦ä¸²å­—é¢é‡](#flag-v-unicode-string-property-escapes-and-character-class-string-literals)'
- en: 'Flag `/v` works like flag `/u` but provides better support for multi-code-point
    grapheme clusters. It doesnâ€™t switch from code points to grapheme clusters everywhere,
    but it does fix the last two issues we encountered in the previous subsection
    â€“ by adding support for multi-code-point grapheme clusters to:'
  id: totrans-443
  prefs: []
  type: TYPE_NORMAL
  zh: æ ‡å¿— `/v` ä¸æ ‡å¿— `/u` ç±»ä¼¼ï¼Œä½†æä¾›äº†å¯¹å¤šä»£ç ç‚¹å›¾å½¢ç°‡çš„æ›´å¥½æ”¯æŒã€‚å®ƒä¸ä¼šåœ¨æ‰€æœ‰åœ°æ–¹ä»ä»£ç ç‚¹åˆ‡æ¢åˆ°å›¾å½¢ç°‡ï¼Œä½†å®ƒç¡®å®é€šè¿‡æ·»åŠ å¯¹å¤šä»£ç ç‚¹å›¾å½¢ç°‡çš„æ”¯æŒæ¥ä¿®å¤äº†æˆ‘ä»¬ä¹‹å‰å­èŠ‚ä¸­é‡åˆ°çš„æœ€åä¸¤ä¸ªé—®é¢˜
    â€“ é€šè¿‡æ·»åŠ æ”¯æŒå¤šä»£ç ç‚¹å›¾å½¢ç°‡åˆ°ï¼š
- en: 'Character class escapes: We can refer to [Unicode string properties](#unicode-string-properties)
    via `\p{}`.'
  id: totrans-444
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å­—ç¬¦ç±»è½¬ä¹‰ï¼šæˆ‘ä»¬å¯ä»¥é€šè¿‡ `\p{}` æ¥å¼•ç”¨ [Unicode å­—ç¬¦ä¸²å±æ€§](#unicode-string-properties)ã€‚
- en: '[PRE67]'
  id: totrans-445
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE67]'
- en: 'Character classes: `\q{}` lets us define [code point sequences](#character-class-code-point-sequences).'
  id: totrans-446
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å­—ç¬¦ç±»ï¼š`\q{}` å…è®¸æˆ‘ä»¬å®šä¹‰ [ä»£ç ç‚¹åºåˆ—](#character-class-code-point-sequences)ã€‚
- en: '[PRE68]'
  id: totrans-447
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE68]'
- en: '[46.11.4.3â€ƒFlag `/v`: character class set operations](#flag-v-character-class-set-operations)'
  id: totrans-448
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '[46.11.4.3â€ƒæ ‡å¿— `/v`: å­—ç¬¦ç±»é›†åˆæ“ä½œ](#flag-v-character-class-set-operations)'
- en: Character classes can be nested and combined via the set operations subtraction
    and intersection â€“ see [â€œSet operations for character classes ^(ES2024)â€ (Â§46.6.2)](#regexp-character-class-set-operations).
  id: totrans-449
  prefs: []
  type: TYPE_NORMAL
  zh: å­—ç¬¦ç±»å¯ä»¥é€šè¿‡é›†åˆæ“ä½œå‡æ³•å’Œäº¤é›†è¿›è¡ŒåµŒå¥—å’Œç»„åˆ â€“ è¯·å‚é˜…[â€œå­—ç¬¦ç±»çš„é›†åˆæ“ä½œ^(ES2024)â€ (Â§46.6.2)](#regexp-character-class-set-operations)ã€‚
- en: '[46.11.4.4â€ƒFlag `/v`: improved case-insensitive matching](#flag-v-improved-caseinsensitive-matching)'
  id: totrans-450
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '[46.11.4.4â€ƒæ ‡å¿— `/v`: æ”¹è¿›çš„å¿½ç•¥å¤§å°å†™åŒ¹é…](#flag-v-improved-caseinsensitive-matching)'
- en: 'Flag `/u` has a quirk when it comes to case-insensitive matching: Using `\P{Â·Â·Â·}`
    produces different results than `[^\p{Â·Â·Â·}]`:'
  id: totrans-451
  prefs: []
  type: TYPE_NORMAL
  zh: æ ‡å¿— `/u` åœ¨è¿›è¡Œä¸åŒºåˆ†å¤§å°å†™çš„åŒ¹é…æ—¶æœ‰ä¸€ä¸ªæ€ªç™–ï¼šä½¿ç”¨ `\P{Â·Â·Â·}` äº§ç”Ÿä¸ `[^\p{Â·Â·Â·}]` ä¸åŒçš„ç»“æœï¼š
- en: '[PRE69]'
  id: totrans-452
  prefs: []
  type: TYPE_PRE
  zh: '[PRE69]'
- en: 'Observations:'
  id: totrans-453
  prefs: []
  type: TYPE_NORMAL
  zh: è§‚å¯Ÿï¼š
- en: Both ways of negating should produce the same results.
  id: totrans-454
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä¸¤ç§å¦å®šæ–¹å¼åº”äº§ç”Ÿç›¸åŒçš„ç»“æœã€‚
- en: Intuitively, if we add `/i` to a regular expression, it should match at least
    as many strings as before â€“ not fewer.
  id: totrans-455
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ç›´è§‚åœ°è®²ï¼Œå¦‚æœæˆ‘ä»¬å‘æ­£åˆ™è¡¨è¾¾å¼æ·»åŠ  `/i`ï¼Œå®ƒåº”è¯¥åŒ¹é…è‡³å°‘ä¸ä¹‹å‰ä¸€æ ·å¤šçš„å­—ç¬¦ä¸² â€“ è€Œä¸æ˜¯æ›´å°‘ã€‚
- en: 'Flag `/v` fixes that quirk:'
  id: totrans-456
  prefs: []
  type: TYPE_NORMAL
  zh: æ ‡å¿— `/v` ä¿®å¤äº†é‚£ä¸ªæ€ªç™–ï¼š
- en: '[PRE70]'
  id: totrans-457
  prefs: []
  type: TYPE_PRE
  zh: '[PRE70]'
- en: 'Further reading:'
  id: totrans-458
  prefs: []
  type: TYPE_NORMAL
  zh: è¿›ä¸€æ­¥é˜…è¯»ï¼š
- en: '[A 2ality blog post](https://2ality.com/2022/11/regexp-v-flag.html#improved-case-insensitive-matching)
    explains why `/u` causes this behavior.'
  id: totrans-459
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[2alityåšå®¢æ–‡ç« ](https://2ality.com/2022/11/regexp-v-flag.html#improved-case-insensitive-matching)è§£é‡Šäº†ä¸ºä»€ä¹ˆ`/u`å¯¼è‡´è¿™ç§è¡Œä¸ºã€‚'
- en: 'Source of this section: [GitHub issue â€œIgnoreCase vs. complement vs. nested
    classâ€](https://github.com/tc39/proposal-regexp-v-flag/issues/30)'
  id: totrans-460
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æœ¬èŠ‚æ¥æºï¼š[GitHubé—®é¢˜â€œIgnoreCase vs. complement vs. nested classâ€](https://github.com/tc39/proposal-regexp-v-flag/issues/30)
- en: '[46.12â€ƒPattern modifiers (inline flags) ^(ES2025)](#regexp-pattern-modifiers)'
  id: totrans-461
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[46.12â€ƒæ¨¡å¼ä¿®é¥°ç¬¦ï¼ˆå†…è”æ ‡å¿—ï¼‰^(ES2025)](#regexp-pattern-modifiers)'
- en: 'Pattern modifiers let us apply a flag to a part of a regular expression (vs.
    all of the regular expression) â€“ for example, in the following regular expression,
    the flag `i` is only applied to â€œHELLOâ€:'
  id: totrans-462
  prefs: []
  type: TYPE_NORMAL
  zh: æ¨¡å¼ä¿®é¥°ç¬¦å…è®¸æˆ‘ä»¬å°†æ ‡å¿—åº”ç”¨äºæ­£åˆ™è¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†ï¼ˆè€Œä¸æ˜¯æ•´ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼‰â€”â€”ä¾‹å¦‚ï¼Œåœ¨ä»¥ä¸‹æ­£åˆ™è¡¨è¾¾å¼ä¸­ï¼Œæ ‡å¿—`i`ä»…åº”ç”¨äºâ€œHELLOâ€ï¼š
- en: '[PRE71]'
  id: totrans-463
  prefs: []
  type: TYPE_PRE
  zh: '[PRE71]'
- en: '[46.12.1â€ƒThe syntax of pattern modifiers](#the-syntax-of-pattern-modifiers)'
  id: totrans-464
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.12.1â€ƒæ¨¡å¼ä¿®é¥°ç¬¦çš„è¯­æ³•](#the-syntax-of-pattern-modifiers)'
- en: 'This is what the syntax looks like:'
  id: totrans-465
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ˜¯è¯­æ³•çœ‹èµ·æ¥åƒä»€ä¹ˆï¼š
- en: '[PRE72]'
  id: totrans-466
  prefs: []
  type: TYPE_PRE
  zh: '[PRE72]'
- en: 'Notes:'
  id: totrans-467
  prefs: []
  type: TYPE_NORMAL
  zh: æ³¨æ„ï¼š
- en: A flag that follows the question mark (`?`) is activated.
  id: totrans-468
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: åè·Ÿé—®å·(`?`)çš„æ ‡å¿—è¢«æ¿€æ´»ã€‚
- en: A flag that follows the hyphen (`-`) is deactivated.
  id: totrans-469
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: åè·Ÿè¿å­—ç¬¦(`-`)çš„æ ‡å¿—è¢«å»æ¿€æ´»ã€‚
- en: A flag cannot appear in both the â€œactivation sectionâ€ and the â€œdeactivation
    sectionâ€.
  id: totrans-470
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ ‡å¿—ä¸èƒ½åŒæ—¶å‡ºç°åœ¨â€œæ¿€æ´»éƒ¨åˆ†â€å’Œâ€œå»æ¿€æ´»éƒ¨åˆ†â€ã€‚
- en: 'Without any flags, this syntax is simply a non-capturing group: `(?:pattern)`'
  id: totrans-471
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ²¡æœ‰ä»»ä½•æ ‡å¿—çš„æƒ…å†µä¸‹ï¼Œè¿™ä¸ªè¯­æ³•åªæ˜¯ä¸€ä¸ªéæ•è·ç»„ï¼š`(?:pattern)`
- en: 'Letâ€™s change the previous example: Now all of the regular expression is case-insensitive
    â€“ except for â€œHELLOâ€:'
  id: totrans-472
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬æ”¹å˜ä¹‹å‰çš„ä¾‹å­ï¼šç°åœ¨æ•´ä¸ªæ­£åˆ™è¡¨è¾¾å¼éƒ½æ˜¯ä¸åŒºåˆ†å¤§å°å†™çš„â€”â€”é™¤äº†â€œHELLOâ€ï¼š
- en: '[PRE73]'
  id: totrans-473
  prefs: []
  type: TYPE_PRE
  zh: '[PRE73]'
- en: '[46.12.2â€ƒWhich flags are supported?](#which-flags-are-supported)'
  id: totrans-474
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.12.2â€ƒæ”¯æŒå“ªäº›æ ‡å¿—ï¼Ÿ](#which-flags-are-supported)'
- en: 'The following flags can be used in pattern modifiers:'
  id: totrans-475
  prefs: []
  type: TYPE_NORMAL
  zh: ä»¥ä¸‹æ ‡å¿—å¯ä»¥åœ¨æ¨¡å¼ä¿®é¥°ç¬¦ä¸­ä½¿ç”¨ï¼š
- en: '| Literal flag | Property name | ES | Description |'
  id: totrans-476
  prefs: []
  type: TYPE_TB
  zh: '| æ–‡æœ¬æ ‡å¿— | å±æ€§åç§° | ES | æè¿° |'
- en: '| --- | --- | --- | --- |'
  id: totrans-477
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- | --- |'
- en: '| i | ignoreCase | ES3 | Match case-insensitively |'
  id: totrans-478
  prefs: []
  type: TYPE_TB
  zh: '| i | ignoreCase | ES3 | ä¸åŒºåˆ†å¤§å°å†™åŒ¹é… |'
- en: '| m | multiline | ES3 | `^` and `$` match per line |'
  id: totrans-479
  prefs: []
  type: TYPE_TB
  zh: '| m | multiline | ES3 | `^`å’Œ`$`æŒ‰è¡ŒåŒ¹é… |'
- en: '| s | dotAll | ES2018 | Dot matches line terminators |'
  id: totrans-480
  prefs: []
  type: TYPE_TB
  zh: '| s | dotAll | ES2018 | ç‚¹åŒ¹é…è¡Œç»ˆæ­¢ç¬¦ |'
- en: For more information, see [â€œRegular expression flagsâ€ (Â§46.11)](#regexp-flags).
  id: totrans-481
  prefs: []
  type: TYPE_NORMAL
  zh: æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…[â€œæ­£åˆ™è¡¨è¾¾å¼æ ‡å¿—â€ (Â§46.11)](#regexp-flags)ã€‚
- en: The remaining flags are not supported because they would either make regular
    expression semantics too complicated (e.g. flag `v`) or because they only make
    sense if applied to the whole regular expression (e.g. flag `g`).
  id: totrans-482
  prefs: []
  type: TYPE_NORMAL
  zh: å‰©ä½™çš„æ ‡å¿—ä¸å—æ”¯æŒï¼Œå› ä¸ºå®ƒä»¬è¦ä¹ˆä¼šä½¿æ­£åˆ™è¡¨è¾¾å¼è¯­ä¹‰è¿‡äºå¤æ‚ï¼ˆä¾‹å¦‚æ ‡å¿—`v`ï¼‰ï¼Œè¦ä¹ˆå› ä¸ºå®ƒä»¬åªæœ‰åœ¨åº”ç”¨äºæ•´ä¸ªæ­£åˆ™è¡¨è¾¾å¼æ—¶æ‰æœ‰æ„ä¹‰ï¼ˆä¾‹å¦‚æ ‡å¿—`g`ï¼‰ã€‚
- en: '[46.12.3â€ƒUse case: changing flags for part of a regular expression](#use-case-changing-flags-for-part-of-a-regular-expression)'
  id: totrans-483
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.12.3â€ƒç”¨ä¾‹ï¼šæ›´æ”¹æ­£åˆ™è¡¨è¾¾å¼éƒ¨åˆ†çš„æ ‡å¿—](#use-case-changing-flags-for-part-of-a-regular-expression)'
- en: 'Itâ€™s sometimes useful to change flags for part of a regular expression. For
    example, Ron Buckton [explains](https://github.com/tc39/proposal-regexp-modifiers/issues/1)
    that changing flag `m` helps with matching a Markdown frontmatter block at the
    start of a file (I slightly edited his version):'
  id: totrans-484
  prefs: []
  type: TYPE_NORMAL
  zh: æœ‰æ—¶æ›´æ”¹æ­£åˆ™è¡¨è¾¾å¼éƒ¨åˆ†çš„æ ‡å¿—æ˜¯æœ‰ç”¨çš„ã€‚ä¾‹å¦‚ï¼ŒRon Buckton [è§£é‡Š](https://github.com/tc39/proposal-regexp-modifiers/issues/1)è¯´æ›´æ”¹æ ‡å¿—`m`æœ‰åŠ©äºåŒ¹é…æ–‡ä»¶å¼€å¤´çš„Markdownå‰ç¼€å—ï¼ˆæˆ‘ç¨å¾®ç¼–è¾‘äº†ä»–çš„ç‰ˆæœ¬ï¼‰ï¼š
- en: '[PRE74]'
  id: totrans-485
  prefs: []
  type: TYPE_PRE
  zh: '[PRE74]'
- en: How does this regular expression work?
  id: totrans-486
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸ªæ­£åˆ™è¡¨è¾¾å¼æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ
- en: By default, flag `m` is on and the anchor `^` matches at the beginning of a
    line and the anchor `$` matches at the end of a line.
  id: totrans-487
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: é»˜è®¤æƒ…å†µä¸‹ï¼Œæ ‡å¿—`m`æ˜¯å¼€å¯çš„ï¼Œé”šç‚¹`^`åŒ¹é…è¡Œçš„å¼€å§‹ï¼Œé”šç‚¹`$`åŒ¹é…è¡Œçš„ç»“æŸã€‚
- en: 'The very first `^` is different: It must match at the beginning of a string.
    Thatâ€™s why we use a pattern modifier there and switch flag `m` off.'
  id: totrans-488
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: é¦–ä¸ª`^`æ˜¯ä¸åŒçš„ï¼šå®ƒå¿…é¡»åŒ¹é…å­—ç¬¦ä¸²çš„å¼€å§‹ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨é‚£é‡Œä½¿ç”¨æ¨¡å¼ä¿®é¥°ç¬¦å¹¶å…³é—­æ ‡å¿—`m`çš„åŸå› ã€‚
- en: 'This is the regular expression, formatted with insignificant whitespace and
    explanatory comments:'
  id: totrans-489
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ˜¯æ­£åˆ™è¡¨è¾¾å¼ï¼Œæ ¼å¼åŒ–åå¸¦æœ‰ä¸é‡è¦çš„ç©ºç™½å’Œè§£é‡Šæ€§æ³¨é‡Šï¼š
- en: '[PRE75]'
  id: totrans-490
  prefs: []
  type: TYPE_PRE
  zh: '[PRE75]'
- en: '[46.12.4â€ƒUse case: inlining flags](#use-case-inlining-flags)'
  id: totrans-491
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.12.4â€ƒç”¨ä¾‹ï¼šå†…è”æ ‡å¿—](#use-case-inlining-flags)'
- en: 'In some situations, flags being outside the actual regular expressions is inconvenient.
    Then pattern modifiers help. Examples include:'
  id: totrans-492
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ ‡å¿—ä½äºå®é™…æ­£åˆ™è¡¨è¾¾å¼ä¹‹å¤–æ˜¯ä¸æ–¹ä¾¿çš„ã€‚è¿™æ—¶æ¨¡å¼ä¿®é¥°ç¬¦å°±æ´¾ä¸Šç”¨åœºäº†ã€‚ä¾‹å¦‚åŒ…æ‹¬ï¼š
- en: Storing regular expressions in configuration files, e.g. in JSON format.
  id: totrans-493
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å°†æ­£åˆ™è¡¨è¾¾å¼å­˜å‚¨åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œä¾‹å¦‚JSONæ ¼å¼ã€‚
- en: '[The Regex+ library](https://github.com/slevithan/regex) provides a template
    literal that makes creating regular expressions much more convenient. The syntax
    for specifying flags adds a bit of clutter that can be avoided via pattern modifiers
    (if they support the required flags):'
  id: totrans-494
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[Regex+ åº“](https://github.com/slevithan/regex) æä¾›äº†ä¸€ä¸ªæ¨¡æ¿å­—é¢é‡ï¼Œä½¿å¾—åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼å˜å¾—æ›´åŠ æ–¹ä¾¿ã€‚æŒ‡å®šæ ‡å¿—çš„è¯­æ³•å¢åŠ äº†ä¸€äº›æ‚ä¹±ï¼Œå¯ä»¥é€šè¿‡æ¨¡å¼ä¿®é¥°ç¬¦ï¼ˆå¦‚æœå®ƒä»¬æ”¯æŒæ‰€éœ€çš„æ ‡å¿—ï¼‰æ¥é¿å…ï¼š'
- en: '[PRE76]'
  id: totrans-495
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE76]'
- en: '[46.12.5â€ƒUse case: regular expression fragments that change flags](#use-case-regular-expression-fragments-that-change-flags)'
  id: totrans-496
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.12.5 ä½¿ç”¨æ¡ˆä¾‹ï¼šæ”¹å˜æ ‡å¿—çš„æ­£åˆ™è¡¨è¾¾å¼ç‰‡æ®µ](#use-case-regular-expression-fragments-that-change-flags)'
- en: In complex applications, it helps if you can compose large regular expressions
    out of smaller regular expressions. The aforementioned Regex+ library supports
    that. If a smaller regular expression needs different flags (e.g. because it wants
    to ignore case) then it can â€“ thanks to pattern modifiers.
  id: totrans-497
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨å¤æ‚çš„åº”ç”¨ç¨‹åºä¸­ï¼Œå¦‚æœä½ èƒ½å¤Ÿå°†è¾ƒå¤§çš„æ­£åˆ™è¡¨è¾¾å¼ç”±è¾ƒå°çš„æ­£åˆ™è¡¨è¾¾å¼ç»„æˆï¼Œè¿™å°†å¾ˆæœ‰å¸®åŠ©ã€‚ä¸Šè¿° Regex+ åº“æ”¯æŒè¿™ä¸€ç‚¹ã€‚å¦‚æœè¾ƒå°çš„æ­£åˆ™è¡¨è¾¾å¼éœ€è¦ä¸åŒçš„æ ‡å¿—ï¼ˆä¾‹å¦‚ï¼Œå› ä¸ºå®ƒæƒ³è¦å¿½ç•¥å¤§å°å†™ï¼‰ï¼Œé‚£ä¹ˆå®ƒå¯ä»¥é€šè¿‡æ¨¡å¼ä¿®é¥°ç¬¦å®ç°ï¼ˆå¦‚æœå®ƒä»¬æ”¯æŒæ‰€éœ€çš„æ ‡å¿—ï¼‰ï¼š
- en: '[46.13â€ƒProperties of regular expression objects](#properties-of-regular-expression-objects)'
  id: totrans-498
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[46.13 æ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡çš„å±æ€§](#properties-of-regular-expression-objects)'
- en: 'Noteworthy:'
  id: totrans-499
  prefs: []
  type: TYPE_NORMAL
  zh: å€¼å¾—æ³¨æ„çš„æ˜¯ï¼š
- en: Strictly speaking, only `.lastIndex` is a real instance property. All other
    properties are implemented via getters.
  id: totrans-500
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä¸¥æ ¼æ¥è¯´ï¼Œåªæœ‰ `.lastIndex` æ˜¯ä¸€ä¸ªçœŸæ­£çš„å®ä¾‹å±æ€§ã€‚æ‰€æœ‰å…¶ä»–å±æ€§éƒ½æ˜¯é€šè¿‡getterå®ç°çš„ã€‚
- en: Accordingly, `.lastIndex` is the only mutable property. All other properties
    are read-only. If we want to change them, we need to copy the regular expression
    (see [â€œCloning and non-destructively modifying regular expressionsâ€ (Â§46.1.3)](#cloning-regexps)
    for details).
  id: totrans-501
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å› æ­¤ï¼Œ`.lastIndex` æ˜¯å”¯ä¸€çš„å¯å˜å±æ€§ã€‚æ‰€æœ‰å…¶ä»–å±æ€§éƒ½æ˜¯åªè¯»çš„ã€‚å¦‚æœæˆ‘ä»¬æƒ³æ”¹å˜å®ƒä»¬ï¼Œæˆ‘ä»¬éœ€è¦å¤åˆ¶æ­£åˆ™è¡¨è¾¾å¼ï¼ˆæœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…[â€œå…‹éš†å’Œä¸å¯ç ´ååœ°ä¿®æ”¹æ­£åˆ™è¡¨è¾¾å¼â€
    (Â§46.1.3)](#cloning-regexps)ï¼‰ã€‚
- en: '[46.13.1â€ƒFlags as properties](#flags-as-properties)'
  id: totrans-502
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.13.1 æ ‡å¿—ä½œä¸ºå±æ€§](#flags-as-properties)'
- en: 'Each regular expression flag exists as a property with a longer, more descriptive
    name:'
  id: totrans-503
  prefs: []
  type: TYPE_NORMAL
  zh: æ¯ä¸ªæ­£åˆ™è¡¨è¾¾å¼æ ‡å¿—éƒ½ä½œä¸ºä¸€ä¸ªå…·æœ‰æ›´é•¿ã€æ›´å…·æè¿°æ€§çš„å±æ€§å­˜åœ¨ï¼š
- en: '[PRE77]'
  id: totrans-504
  prefs: []
  type: TYPE_PRE
  zh: '[PRE77]'
- en: 'This is the complete list of flag properties:'
  id: totrans-505
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ˜¯æ ‡å¿—å±æ€§çš„å®Œæ•´åˆ—è¡¨ï¼š
- en: '`.dotAll` (`/s`)'
  id: totrans-506
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`.dotAll` (/s)'
- en: '`.global` (`/g`)'
  id: totrans-507
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`.global` (/g)'
- en: '`.hasIndices` (`/d`)'
  id: totrans-508
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`.hasIndices` (/d)'
- en: '`.ignoreCase` (`/i`)'
  id: totrans-509
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`.ignoreCase` (/i)'
- en: '`.multiline` (`/m`)'
  id: totrans-510
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`.multiline` (/m)'
- en: '`.sticky` (`/y`)'
  id: totrans-511
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`.sticky` (/y)'
- en: '`.unicode` (`/u`)'
  id: totrans-512
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`.unicode` (/u)'
- en: '`.unicodeSets` (`/v`)'
  id: totrans-513
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`.unicodeSets` (/v)'
- en: '[46.13.2â€ƒOther properties](#other-properties)'
  id: totrans-514
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.13.2 å…¶ä»–å±æ€§](#other-properties)'
- en: 'Each regular expression also has the following properties:'
  id: totrans-515
  prefs: []
  type: TYPE_NORMAL
  zh: æ¯ä¸ªæ­£åˆ™è¡¨è¾¾å¼è¿˜å…·æœ‰ä»¥ä¸‹å±æ€§ï¼š
- en: '`.source` ^(ES3): The regular expression pattern'
  id: totrans-516
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`.source` (ES3)ï¼šæ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼'
- en: '[PRE78]'
  id: totrans-517
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE78]'
- en: '`.flags` ^(ES6): The flags of the regular expression'
  id: totrans-518
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`.flags` (ES6)ï¼šæ­£åˆ™è¡¨è¾¾å¼çš„æ ‡å¿—'
- en: '[PRE79]'
  id: totrans-519
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE79]'
- en: '`.lastIndex` ^(ES3): Used when flag `/g` is switched on. See [â€œThe flags `/g`
    and `/y`, and the property `.lastIndex` (advanced)â€ (Â§46.16)](#regexp-flags-gy)
    for details.'
  id: totrans-520
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`.lastIndex` (ES3)ï¼šå½“æ ‡å¿— `/g` è¢«æ‰“å¼€æ—¶ä½¿ç”¨ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…[â€œæ ‡å¿— `/g` å’Œ `/y`ï¼Œä»¥åŠå±æ€§ `.lastIndex`ï¼ˆé«˜çº§ï¼‰â€
    (Â§46.16)](#regexp-flags-gy)ã€‚'
- en: '[46.14â€ƒMatch objects](#match-objects)'
  id: totrans-521
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[46.14 åŒ¹é…å¯¹è±¡](#match-objects)'
- en: 'Several regular expression-related methods return so-called *match objects*
    to provide detailed information for the locations where a regular expression matches
    an input string. These methods are:'
  id: totrans-522
  prefs: []
  type: TYPE_NORMAL
  zh: å‡ ä¸ªä¸æ­£åˆ™è¡¨è¾¾å¼ç›¸å…³çš„æ–¹æ³•è¿”å›æ‰€è°“çš„ *åŒ¹é…å¯¹è±¡*ï¼Œä»¥æä¾›æœ‰å…³æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…è¾“å…¥å­—ç¬¦ä¸²ä½ç½®çš„è¯¦ç»†ä¿¡æ¯ã€‚è¿™äº›æ–¹æ³•æ˜¯ï¼š
- en: '`RegExp.prototype.exec()` returns `null` or a single match object.'
  id: totrans-523
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`RegExp.prototype.exec()` è¿”å› `null` æˆ–ä¸€ä¸ªå•ç‹¬çš„åŒ¹é…å¯¹è±¡ã€‚'
- en: '`String.prototype.match()` returns `null` or a single match object (if flag
    `/g` is not set).'
  id: totrans-524
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`String.prototype.match()` è¿”å› `null` æˆ–ä¸€ä¸ªå•ç‹¬çš„åŒ¹é…å¯¹è±¡ï¼ˆå¦‚æœæœªè®¾ç½®æ ‡å¿— `/g`ï¼‰ã€‚'
- en: '`String.prototype.matchAll()` returns an iterable of match objects (flag `/g`
    must be set; otherwise, an exception is thrown).'
  id: totrans-525
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`String.prototype.matchAll()` è¿”å›ä¸€ä¸ªåŒ¹é…å¯¹è±¡çš„å¯è¿­ä»£å¯¹è±¡ï¼ˆå¿…é¡»è®¾ç½®æ ‡å¿— `/g`ï¼›å¦åˆ™ï¼Œä¼šæŠ›å‡ºå¼‚å¸¸ï¼‰ã€‚'
- en: 'This is an example:'
  id: totrans-526
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š
- en: '[PRE80]'
  id: totrans-527
  prefs: []
  type: TYPE_PRE
  zh: '[PRE80]'
- en: 'The result of `.exec()` is a *match object* for the first match with the following
    properties:'
  id: totrans-528
  prefs: []
  type: TYPE_NORMAL
  zh: '`.exec()` çš„ç»“æœæ˜¯ç¬¬ä¸€ä¸ªåŒ¹é…çš„ *åŒ¹é…å¯¹è±¡*ï¼Œå…·æœ‰ä»¥ä¸‹å±æ€§ï¼š'
- en: '`[0]`: the complete substring matched by the regular expression'
  id: totrans-529
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`[0]`ï¼šæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„å®Œæ•´å­ä¸²'
- en: '`[1]`: capture of numbered group 1 (etc.)'
  id: totrans-530
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`[1]`ï¼šç¼–å·ç»„1çš„æ•è·ï¼ˆç­‰ç­‰ï¼‰'
- en: '`.index`: where did the match occur?'
  id: totrans-531
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`.index`ï¼šåŒ¹é…å‘ç”Ÿçš„ä½ç½®åœ¨å“ªé‡Œï¼Ÿ'
- en: '`.input`: the string that was matched against'
  id: totrans-532
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`.input`ï¼šè¢«åŒ¹é…çš„å­—ç¬¦ä¸²'
- en: '`.groups`: captures of named groups (see [â€œNamed capture groups ^(ES2018)â€
    (Â§46.15.2.1)](#named-capture-groups))'
  id: totrans-533
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`.groups`ï¼šå‘½åç»„çš„æ•è·ï¼ˆè¯·å‚é˜…[â€œå‘½åæ•è·ç»„ (ES2018)â€ (Â§46.15.2.1)](#named-capture-groups))'
- en: '`.indices`: the index ranges of captured groups'
  id: totrans-534
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`.indices`ï¼šæ•è·ç»„çš„ç´¢å¼•èŒƒå›´'
- en: This property is only created if flag `/d` is switched on.
  id: totrans-535
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: å¦‚æœæ‰“å¼€äº†æ ‡å¿— `/d`ï¼Œåˆ™åˆ›å»ºæ­¤å±æ€§ã€‚
- en: '[46.14.1â€ƒMatch indices in match objects ^(ES2022)](#regexp-match-indices)'
  id: totrans-536
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.14.1â€ƒåŒ¹é…å¯¹è±¡ä¸­çš„åŒ¹é…ç´¢å¼• (ES2022)](#regexp-match-indices)'
- en: '*Match indices* are a feature of match objects: If we turn it on via the regular
    expression flag `/d` (property `.hasIndices`), they record the start and end indices
    of where groups were captured.'
  id: totrans-537
  prefs: []
  type: TYPE_NORMAL
  zh: '*åŒ¹é…ç´¢å¼•* æ˜¯åŒ¹é…å¯¹è±¡çš„ä¸€ä¸ªç‰¹æ€§ï¼šå¦‚æœæˆ‘ä»¬é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼æ ‡å¿— `/d`ï¼ˆå±æ€§ `.hasIndices`ï¼‰å°†å…¶æ‰“å¼€ï¼Œå®ƒä»¬å°†è®°å½•ç»„è¢«æ•è·çš„èµ·å§‹å’Œç»“æŸç´¢å¼•ã€‚'
- en: '[46.14.1.1â€ƒMatch indices for numbered groups](#match-indices-for-numbered-groups)'
  id: totrans-538
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '[46.14.1.1â€ƒç¼–å·ç»„çš„åŒ¹é…ç´¢å¼•](#match-indices-for-numbered-groups)'
- en: 'This is how we access the captures of numbered groups:'
  id: totrans-539
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ˜¯æˆ‘ä»¬å¦‚ä½•è®¿é—®ç¼–å·ç»„çš„æ•è·ï¼š
- en: '[PRE81]'
  id: totrans-540
  prefs: []
  type: TYPE_PRE
  zh: '[PRE81]'
- en: 'Due to the regular expression flag `/d`, `matchObj` also has a property `.indices`
    that records for each numbered group where it was captured in the input string:'
  id: totrans-541
  prefs: []
  type: TYPE_NORMAL
  zh: ç”±äºæ­£åˆ™è¡¨è¾¾å¼æ ‡å¿— `/d`ï¼Œ`matchObj` è¿˜æœ‰ä¸€ä¸ªå±æ€§ `.indices`ï¼Œå®ƒè®°å½•æ¯ä¸ªç¼–å·ç»„åœ¨è¾“å…¥å­—ç¬¦ä¸²ä¸­è¢«æ•è·çš„ä½ç½®ï¼š
- en: '[PRE82]'
  id: totrans-542
  prefs: []
  type: TYPE_PRE
  zh: '[PRE82]'
- en: '[46.14.1.2â€ƒMatch indices for named groups](#match-indices-for-named-groups)'
  id: totrans-543
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '[46.14.1.2â€ƒå‘½åç»„çš„åŒ¹é…ç´¢å¼•](#match-indices-for-named-groups)'
- en: 'The captures of named groups are accessed like this:'
  id: totrans-544
  prefs: []
  type: TYPE_NORMAL
  zh: å‘½åç»„çš„æ•è·å¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼è®¿é—®ï¼š
- en: '[PRE83]'
  id: totrans-545
  prefs: []
  type: TYPE_PRE
  zh: '[PRE83]'
- en: 'Their indices are stored in `matchObj.indices.groups`:'
  id: totrans-546
  prefs: []
  type: TYPE_NORMAL
  zh: å®ƒä»¬çš„ç´¢å¼•å­˜å‚¨åœ¨ `matchObj.indices.groups` ä¸­ï¼š
- en: '[PRE84]'
  id: totrans-547
  prefs: []
  type: TYPE_PRE
  zh: '[PRE84]'
- en: '[46.14.1.3â€ƒA more realistic example](#a-more-realistic-example)'
  id: totrans-548
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '[46.14.1.3â€ƒä¸€ä¸ªæ›´å®é™…çš„ä¾‹å­](#a-more-realistic-example)'
- en: 'One important use case for match indices are parsers that point to where exactly
    a syntactic error is located. The following code solves a related problem: It
    points to where quoted content starts and where it ends (see demonstration at
    the end).'
  id: totrans-549
  prefs: []
  type: TYPE_NORMAL
  zh: åŒ¹é…ç´¢å¼•çš„ä¸€ä¸ªé‡è¦ç”¨ä¾‹æ˜¯è§£æå™¨ï¼Œå®ƒæŒ‡å‘è¯­æ³•é”™è¯¯çš„ç¡®åˆ‡ä½ç½®ã€‚ä»¥ä¸‹ä»£ç è§£å†³äº†ç›¸å…³çš„é—®é¢˜ï¼šå®ƒæŒ‡å‘å¼•å·å†…å®¹çš„å¼€å§‹å’Œç»“æŸä½ç½®ï¼ˆè¯·å‚é˜…æœ«å°¾çš„æ¼”ç¤ºï¼‰ã€‚
- en: '[PRE85]'
  id: totrans-550
  prefs: []
  type: TYPE_PRE
  zh: '[PRE85]'
- en: '[46.15â€ƒMethods for working with regular expressions](#methods-for-working-with-regular-expressions)'
  id: totrans-551
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[46.15â€ƒä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼çš„æ–¹æ³•](#methods-for-working-with-regular-expressions)'
- en: '[46.15.1â€ƒBy default, regular expressions match anywhere in a string](#by-default-regular-expressions-match-anywhere-in-a-string)'
  id: totrans-552
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.15.1â€ƒé»˜è®¤æƒ…å†µä¸‹ï¼Œæ­£åˆ™è¡¨è¾¾å¼å¯ä»¥åœ¨å­—ç¬¦ä¸²çš„ä»»ä½•ä½ç½®è¿›è¡ŒåŒ¹é…](#by-default-regular-expressions-match-anywhere-in-a-string)'
- en: 'By default, regular expressions match anywhere in a string:'
  id: totrans-553
  prefs: []
  type: TYPE_NORMAL
  zh: é»˜è®¤æƒ…å†µä¸‹ï¼Œæ­£åˆ™è¡¨è¾¾å¼å¯ä»¥åœ¨å­—ç¬¦ä¸²çš„ä»»ä½•ä½ç½®è¿›è¡ŒåŒ¹é…ï¼š
- en: '[PRE86]'
  id: totrans-554
  prefs: []
  type: TYPE_PRE
  zh: '[PRE86]'
- en: 'We can change that by using assertions such as `^` (or by using the flag `/y`):'
  id: totrans-555
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨æ–­è¨€ï¼Œå¦‚ `^`ï¼ˆæˆ–è€…ä½¿ç”¨æ ‡å¿— `/y`ï¼‰æ¥æ”¹å˜è¿™ä¸€ç‚¹ï¼š
- en: '[PRE87]'
  id: totrans-556
  prefs: []
  type: TYPE_PRE
  zh: '[PRE87]'
- en: '[46.15.2â€ƒ`string.match(regExp)` without `/g`: getting a match object for the
    first match](#String.prototype.match)'
  id: totrans-557
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.15.2â€ƒæ²¡æœ‰ `/g` çš„ `string.match(regExp)`ï¼šè·å–ç¬¬ä¸€ä¸ªåŒ¹é…çš„åŒ¹é…å¯¹è±¡](#String.prototype.match)'
- en: 'Without the flag `/g`, `string.match(regExp)` returns [a match object](#match-objects)
    for the first match of `regExp` in `str`:'
  id: totrans-558
  prefs: []
  type: TYPE_NORMAL
  zh: æ²¡æœ‰æ ‡å¿— `/g`ï¼Œ`string.match(regExp)` è¿”å› `str` ä¸­ `regExp` çš„ç¬¬ä¸€ä¸ªåŒ¹é…çš„ [åŒ¹é…å¯¹è±¡](#match-objects)ï¼š
- en: '[PRE88]'
  id: totrans-559
  prefs: []
  type: TYPE_PRE
  zh: '[PRE88]'
- en: '[46.15.2.1â€ƒNamed capture groups ^(ES2018)](#named-capture-groups)'
  id: totrans-560
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '[46.15.2.1â€ƒå‘½åçš„æ•è·ç»„ (ES2018)](#named-capture-groups)'
- en: 'The previous example contained a single numbered group. The following example
    demonstrates named groups:'
  id: totrans-561
  prefs: []
  type: TYPE_NORMAL
  zh: ä¹‹å‰çš„ä¾‹å­åŒ…å«ä¸€ä¸ªç¼–å·ç»„ã€‚ä»¥ä¸‹ä¾‹å­æ¼”ç¤ºäº†å‘½åç»„ï¼š
- en: '[PRE89]'
  id: totrans-562
  prefs: []
  type: TYPE_PRE
  zh: '[PRE89]'
- en: 'In the result of `.match()`, we can see that a named group is also a numbered
    group â€“ its capture exists twice:'
  id: totrans-563
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ `.match()` çš„ç»“æœä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å‘½åç»„ä¹Ÿæ˜¯ä¸€ä¸ªç¼–å·ç»„â€”â€”å®ƒçš„æ•è·å­˜åœ¨ä¸¤æ¬¡ï¼š
- en: Once as a numbered capture (property `'1'`).
  id: totrans-564
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä¸€æ¬¡ä½œä¸ºç¼–å·æ•è·ï¼ˆå±æ€§ `'1'`ï¼‰ã€‚
- en: Once as a named capture (property `groups.as`).
  id: totrans-565
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä¸€æ¬¡ä½œä¸ºå‘½åæ•è·ï¼ˆå±æ€§ `groups.as`ï¼‰ã€‚
- en: '[46.15.2.2â€ƒDuplicate named capture groups ^(ES2025)](#duplicate-named-capture-groups)'
  id: totrans-566
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '[46.15.2.2â€ƒé‡å¤å‘½åçš„æ•è·ç»„ (ES2025)](#duplicate-named-capture-groups)'
- en: 'Since ECMAScript 2025, we can use the same group name twice â€“ as long as it
    appears in different alternatives:'
  id: totrans-567
  prefs: []
  type: TYPE_NORMAL
  zh: è‡ªä» ECMAScript 2025 ä»¥æ¥ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç›¸åŒçš„ç»„åä¸¤æ¬¡â€”â€”åªè¦å®ƒåœ¨ä¸åŒçš„å¤‡é€‰æ–¹æ¡ˆä¸­å‡ºç°ï¼š
- en: '[PRE90]'
  id: totrans-568
  prefs: []
  type: TYPE_PRE
  zh: '[PRE90]'
- en: 'The following is not allowed (group `xs` would match twice):'
  id: totrans-569
  prefs: []
  type: TYPE_NORMAL
  zh: ä»¥ä¸‹æ˜¯ä¸å…è®¸çš„ï¼ˆç»„ `xs` å°†ä¼šåŒ¹é…ä¸¤æ¬¡ï¼‰ï¼š
- en: '[PRE91]'
  id: totrans-570
  prefs: []
  type: TYPE_PRE
  zh: '[PRE91]'
- en: '[46.15.3â€ƒ`string.match(regExp)` with `/g`: getting all group 0 captures ^(ES3)](#stringmatchregexp-with-g-getting-all-group-0-captures-es3)'
  id: totrans-571
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.15.3â€ƒå¸¦æœ‰ `/g` çš„ `string.match(regExp)`ï¼šè·å–æ‰€æœ‰ç»„ 0 æ•è· (ES3)](#stringmatchregexp-with-g-getting-all-group-0-captures-es3)'
- en: 'With flag `/g`, `string.match(regExp)` returns all substrings of `str` that
    match `regExp`:'
  id: totrans-572
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨æ ‡å¿— `/g`ï¼Œ`string.match(regExp)` è¿”å› `str` ä¸­ä¸ `regExp` åŒ¹é…çš„æ‰€æœ‰å­å­—ç¬¦ä¸²ï¼š
- en: '[PRE92]'
  id: totrans-573
  prefs: []
  type: TYPE_PRE
  zh: '[PRE92]'
- en: 'If there is no match, `.match()` returns `null`:'
  id: totrans-574
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœæ²¡æœ‰åŒ¹é…ï¼Œ`.match()` è¿”å› `null`ï¼š
- en: '[PRE93]'
  id: totrans-575
  prefs: []
  type: TYPE_PRE
  zh: '[PRE93]'
- en: 'We can use [the nullish coalescing operator (`??`)](ch_undefined-null.html#nullish-coalescing-operator)
    to protect ourselves against `null`:'
  id: totrans-576
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ [ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦ (`??`)](ch_undefined-null.html#nullish-coalescing-operator)
    æ¥ä¿æŠ¤è‡ªå·±å…å— `null` çš„å½±å“ï¼š
- en: '[PRE94]'
  id: totrans-577
  prefs: []
  type: TYPE_PRE
  zh: '[PRE94]'
- en: 'We can also use [optional chaining (`?.`)](ch_objects.html#optional-chaining)
    and combine it with the nullish coalescing operator:'
  id: totrans-578
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ [å¯é€‰é“¾ (`?.`)](ch_objects.html#optional-chaining) å¹¶å°†å…¶ä¸ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦ç»“åˆï¼š
- en: '[PRE95]'
  id: totrans-579
  prefs: []
  type: TYPE_PRE
  zh: '[PRE95]'
- en: '[46.15.4â€ƒ`string.matchAll(regExp)`: getting an iterable over all match objects
    ^(ES2020)](#String.prototype.matchAll)'
  id: totrans-580
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.15.4â€ƒ`string.matchAll(regExp)`: è·å–æ‰€æœ‰åŒ¹é…å¯¹è±¡çš„è¿­ä»£å™¨ (ES2020)](#String.prototype.matchAll)'
- en: 'This is how `.matchAll()` is invoked:'
  id: totrans-581
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ˜¯è°ƒç”¨ `.matchAll()` çš„æ–¹å¼ï¼š
- en: '[PRE96]'
  id: totrans-582
  prefs: []
  type: TYPE_PRE
  zh: '[PRE96]'
- en: Given a string and a regular expression, `.matchAll()` returns an iterable over
    the match objects of all matches.
  id: totrans-583
  prefs: []
  type: TYPE_NORMAL
  zh: ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²å’Œä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œ`.matchAll()` è¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼Œéå†æ‰€æœ‰åŒ¹é…é¡¹çš„åŒ¹é…å¯¹è±¡ã€‚
- en: In the following example, we use [`Array.from()`](ch_arrays.html#Array.from)
    to convert iterables to Arrays so that we can compare them better.
  id: totrans-584
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ `Array.from()`ï¼ˆ[ch_arrays.html#Array.from](ch_arrays.html#Array.from)ï¼‰å°†å¯è¿­ä»£å¯¹è±¡è½¬æ¢ä¸ºæ•°ç»„ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥æ›´å¥½åœ°æ¯”è¾ƒå®ƒä»¬ã€‚
- en: '[PRE97]'
  id: totrans-585
  prefs: []
  type: TYPE_PRE
  zh: '[PRE97]'
- en: 'Flag `/g` must be set:'
  id: totrans-586
  prefs: []
  type: TYPE_NORMAL
  zh: å¿…é¡»è®¾ç½®æ ‡å¿— `/g`ï¼š
- en: '[PRE98]'
  id: totrans-587
  prefs: []
  type: TYPE_PRE
  zh: '[PRE98]'
- en: '`.matchAll()` isnâ€™t affected by `regExp.lastIndex` and doesnâ€™t change it.'
  id: totrans-588
  prefs: []
  type: TYPE_NORMAL
  zh: '`.matchAll()` ä¸å— `regExp.lastIndex` çš„å½±å“ï¼Œå¹¶ä¸”ä¸ä¼šæ”¹å˜å®ƒã€‚'
- en: '![Icon â€œexerciseâ€](../Images/4fc2ec98bb44cc1f4de7c6a46d9dd043.png)â€‚**Exercise:
    Extracting quoted text via `.matchAll()`**'
  id: totrans-589
  prefs: []
  type: TYPE_NORMAL
  zh: '![å›¾æ ‡â€œç»ƒä¹ â€](../Images/4fc2ec98bb44cc1f4de7c6a46d9dd043.png)â€‚**ç»ƒä¹ ï¼šé€šè¿‡ `.matchAll()`
    æå–å¼•å·æ–‡æœ¬**'
- en: '`exercises/regexps/extract_quoted_test.mjs`'
  id: totrans-590
  prefs: []
  type: TYPE_NORMAL
  zh: '`exercises/regexps/extract_quoted_test.mjs`'
- en: '[46.15.4.1â€ƒImplementing `.matchAll()`](#implementing-matchall)'
  id: totrans-591
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '[46.15.4.1â€ƒå®ç° `.matchAll()`](#implementing-matchall)'
- en: '`.matchAll()` could be implemented via `.exec()` as follows:'
  id: totrans-592
  prefs: []
  type: TYPE_NORMAL
  zh: '`.matchAll()` å¯ä»¥é€šè¿‡ `.exec()` å¦‚ä¸‹å®ç°ï¼š'
- en: '[PRE99]'
  id: totrans-593
  prefs: []
  type: TYPE_PRE
  zh: '[PRE99]'
- en: 'Making a local copy ensures two things:'
  id: totrans-594
  prefs: []
  type: TYPE_NORMAL
  zh: åˆ›å»ºå±€éƒ¨å‰¯æœ¬ç¡®ä¿ä¸¤ä»¶äº‹ï¼š
- en: '`regex.lastIndex` isnâ€™t changed.'
  id: totrans-595
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`regex.lastIndex` ä¸ä¼šæ”¹å˜ã€‚'
- en: '`localCopy.lastIndex` is zero.'
  id: totrans-596
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`localCopy.lastIndex` ä¸ºé›¶ã€‚'
- en: 'Using `matchAll()`:'
  id: totrans-597
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨ `matchAll()`ï¼š
- en: '[PRE100]'
  id: totrans-598
  prefs: []
  type: TYPE_PRE
  zh: '[PRE100]'
- en: 'Output:'
  id: totrans-599
  prefs: []
  type: TYPE_NORMAL
  zh: è¾“å‡ºï¼š
- en: '[PRE101]'
  id: totrans-600
  prefs: []
  type: TYPE_PRE
  zh: '[PRE101]'
- en: '[46.15.5â€ƒ`regExp.exec(str)`: capturing groups ^(ES3)](#RegExp.prototype.exec)'
  id: totrans-601
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.15.5â€ƒ`regExp.exec(str)`ï¼šæ•è·ç»„ï¼ˆES3ï¼‰](#RegExp.prototype.exec)'
- en: '[46.15.5.1â€ƒ`regExp.exec(str)` without `/g`: getting a match object for the
    first match](#regexpexecstr-without-g-getting-a-match-object-for-the-first-match)'
  id: totrans-602
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '[46.15.5.1â€ƒ`regExp.exec(str)` æ²¡æœ‰è®¾ç½® `/g`ï¼šè·å–ç¬¬ä¸€ä¸ªåŒ¹é…å¯¹è±¡çš„åŒ¹é…å¯¹è±¡](#regexpexecstr-without-g-getting-a-match-object-for-the-first-match)'
- en: Without flag `/g`, `regExp.exec()` works like `string.match()` â€“ it returns
    a single match object.
  id: totrans-603
  prefs: []
  type: TYPE_NORMAL
  zh: æ²¡æœ‰è®¾ç½®æ ‡å¿— `/g` æ—¶ï¼Œ`regExp.exec()` çš„è¡Œä¸ºç±»ä¼¼äº `string.match()` â€“ å®ƒè¿”å›ä¸€ä¸ªå•ç‹¬çš„åŒ¹é…å¯¹è±¡ã€‚
- en: '[46.15.5.2â€ƒ`regExp.exec(str)` with `/g`: looping over all matches](#regexpexecstr-with-g-looping-over-all-matches)'
  id: totrans-604
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '[46.15.5.2â€ƒ`regExp.exec(str)` è®¾ç½® `/g`ï¼šéå†æ‰€æœ‰åŒ¹é…é¡¹](#regexpexecstr-with-g-looping-over-all-matches)'
- en: '![Icon â€œtipâ€](../Images/8440b17bb8219cda9f9405ac83c36db0.png)â€‚**Better alternative
    for retrieving all matches: `string.matchAll(regExp)` ^(ES2020)**'
  id: totrans-605
  prefs: []
  type: TYPE_NORMAL
  zh: '![å›¾æ ‡â€œæç¤ºâ€](../Images/8440b17bb8219cda9f9405ac83c36db0.png)â€‚**æ£€ç´¢æ‰€æœ‰åŒ¹é…é¡¹çš„æ›´å¥½æ›¿ä»£æ–¹æ³•ï¼š`string.matchAll(regExp)`ï¼ˆES2020ï¼‰**'
- en: 'Since ECMAScript 2020, JavaScript has another method for retrieving all matches:
    [`string.matchAll(regExp)`](#String.prototype.matchAll). That method is easier
    and safer to use: It returns an iterable, is unaffected by `.lastIndex` and throws
    an exception if flag `/g` is missing.'
  id: totrans-606
  prefs: []
  type: TYPE_NORMAL
  zh: è‡ªä» ECMAScript 2020 ä»¥æ¥ï¼ŒJavaScript æœ‰å¦ä¸€ç§æ£€ç´¢æ‰€æœ‰åŒ¹é…é¡¹çš„æ–¹æ³•ï¼š`string.matchAll(regExp)`ï¼ˆ[String.prototype.matchAll](#String.prototype.matchAll)ï¼‰ã€‚è¯¥æ–¹æ³•æ›´å®¹æ˜“ä¸”æ›´å®‰å…¨ä½¿ç”¨ï¼šå®ƒè¿”å›ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œä¸å—
    `.lastIndex` çš„å½±å“ï¼Œå¦‚æœç¼ºå°‘æ ‡å¿— `/g`ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ã€‚
- en: If we want to retrieve all matches of a regular expression (not just the first
    one), we need to switch on the flag `/g`. Then we can call `.exec()` multiple
    times and get one match each time. After the last match, `.exec()` returns `null`.
  id: totrans-607
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœæˆ‘ä»¬æƒ³è¦æ£€ç´¢æ­£åˆ™è¡¨è¾¾å¼çš„æ‰€æœ‰åŒ¹é…é¡¹ï¼ˆè€Œä¸ä»…ä»…æ˜¯ç¬¬ä¸€ä¸ªï¼‰ï¼Œæˆ‘ä»¬éœ€è¦åˆ‡æ¢åˆ°æ ‡å¿— `/g`ã€‚ç„¶åæˆ‘ä»¬å¯ä»¥å¤šæ¬¡è°ƒç”¨ `.exec()` å¹¶æ¯æ¬¡è·å–ä¸€ä¸ªåŒ¹é…é¡¹ã€‚åœ¨æœ€åä¸€ä¸ªåŒ¹é…é¡¹ä¹‹åï¼Œ`.exec()`
    è¿”å› `null`ã€‚
- en: '[PRE102]'
  id: totrans-608
  prefs: []
  type: TYPE_PRE
  zh: '[PRE102]'
- en: 'Therefore, we can loop over all matches as follows:'
  id: totrans-609
  prefs: []
  type: TYPE_NORMAL
  zh: å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å¦‚ä¸‹å¾ªç¯éå†æ‰€æœ‰åŒ¹é…é¡¹ï¼š
- en: '[PRE103]'
  id: totrans-610
  prefs: []
  type: TYPE_PRE
  zh: '[PRE103]'
- en: 'Output:'
  id: totrans-611
  prefs: []
  type: TYPE_NORMAL
  zh: è¾“å‡ºï¼š
- en: '[PRE104]'
  id: totrans-612
  prefs: []
  type: TYPE_PRE
  zh: '[PRE104]'
- en: '[46.15.6â€ƒ`string.match()` vs. `string.matchAll()` vs. `regExp.exec()`](#match-vs-matchall-vs-exec)'
  id: totrans-613
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.15.6â€ƒ`string.match()` ä¸ `string.matchAll()` ä¸ `regExp.exec()`](#match-vs-matchall-vs-exec)'
- en: 'The following table summarizes the differences between three methods:'
  id: totrans-614
  prefs: []
  type: TYPE_NORMAL
  zh: ä»¥ä¸‹è¡¨æ ¼æ€»ç»“äº†ä¸‰ç§æ–¹æ³•ä¹‹é—´çš„å·®å¼‚ï¼š
- en: '|  | Without `/g` | With `/g` |'
  id: totrans-615
  prefs: []
  type: TYPE_TB
  zh: '|  | æ²¡æœ‰ `/g` | æœ‰ `/g` |'
- en: '| --- | --- | --- |'
  id: totrans-616
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| `string.match(regExp)` | First match object | Array of group 0 captures |'
  id: totrans-617
  prefs: []
  type: TYPE_TB
  zh: '| `string.match(regExp)` | ç¬¬ä¸€ä¸ªåŒ¹é…å¯¹è±¡ | ç»„ 0 æ•è·çš„æ•°ç»„ |'
- en: '| `string.matchAll(regExp)` | `TypeError` | Iterable over match objects |'
  id: totrans-618
  prefs: []
  type: TYPE_TB
  zh: '| `string.matchAll(regExp)` | `TypeError` | åŒ¹é…å¯¹è±¡çš„è¿­ä»£å™¨ |'
- en: '| `regExp.exec(string)` | First match object | Next match object or `null`
    |'
  id: totrans-619
  prefs: []
  type: TYPE_TB
  zh: '| `regExp.exec(string)` | ç¬¬ä¸€ä¸ªåŒ¹é…å¯¹è±¡ | ä¸‹ä¸€ä¸ªåŒ¹é…å¯¹è±¡æˆ– `null` |'
- en: '[46.15.7â€ƒReplacing with `string.replace()` and `string.replaceAll()`](#replace-replaceAll)'
  id: totrans-620
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.15.7â€ƒä½¿ç”¨ `string.replace()` å’Œ `string.replaceAll()` æ›¿æ¢](#replace-replaceAll)'
- en: 'Both replacing methods have two parameters:'
  id: totrans-621
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸¤ç§æ›¿æ¢æ–¹æ³•éƒ½æœ‰ä¸¤ä¸ªå‚æ•°ï¼š
- en: '`string.replace(searchValue, replacementValue)`'
  id: totrans-622
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`string.replace(searchValue, replacementValue)`'
- en: '`string.replaceAll(searchValue, replacementValue)`'
  id: totrans-623
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`string.replaceAll(searchValue, replacementValue)`'
- en: '`searchValue` can be:'
  id: totrans-624
  prefs: []
  type: TYPE_NORMAL
  zh: '`searchValue` å¯ä»¥æ˜¯ï¼š'
- en: A string
  id: totrans-625
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä¸€ä¸ªå­—ç¬¦ä¸²
- en: A regular expression
  id: totrans-626
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼
- en: '`replacementValue` can be:'
  id: totrans-627
  prefs: []
  type: TYPE_NORMAL
  zh: '`replacementValue` å¯ä»¥æ˜¯ï¼š'
- en: 'String: Replace matches with this string. The character `$` has special meaning
    and lets us insert captures of groups and more (details are explained later).'
  id: totrans-628
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å­—ç¬¦ä¸²ï¼šç”¨æ­¤å­—ç¬¦ä¸²æ›¿æ¢åŒ¹é…é¡¹ã€‚å­—ç¬¦ `$` æœ‰ç‰¹æ®Šå«ä¹‰ï¼Œå…è®¸æˆ‘ä»¬æ’å…¥ç»„çš„æ•è·ä»¥åŠæ›´å¤šï¼ˆè¯¦æƒ…å°†åœ¨åé¢è§£é‡Šï¼‰ã€‚
- en: 'Function: Compute strings that replace matches via this function.'
  id: totrans-629
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å‡½æ•°ï¼šé€šè¿‡æ­¤å‡½æ•°è®¡ç®—æ›¿æ¢åŒ¹é…é¡¹çš„å­—ç¬¦ä¸²ã€‚
- en: 'The two methods differ as follows:'
  id: totrans-630
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸¤ç§æ–¹æ³•å¦‚ä¸‹ä¸åŒï¼š
- en: '`.replace()` replaces the first occurrence of a string or a regular expression
    without `/g`.'
  id: totrans-631
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`.replace()` æ›¿æ¢å­—ç¬¦ä¸²æˆ–æ­£åˆ™è¡¨è¾¾å¼çš„ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹ï¼ˆæ²¡æœ‰ `/g`ï¼‰ã€‚'
- en: '`.replaceAll()` replaces all occurrences of a string or a regular expression
    with `/g`.'
  id: totrans-632
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`.replaceAll()` æ›¿æ¢å­—ç¬¦ä¸²æˆ–æ­£åˆ™è¡¨è¾¾å¼ï¼ˆå¸¦æœ‰ `/g`ï¼‰çš„æ‰€æœ‰å‡ºç°ã€‚'
- en: 'This table summarizes how that works:'
  id: totrans-633
  prefs: []
  type: TYPE_NORMAL
  zh: æ­¤è¡¨æ€»ç»“äº†å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼š
- en: '| Search for: â†’ | string | RegExp w/o `/g` | RegExp with `/g` |'
  id: totrans-634
  prefs: []
  type: TYPE_TB
  zh: '| æœç´¢ï¼šâ†’ | å­—ç¬¦ä¸² | æ²¡æœ‰å¸¦æœ‰ `/g` çš„æ­£åˆ™è¡¨è¾¾å¼ | å¸¦æœ‰ `/g` çš„æ­£åˆ™è¡¨è¾¾å¼ |'
- en: '| --- | --- | --- | --- |'
  id: totrans-635
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- | --- |'
- en: '| `.replace` | First occurrence | First occurrence | (All occurrences) |'
  id: totrans-636
  prefs: []
  type: TYPE_TB
  zh: '| `.replace` | ç¬¬ä¸€ä¸ªå‡ºç° | ç¬¬ä¸€ä¸ªå‡ºç° | ï¼ˆæ‰€æœ‰å‡ºç°ï¼‰|'
- en: '| `.replaceAll` | All occurrences | `TypeError` | All occurrences |'
  id: totrans-637
  prefs: []
  type: TYPE_TB
  zh: '| `.replaceAll` | æ‰€æœ‰å‡ºç° | `TypeError` | æ‰€æœ‰å‡ºç° |'
- en: The last column of `.replace()` is in parentheses because this method existed
    long before `.replaceAll()` and therefore supports functionality that should now
    be handled via the latter method. If we could change that, `.replace()` would
    throw a `TypeError` here.
  id: totrans-638
  prefs: []
  type: TYPE_NORMAL
  zh: '`.replace()` çš„æœ€åä¸€åˆ—åœ¨æ‹¬å·ä¸­ï¼Œå› ä¸ºæ­¤æ–¹æ³•åœ¨ `.replaceAll()` ä¹‹å‰å°±å·²ç»å­˜åœ¨ï¼Œå› æ­¤æ”¯æŒç°åœ¨åº”è¯¥é€šè¿‡åè€…å¤„ç†çš„åŠŸèƒ½ã€‚å¦‚æœæˆ‘ä»¬èƒ½æ”¹å˜è¿™ä¸€ç‚¹ï¼Œ`.replace()`
    åœ¨è¿™é‡Œå°†æŠ›å‡º `TypeError`ã€‚'
- en: We first explore how `.replace()` and `.replaceAll()` work individually when
    `replacementValue` is a simple string (without the character `$`). Then we examine
    how both are affected by more complicated replacement values.
  id: totrans-639
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬é¦–å…ˆæ¢è®¨å½“ `replacementValue` æ˜¯ä¸€ä¸ªç®€å•å­—ç¬¦ä¸²ï¼ˆæ²¡æœ‰ `$` å­—ç¬¦ï¼‰æ—¶ï¼Œ`.replace()` å’Œ `.replaceAll()`
    å¦‚ä½•å•ç‹¬å·¥ä½œã€‚ç„¶åæˆ‘ä»¬æ£€æŸ¥å®ƒä»¬å¦‚ä½•å—åˆ°æ›´å¤æ‚çš„æ›¿æ¢å€¼çš„å½±å“ã€‚
- en: '[46.15.7.1â€ƒ`string.replace(searchValue, replacementValue)` ^(ES3)](#String.prototype.replace)'
  id: totrans-640
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '[46.15.7.1â€ƒ`string.replace(searchValue, replacementValue)` (ES3)](#String.prototype.replace)'
- en: 'How `.replace()` operates is influenced by its first parameter `searchValue`:'
  id: totrans-641
  prefs: []
  type: TYPE_NORMAL
  zh: '`.replace()` çš„æ“ä½œæ–¹å¼å—å…¶ç¬¬ä¸€ä¸ªå‚æ•° `searchValue` çš„å½±å“ï¼š'
- en: 'Regular expression without `/g`: Replace first match of this regular expression.'
  id: totrans-642
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ²¡æœ‰å¸¦æœ‰ `/g` çš„æ­£åˆ™è¡¨è¾¾å¼ï¼šæ›¿æ¢æ­¤æ­£åˆ™è¡¨è¾¾å¼çš„ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹ã€‚
- en: '[PRE105]'
  id: totrans-643
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE105]'
- en: 'String: Replace first occurrence of this string (the string is interpreted
    verbatim, not as a regular expression).'
  id: totrans-644
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å­—ç¬¦ä¸²ï¼šæ›¿æ¢è¿™ä¸ªå­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå‡ºç°ï¼ˆå­—ç¬¦ä¸²æŒ‰å­—é¢æ„æ€è§£é‡Šï¼Œè€Œä¸æ˜¯ä½œä¸ºæ­£åˆ™è¡¨è¾¾å¼ï¼‰ã€‚
- en: '[PRE106]'
  id: totrans-645
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE106]'
- en: 'Regular expression with `/g`: Replace all matches of this regular expression.'
  id: totrans-646
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å¸¦æœ‰ `/g` çš„æ­£åˆ™è¡¨è¾¾å¼ï¼šæ›¿æ¢æ­¤æ­£åˆ™è¡¨è¾¾å¼çš„æ‰€æœ‰åŒ¹é…é¡¹ã€‚
- en: '[PRE107]'
  id: totrans-647
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE107]'
- en: 'Recommendation: If `.replaceAll()` is available, itâ€™s better to use that method
    in this case â€“ its purpose is to replace multiple occurrences.'
  id: totrans-648
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: æ¨èï¼šå¦‚æœå¯ç”¨ `.replaceAll()`ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹æœ€å¥½ä½¿ç”¨è¯¥æ–¹æ³•â€”â€”å…¶ç›®çš„æ˜¯æ›¿æ¢å¤šä¸ªå‡ºç°ã€‚
- en: 'If we want to replace every occurrence of a string, we have two options:'
  id: totrans-649
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœæˆ‘ä»¬æƒ³è¦æ›¿æ¢å­—ç¬¦ä¸²çš„æ¯ä¸ªå‡ºç°ï¼Œæˆ‘ä»¬æœ‰ä¸¤ç§é€‰æ‹©ï¼š
- en: We can use `.replaceAll()` (which was introduced in ES2021).
  id: totrans-650
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `.replaceAll()`ï¼ˆå®ƒæ˜¯åœ¨ ES2021 ä¸­å¼•å…¥çš„ï¼‰ã€‚
- en: Later in this chapter, we will encounter [the tool function `escapeForRegExp()`)
    which will help us convert a string into a regular expression that matches that
    string multiple times (e.g., `'*'` becomes `/\*/g`).
  id: totrans-651
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: åœ¨æœ¬ç« çš„åé¢éƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†é‡åˆ° [å·¥å…·å‡½æ•° `escapeForRegExp()`)ï¼Œå®ƒå°†å¸®åŠ©æˆ‘ä»¬å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºåŒ¹é…è¯¥å­—ç¬¦ä¸²å¤šæ¬¡çš„æ­£åˆ™è¡¨è¾¾å¼ï¼ˆä¾‹å¦‚ï¼Œ`'*'`
    å˜ä¸º `/\*/g`ï¼‰ã€‚
- en: '[46.15.7.2â€ƒ`string.replaceAll(searchValue, replacementValue)` ^(ES2021)](#String.prototype.replaceAll)'
  id: totrans-652
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '[46.15.7.2â€ƒ`string.replaceAll(searchValue, replacementValue)` (ES2021)](#String.prototype.replaceAll)'
- en: 'How `.replaceAll()` operates is influenced by its first parameter `searchValue`:'
  id: totrans-653
  prefs: []
  type: TYPE_NORMAL
  zh: '`.replaceAll()` çš„æ“ä½œæ–¹å¼å—å…¶ç¬¬ä¸€ä¸ªå‚æ•° `searchValue` çš„å½±å“ï¼š'
- en: 'Regular expression with `/g`: Replace all matches of this regular expression.'
  id: totrans-654
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å¸¦æœ‰ `/g` çš„æ­£åˆ™è¡¨è¾¾å¼ï¼šæ›¿æ¢æ­¤æ­£åˆ™è¡¨è¾¾å¼çš„æ‰€æœ‰åŒ¹é…é¡¹ã€‚
- en: '[PRE108]'
  id: totrans-655
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE108]'
- en: 'String: Replace all occurrences of this string (the string is interpreted verbatim,
    not as a regular expression).'
  id: totrans-656
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å­—ç¬¦ä¸²ï¼šæ›¿æ¢è¿™ä¸ªå­—ç¬¦ä¸²çš„æ‰€æœ‰å‡ºç°ï¼ˆå­—ç¬¦ä¸²æŒ‰å­—é¢æ„æ€è§£é‡Šï¼Œè€Œä¸æ˜¯ä½œä¸ºæ­£åˆ™è¡¨è¾¾å¼ï¼‰ã€‚
- en: '[PRE109]'
  id: totrans-657
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE109]'
- en: 'Regular expression without `/g`: A `TypeError` is thrown (because the purpose
    of `.replaceAll()` is to replace multiple occurrences).'
  id: totrans-658
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ²¡æœ‰å¸¦æœ‰ `/g` çš„æ­£åˆ™è¡¨è¾¾å¼ï¼šæŠ›å‡º `TypeError`ï¼ˆå› ä¸º `.replaceAll()` çš„ç›®çš„æ˜¯æ›¿æ¢å¤šä¸ªå‡ºç°ï¼‰ã€‚
- en: '[PRE110]'
  id: totrans-659
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE110]'
- en: '[46.15.7.3â€ƒThe parameter `replacementValue` of `.replace()` and `.replaceAll()`](#the-parameter-replacementvalue-of-replace-and-replaceall)'
  id: totrans-660
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '[46.15.7.3â€ƒ`.replace()` å’Œ `.replaceAll()` çš„å‚æ•° `replacementValue`](#the-parameter-replacementvalue-of-replace-and-replaceall)'
- en: 'So far, we have only used the parameter `replacementValue` with simple strings,
    but it can do more. If its value is:'
  id: totrans-661
  prefs: []
  type: TYPE_NORMAL
  zh: åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬åªä½¿ç”¨äº†ç®€å•å­—ç¬¦ä¸²çš„ `replacementValue` å‚æ•°ï¼Œä½†å®ƒå¯ä»¥åšæ›´å¤šã€‚å¦‚æœå…¶å€¼ä¸ºï¼š
- en: A string, then matches are replaced with this string. The character `$` has
    special meaning and lets us insert captures of groups and more (read on for details).
  id: totrans-662
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: A stringï¼Œç„¶ååŒ¹é…é¡¹è¢«æ›¿æ¢ä¸ºè¿™ä¸ªå­—ç¬¦ä¸²ã€‚å­—ç¬¦ `$` æœ‰ç‰¹æ®Šå«ä¹‰ï¼Œå…è®¸æˆ‘ä»¬æ’å…¥ç»„çš„æ•è·å’Œæ›´å¤šï¼ˆè¯¦æƒ…è¯·ç»§ç»­é˜…è¯»ï¼‰ã€‚
- en: A function, then matches are replaced by strings that are computed via this
    function.
  id: totrans-663
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ç„¶åï¼Œå‡½æ•°å°†åŒ¹é…é¡¹æ›¿æ¢ä¸ºé€šè¿‡æ­¤å‡½æ•°è®¡ç®—å¾—åˆ°çš„å­—ç¬¦ä¸²ã€‚
- en: '[46.15.7.4â€ƒ`replacementValue` is a string](#replacementvalue-is-a-string)'
  id: totrans-664
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '[46.15.7.4â€ƒ`replacementValue` æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²](#replacementvalue-is-a-string)'
- en: 'If the replacement value is a string, the dollar sign has special meaning â€“
    it inserts text matched by the regular expression:'
  id: totrans-665
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœæ›¿æ¢å€¼æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç¾å…ƒç¬¦å·æœ‰ç‰¹æ®Šå«ä¹‰ - å®ƒæ’å…¥ç”±æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„æ–‡æœ¬ï¼š
- en: '| Text | Result |'
  id: totrans-666
  prefs: []
  type: TYPE_TB
  zh: '| æ–‡æœ¬ | ç»“æœ |'
- en: '| --- | --- |'
  id: totrans-667
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| `$$` | single `$` |'
  id: totrans-668
  prefs: []
  type: TYPE_TB
  zh: '| `$$` | å•ä¸ª `$` |'
- en: '| `$&` | complete match |'
  id: totrans-669
  prefs: []
  type: TYPE_TB
  zh: '| `$&` | å®Œæ•´åŒ¹é… |'
- en: '| `` $` `` | text before match |'
  id: totrans-670
  prefs: []
  type: TYPE_TB
  zh: '| `` $` `` | åŒ¹é…å‰çš„æ–‡æœ¬ |'
- en: '| `$''` | text after match |'
  id: totrans-671
  prefs: []
  type: TYPE_TB
  zh: '| `$''` | åŒ¹é…åçš„æ–‡æœ¬ |'
- en: '| `$n` | capture of numbered group `n` (`n` > 0) |'
  id: totrans-672
  prefs: []
  type: TYPE_TB
  zh: '| `$n` | ç¼–å·ç»„ `n` çš„æ•è· (`n` > 0) |'
- en: '| `$<name>` | capture of named group `name` (ES2018) |'
  id: totrans-673
  prefs: []
  type: TYPE_TB
  zh: '| `$<name>` | å‘½åç»„ `name` çš„æ•è·ï¼ˆES2018ï¼‰|'
- en: 'Example: Inserting the text before, inside, and after the matched substring.'
  id: totrans-674
  prefs: []
  type: TYPE_NORMAL
  zh: ç¤ºä¾‹ï¼šæ’å…¥åŒ¹é…å­å­—ç¬¦ä¸²ä¹‹å‰ã€ä¹‹å†…å’Œä¹‹åçš„æ–‡æœ¬ã€‚
- en: '[PRE111]'
  id: totrans-675
  prefs: []
  type: TYPE_PRE
  zh: '[PRE111]'
- en: 'Example: Inserting the captures of numbered groups.'
  id: totrans-676
  prefs: []
  type: TYPE_NORMAL
  zh: ç¤ºä¾‹ï¼šæ’å…¥ç¼–å·ç»„çš„æ•è·ã€‚
- en: '[PRE112]'
  id: totrans-677
  prefs: []
  type: TYPE_PRE
  zh: '[PRE112]'
- en: 'Example: Inserting the captures of named groups.'
  id: totrans-678
  prefs: []
  type: TYPE_NORMAL
  zh: ç¤ºä¾‹ï¼šæ’å…¥å‘½åç»„çš„æ•è·ã€‚
- en: '[PRE113]'
  id: totrans-679
  prefs: []
  type: TYPE_PRE
  zh: '[PRE113]'
- en: '![Icon â€œexerciseâ€](../Images/4fc2ec98bb44cc1f4de7c6a46d9dd043.png)â€‚**Exercise:
    Change quotes via `.replace()` and a named group**'
  id: totrans-680
  prefs: []
  type: TYPE_NORMAL
  zh: '![â€œç»ƒä¹ â€å›¾æ ‡](../Images/4fc2ec98bb44cc1f4de7c6a46d9dd043.png)â€‚**ç»ƒä¹ ï¼šé€šè¿‡ `.replace()`
    å’Œå‘½åç»„æ›´æ”¹å¼•å·**'
- en: '`exercises/regexps/change_quotes_test.mjs`'
  id: totrans-681
  prefs: []
  type: TYPE_NORMAL
  zh: '`exercises/regexps/change_quotes_test.mjs`'
- en: '[46.15.7.5â€ƒ`replacementValue` is a function](#replacementvalue-is-a-function)'
  id: totrans-682
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '[46.15.7.5â€ƒ`replacementValue` æ˜¯ä¸€ä¸ªå‡½æ•°](#replacementvalue-is-a-function)'
- en: If the replacement value is a function, we can compute each replacement. In
    the following example, we multiply each non-negative integer that we find by two.
  id: totrans-683
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœæ›¿æ¢å€¼æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥è®¡ç®—æ¯ä¸ªæ›¿æ¢ã€‚åœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†æ‰¾åˆ°çš„æ¯ä¸ªéè´Ÿæ•´æ•°ä¹˜ä»¥äºŒã€‚
- en: '[PRE114]'
  id: totrans-684
  prefs: []
  type: TYPE_PRE
  zh: '[PRE114]'
- en: 'The replacement function gets the following parameters. Note how similar they
    are to match objects. These parameters are all positional, but Iâ€™ve included how
    one might name them:'
  id: totrans-685
  prefs: []
  type: TYPE_NORMAL
  zh: æ›¿æ¢å‡½æ•°è·å–ä»¥ä¸‹å‚æ•°ã€‚æ³¨æ„å®ƒä»¬ä¸åŒ¹é…å¯¹è±¡å¤šä¹ˆç›¸ä¼¼ã€‚è¿™äº›å‚æ•°éƒ½æ˜¯ä½ç½®å‚æ•°ï¼Œä½†æˆ‘å·²ç»åŒ…æ‹¬äº†å¦‚ä½•å‘½åå®ƒä»¬ï¼š
- en: '`all`: complete match'
  id: totrans-686
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`all`: å®Œæ•´åŒ¹é…'
- en: '`g1`: capture of numbered group 1'
  id: totrans-687
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`g1`: ç¬¬ 1 ä¸ªç¼–å·ç»„çš„æ•è·'
- en: Etc.
  id: totrans-688
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ç­‰ç­‰ã€‚
- en: '`index`: where did the match occur?'
  id: totrans-689
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`index`: åŒ¹é…å‘ç”Ÿåœ¨å“ªé‡Œï¼Ÿ'
- en: '`input`: the string in which we are replacing'
  id: totrans-690
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`input`: æˆ‘ä»¬è¦æ›¿æ¢çš„å­—ç¬¦ä¸²'
- en: '`groups` ^(ES2018): captures of named groups (an object). Always the last parameter.'
  id: totrans-691
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`groups` (ES2018): å‘½åç»„çš„æ•è·ï¼ˆä¸€ä¸ªå¯¹è±¡ï¼‰ã€‚æ€»æ˜¯æœ€åä¸€ä¸ªå‚æ•°ã€‚'
- en: 'If we are only interested in `groups`, we can use the following technique:'
  id: totrans-692
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœæˆ‘ä»¬åªå¯¹ `groups` æ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æŠ€æœ¯ï¼š
- en: '[PRE115]'
  id: totrans-693
  prefs: []
  type: TYPE_PRE
  zh: '[PRE115]'
- en: Due to the [rest parameter](ch_callables.html#rest-parameters) in line A, `args`
    contains an Array with all parameters. We access the last parameter via [the Array
    method `.at()`](ch_arrays.html#Array.prototype.at) in line B.
  id: totrans-694
  prefs: []
  type: TYPE_NORMAL
  zh: ç”±äºè¡Œ A ä¸­çš„ [å‰©ä½™å‚æ•°](ch_callables.html#rest-parameters)ï¼Œ`args` åŒ…å«ä¸€ä¸ªåŒ…å«æ‰€æœ‰å‚æ•°çš„æ•°ç»„ã€‚æˆ‘ä»¬åœ¨è¡Œ
    B ä¸­é€šè¿‡ [æ•°ç»„æ–¹æ³• `.at()`](ch_arrays.html#Array.prototype.at) è®¿é—®æœ€åä¸€ä¸ªå‚æ•°ã€‚
- en: '[46.15.8â€ƒ`regExp.test(str)`: is there a match? ^(ES3)](#RegExp.prototype.test)'
  id: totrans-695
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.15.8â€ƒ`regExp.test(str)`: æ˜¯å¦æœ‰åŒ¹é…? (ES3)](#RegExp.prototype.test)'
- en: 'The regular expression method `regExp.test(str)` returns `true` if `regExp`
    matches `str`:'
  id: totrans-696
  prefs: []
  type: TYPE_NORMAL
  zh: æ­£åˆ™è¡¨è¾¾å¼æ–¹æ³• `regExp.test(str)` å¦‚æœ `regExp` åŒ¹é… `str` åˆ™è¿”å› `true`ï¼š
- en: '[PRE116]'
  id: totrans-697
  prefs: []
  type: TYPE_PRE
  zh: '[PRE116]'
- en: 'With `.test()` we should normally avoid the `/g` flag. If we use it, we generally
    donâ€™t get the same result every time we call the method:'
  id: totrans-698
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨ `.test()` æˆ‘ä»¬é€šå¸¸åº”è¯¥é¿å…ä½¿ç”¨ `/g` æ ‡å¿—ã€‚å¦‚æœæˆ‘ä»¬ä½¿ç”¨å®ƒï¼Œæˆ‘ä»¬é€šå¸¸æ¯æ¬¡è°ƒç”¨è¯¥æ–¹æ³•æ—¶éƒ½ä¸ä¼šå¾—åˆ°ç›¸åŒçš„ç»“æœï¼š
- en: '[PRE117]'
  id: totrans-699
  prefs: []
  type: TYPE_PRE
  zh: '[PRE117]'
- en: The results are due to `/a/` having two matches in the string. After all of
    those were found, `.test()` returns `false`. For more information, see [â€œThe flags
    `/g` and `/y`, and the property `.lastIndex` (advanced)â€ (Â§46.16)](#regexp-flags-gy).
  id: totrans-700
  prefs: []
  type: TYPE_NORMAL
  zh: ç»“æœæ˜¯ç”±äºå­—ç¬¦ä¸²ä¸­å­˜åœ¨ä¸¤ä¸ª `/a/` åŒ¹é…ã€‚åœ¨æ‰¾åˆ°æ‰€æœ‰è¿™äº›åŒ¹é…ä¹‹åï¼Œ`.test()` è¿”å› `false`ã€‚æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…[â€œ`/g` å’Œ `/y`
    æ ‡å¿—ï¼Œä»¥åŠ `.lastIndex` å±æ€§ï¼ˆé«˜çº§ï¼‰â€ (Â§46.16)](#regexp-flags-gy)ã€‚
- en: '[46.15.9â€ƒ`string.search(regExp)`: at what index is the match? ^(ES3)](#String.prototype.search)'
  id: totrans-701
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.15.9â€ƒ`string.search(regExp)`: åŒ¹é…å‘ç”Ÿåœ¨ä»€ä¹ˆç´¢å¼•? (ES3)](#String.prototype.search)'
- en: 'The string method `.search()` returns the first index of `str` at which there
    is a match for `regExp`:'
  id: totrans-702
  prefs: []
  type: TYPE_NORMAL
  zh: å­—ç¬¦ä¸²æ–¹æ³• `.search()` è¿”å› `regExp` åœ¨ `str` ä¸­åŒ¹é…çš„ç¬¬ä¸€ä¸ªç´¢å¼•ï¼š
- en: '[PRE118]'
  id: totrans-703
  prefs: []
  type: TYPE_PRE
  zh: '[PRE118]'
- en: '[46.15.10â€ƒ`string.split(separator, limit?)`: splitting strings ^(ES3)](#String.prototype.split)'
  id: totrans-704
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.15.10â€ƒ`string.split(separator, limit?)`: åˆ†å‰²å­—ç¬¦ä¸² (ES3)](#String.prototype.split)'
- en: Splits the string into an Array of substrings â€“ the strings that occur between
    the separators.
  id: totrans-705
  prefs: []
  type: TYPE_NORMAL
  zh: å°†å­—ç¬¦ä¸²åˆ†å‰²æˆç”±åˆ†éš”ç¬¦åˆ†éš”çš„å­å­—ç¬¦ä¸²æ•°ç»„ã€‚
- en: 'The separator can be a string:'
  id: totrans-706
  prefs: []
  type: TYPE_NORMAL
  zh: åˆ†éš”ç¬¦å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼š
- en: '[PRE119]'
  id: totrans-707
  prefs: []
  type: TYPE_PRE
  zh: '[PRE119]'
- en: 'It can also be a regular expression:'
  id: totrans-708
  prefs: []
  type: TYPE_NORMAL
  zh: å®ƒä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼š
- en: '[PRE120]'
  id: totrans-709
  prefs: []
  type: TYPE_PRE
  zh: '[PRE120]'
- en: The last invocation demonstrates that captures made by groups in the regular
    expression become elements of the returned Array.
  id: totrans-710
  prefs: []
  type: TYPE_NORMAL
  zh: æœ€åä¸€æ¬¡è°ƒç”¨æ¼”ç¤ºäº†æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„ç»„æ‰€åšçš„æ•è·æˆä¸ºè¿”å›æ•°ç»„çš„å…ƒç´ ã€‚
- en: 'If we want the separators to be part of the returned string fragments, we can
    use a regular expression with a [lookbehind assertion](#regexp-lookbehind-assertions)
    or a [lookahead assertion](#regexp-lookahead-assertions):'
  id: totrans-711
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœæˆ‘ä»¬å¸Œæœ›åˆ†éš”ç¬¦æˆä¸ºè¿”å›çš„å­—ç¬¦ä¸²ç‰‡æ®µçš„ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¸¦æœ‰[åè§†æ–­è¨€](#regexp-lookbehind-assertions)æˆ–[å‰ç»æ–­è¨€](#regexp-lookahead-assertions)çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚
- en: '[PRE121]'
  id: totrans-712
  prefs: []
  type: TYPE_PRE
  zh: '[PRE121]'
- en: Thanks to the lookaround assertions, the regular expression used for splitting
    leaves the colons in the fragments and only removes the spaces following or preceding
    the colons.
  id: totrans-713
  prefs: []
  type: TYPE_NORMAL
  zh: å¤šäºäº†å‰ç»æ–­è¨€ï¼Œç”¨äºåˆ†å‰²çš„æ­£åˆ™è¡¨è¾¾å¼å°†å†’å·ç•™åœ¨ç‰‡æ®µä¸­ï¼Œå¹¶ä¸”åªç§»é™¤å†’å·å‰åæˆ–å…¶é—´çš„ç©ºæ ¼ã€‚
- en: '**Pitfall:** `.split('''')` splits into JavaScript characters, but we usually
    want to split into grapheme clusters or at least Unicode code points. Therefore,
    itâ€™s better to use `Intl.Segmenter` or `Array.from()` for splitting. For more
    information, see [â€œAtoms of text: code points, JavaScript characters, grapheme
    clustersâ€ (Â§22.7)](ch_strings.html#atoms-of-text).'
  id: totrans-714
  prefs: []
  type: TYPE_NORMAL
  zh: '**é™·é˜±**ï¼š`.split('''')` ä¼šæŒ‰ JavaScript å­—ç¬¦åˆ†å‰²ï¼Œä½†é€šå¸¸æˆ‘ä»¬å¸Œæœ›æŒ‰å›¾å½¢ç°‡æˆ–è‡³å°‘ Unicode ä»£ç ç‚¹åˆ†å‰²ã€‚å› æ­¤ï¼Œæœ€å¥½ä½¿ç”¨
    `Intl.Segmenter` æˆ– `Array.from()` è¿›è¡Œåˆ†å‰²ã€‚æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…[â€œæ–‡æœ¬çš„åŸå­ï¼šä»£ç ç‚¹ã€JavaScript å­—ç¬¦ã€å›¾å½¢ç°‡â€ï¼ˆÂ§22.7ï¼‰](ch_strings.html#atoms-of-text)ã€‚'
- en: '[46.16â€ƒThe flags `/g` and `/y`, and the property `.lastIndex` (advanced)](#regexp-flags-gy)'
  id: totrans-715
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[46.16 æ­£åˆ™è¡¨è¾¾å¼æ ‡å¿— `/g` å’Œ `/y`ï¼Œä»¥åŠå±æ€§ `.lastIndex`ï¼ˆé«˜çº§ï¼‰](#regexp-flags-gy)'
- en: In this section, we examine how the RegExp flags `/g` and `/y` work and how
    they depend on the RegExp property `.lastIndex`. Weâ€™ll also discover an interesting
    use case for `.lastIndex` that you may find surprising.
  id: totrans-716
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†æ¢è®¨æ­£åˆ™è¡¨è¾¾å¼æ ‡å¿— `/g` å’Œ `/y` çš„å·¥ä½œæ–¹å¼ä»¥åŠå®ƒä»¬å¦‚ä½•ä¾èµ–äºæ­£åˆ™è¡¨è¾¾å¼å±æ€§ `.lastIndex`ã€‚æˆ‘ä»¬è¿˜å°†å‘ç°ä¸€ä¸ªå…³äº
    `.lastIndex` çš„æœ‰è¶£ç”¨ä¾‹ï¼Œä½ å¯èƒ½è§‰å¾—å®ƒä»¤äººæƒŠè®¶ã€‚
- en: '[46.16.1â€ƒThe flags `/g` and `/y`](#the-flags-g-and-y)'
  id: totrans-717
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.16.1 æ­£åˆ™è¡¨è¾¾å¼æ ‡å¿— `/g` å’Œ `/y`](#the-flags-g-and-y)'
- en: 'Every method reacts differently to `/g` and `/y`; this gives us a rough general
    idea:'
  id: totrans-718
  prefs: []
  type: TYPE_NORMAL
  zh: æ¯ä¸ªæ–¹æ³•å¯¹ `/g` å’Œ `/y` çš„ååº”éƒ½ä¸åŒï¼›è¿™ç»™æˆ‘ä»¬ä¸€ä¸ªå¤§è‡´çš„ä¸€èˆ¬æ¦‚å¿µï¼š
- en: '`/g` (`.global`, ES3): The regular expression should match multiple times,
    anywhere in a string.'
  id: totrans-719
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`/g`ï¼ˆ`.global`ï¼ŒES3ï¼‰ï¼šæ­£åˆ™è¡¨è¾¾å¼åº”è¯¥å¤šæ¬¡åŒ¹é…ï¼Œåœ¨å­—ç¬¦ä¸²çš„ä»»ä½•ä½ç½®ã€‚'
- en: '`/y` (`.sticky`, ES6): Any match inside a string should immediately follow
    a previous match (the matches â€œstickâ€Â together).'
  id: totrans-720
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`/y`ï¼ˆ`.sticky`ï¼ŒES6ï¼‰ï¼šå­—ç¬¦ä¸²å†…çš„ä»»ä½•åŒ¹é…åº”ç«‹å³è·Ÿåœ¨å…ˆå‰çš„åŒ¹é…ä¹‹åï¼ˆåŒ¹é…â€œç²˜â€åœ¨ä¸€èµ·ï¼‰ã€‚'
- en: If a regular expression has neither the flag `/g` nor the flag `/y`, matching
    happens once and starts at the beginning.
  id: totrans-721
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœæ­£åˆ™è¡¨è¾¾å¼æ—¢æ²¡æœ‰ `/g` æ ‡å¿—ä¹Ÿæ²¡æœ‰ `/y` æ ‡å¿—ï¼ŒåŒ¹é…åªä¼šå‘ç”Ÿä¸€æ¬¡ï¼Œå¹¶ä»å¼€å§‹å¤„å¼€å§‹ã€‚
- en: With either `/g` or `/y`, matching is performed relative to a â€œcurrent positionâ€
    inside the input string. That position is stored in the regular expression property
    `.lastIndex`.
  id: totrans-722
  prefs: []
  type: TYPE_NORMAL
  zh: æ— è®ºä½¿ç”¨ `/g` è¿˜æ˜¯ `/y`ï¼ŒåŒ¹é…éƒ½æ˜¯ç›¸å¯¹äºè¾“å…¥å­—ç¬¦ä¸²å†…éƒ¨çš„â€œå½“å‰ä½ç½®â€è¿›è¡Œçš„ã€‚è¯¥ä½ç½®å­˜å‚¨åœ¨æ­£åˆ™è¡¨è¾¾å¼å±æ€§ `.lastIndex` ä¸­ã€‚
- en: 'There are three groups of regular-expression-related methods:'
  id: totrans-723
  prefs: []
  type: TYPE_NORMAL
  zh: æœ‰ä¸‰ç»„ä¸æ­£åˆ™è¡¨è¾¾å¼ç›¸å…³çš„æ–¹æ³•ï¼š
- en: The string methods `.search(regExp)` and `.split(regExp)` completely ignore
    `/g` and `/y` (and therefore also `.lastIndex`).
  id: totrans-724
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å­—ç¬¦ä¸²æ–¹æ³• `.search(regExp)` å’Œ `.split(regExp)` å®Œå…¨å¿½ç•¥ `/g` å’Œ `/y`ï¼ˆä»¥åŠå› æ­¤çš„ `.lastIndex`ï¼‰ã€‚
- en: The `RegExp` methods `.exec(str)` and `.test(str)` change in two ways if either
    `/g` or `/y` is set.
  id: totrans-725
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å½“è®¾ç½®äº† `/g` æˆ– `/y` æ—¶ï¼Œ`RegExp` æ–¹æ³• `.exec(str)` å’Œ `.test(str)` ä¼šå‘ç”Ÿå˜åŒ–ã€‚
- en: First, we get multiple matches, by calling one method repeatedly. Each time,
    it returns either another result (a match object or `true`) or an â€œend of resultsâ€
    value (`null` or `false`).
  id: totrans-726
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: é¦–å…ˆï¼Œæˆ‘ä»¬é€šè¿‡é‡å¤è°ƒç”¨ä¸€ä¸ªæ–¹æ³•æ¥è·å–å¤šä¸ªåŒ¹é…ï¼Œæ¯æ¬¡è°ƒç”¨ï¼Œå®ƒè¿”å›å¦ä¸€ä¸ªç»“æœï¼ˆä¸€ä¸ªåŒ¹é…å¯¹è±¡æˆ– `true`ï¼‰æˆ–â€œç»“æœç»“æŸâ€å€¼ï¼ˆ`null` æˆ– `false`ï¼‰ã€‚
- en: 'Second, the regular expression property `.lastIndex` is used to step through
    the input string. On one hand, `.lastIndex` determines where matching starts:'
  id: totrans-727
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: ç¬¬äºŒï¼Œæ­£åˆ™è¡¨è¾¾å¼å±æ€§ `.lastIndex` ç”¨äºéå†è¾“å…¥å­—ç¬¦ä¸²ã€‚ä¸€æ–¹é¢ï¼Œ`.lastIndex` å†³å®šäº†åŒ¹é…çš„èµ·å§‹ä½ç½®ï¼š
- en: '`/g` means that a match must begin at `.lastIndex` or later.'
  id: totrans-728
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`/g` è¡¨ç¤ºåŒ¹é…å¿…é¡»ä» `.lastIndex` æˆ–ä¹‹åå¼€å§‹ã€‚'
- en: '`/y` means that a match must begin at `.lastIndex`. That is, the beginning
    of the regular expression is anchored to `.lastIndex`.'
  id: totrans-729
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`/y` è¡¨ç¤ºåŒ¹é…å¿…é¡»ä» `.lastIndex` å¼€å§‹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ­£åˆ™è¡¨è¾¾å¼çš„å¼€å§‹è¢«é”šå®šåˆ° `.lastIndex`ã€‚'
- en: 'Note that `^` and `$` continue to work as usually: They anchor matches to the
    beginning or end of the input string, unless `.multiline` is set. Then they anchor
    to the beginnings or ends of lines.'
  id: totrans-730
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: æ³¨æ„ï¼Œ`^` å’Œ `$` ä»ç„¶åƒå¾€å¸¸ä¸€æ ·å·¥ä½œï¼šå®ƒä»¬å°†åŒ¹é…é”šå®šåˆ°è¾“å…¥å­—ç¬¦ä¸²çš„å¼€å§‹æˆ–ç»“æŸï¼Œé™¤éè®¾ç½®äº† `.multiline`ã€‚ç„¶åå®ƒä»¬é”šå®šåˆ°è¡Œé¦–æˆ–è¡Œå°¾ã€‚
- en: On the other hand, `.lastIndex` is set to one plus the last index of the previous
    match.
  id: totrans-731
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: å¦ä¸€æ–¹é¢ï¼Œ`.lastIndex` è¢«è®¾ç½®ä¸ºä¸Šä¸€ä¸ªåŒ¹é…çš„æœ€åç´¢å¼•åŠ ä¸€ã€‚
- en: 'The remaining methods are:'
  id: totrans-732
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å‰©ä½™çš„æ–¹æ³•åŒ…æ‹¬ï¼š
- en: The string methods `.match(regExp)` and `.matchAll(regExp)` (throws without
    `/g`)
  id: totrans-733
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: å­—ç¬¦ä¸²æ–¹æ³• `.match(regExp)` å’Œ `.matchAll(regExp)`ï¼ˆä¸ä½¿ç”¨ `/g`ï¼‰
- en: The string methods `.replace(regExp, str)` and `.replaceAll(regExp, str)` (throws
    without `/g`)
  id: totrans-734
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: å­—ç¬¦ä¸²æ–¹æ³• `.replace(regExp, str)` å’Œ `.replaceAll(regExp, str)`ï¼ˆå¦‚æœæ²¡æœ‰ `/g` åˆ™æŠ›å‡ºå¼‚å¸¸ï¼‰
- en: 'These are all affected as follows:'
  id: totrans-735
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: è¿™äº›æ–¹æ³•éƒ½å—åˆ°å½±å“å¦‚ä¸‹ï¼š
- en: '`/g` leads to multiple matches.'
  id: totrans-736
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`/g` å¯¼è‡´å¤šä¸ªåŒ¹é…é¡¹ã€‚'
- en: '`/y` leads to a single match that must start at `.lastIndex`.'
  id: totrans-737
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`/y` å¯¼è‡´ä¸€ä¸ªå¿…é¡»ä» `.lastIndex` å¼€å§‹çš„å•ä¸ªåŒ¹é…é¡¹ã€‚'
- en: '`/gy` leads to multiple matches without gaps.'
  id: totrans-738
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`/gy` å¯¼è‡´æ²¡æœ‰é—´éš”çš„å¤šä¸ªåŒ¹é…é¡¹ã€‚'
- en: This was a first overview. The next sections get into more details.
  id: totrans-739
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™åªæ˜¯ä¸€ä¸ªåˆæ­¥æ¦‚è¿°ã€‚æ¥ä¸‹æ¥çš„ç« èŠ‚å°†æ›´æ·±å…¥åœ°æ¢è®¨ã€‚
- en: '[46.16.2â€ƒHow exactly are methods affected by `/g` and `/y`?](#how-exactly-are-methods-affected-by-g-and-y)'
  id: totrans-740
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.16.2â€ƒ/g å’Œ /y å¦‚ä½•å…·ä½“å½±å“æ–¹æ³•ï¼Ÿ](#how-exactly-are-methods-affected-by-g-and-y)'
- en: 'The following methods are unaffected by `/g` and `/y`:'
  id: totrans-741
  prefs: []
  type: TYPE_NORMAL
  zh: ä»¥ä¸‹æ–¹æ³•ä¸å— `/g` å’Œ `/y` çš„å½±å“ï¼š
- en: '`string.search(regExp)`'
  id: totrans-742
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`string.search(regExp)`'
- en: '`string.split(regExp)`'
  id: totrans-743
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`string.split(regExp)`'
- en: '[46.16.2.1â€ƒ`string.match(regExp)` ^(ES3)](#stringmatchregexp-es3)'
  id: totrans-744
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '[46.16.2.1â€ƒ`string.match(regExp)` (ES3)](#stringmatchregexp-es3)'
- en: Without `/g` and `/y`, `.match()` ignores `.lastIndex` and always returns a
    match object for the first match.
  id: totrans-745
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æ²¡æœ‰ `/g` å’Œ `/y` çš„æƒ…å†µä¸‹ï¼Œ`.match()` ä¼šå¿½ç•¥ `.lastIndex` å¹¶å§‹ç»ˆè¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹çš„åŒ¹é…å¯¹è±¡ã€‚
- en: '[PRE122]'
  id: totrans-746
  prefs: []
  type: TYPE_PRE
  zh: '[PRE122]'
- en: With `/y`, the match must start at exactly `.lastIndex`. `.lastIndex` is updated.
    If there is no match, `null` is returned.
  id: totrans-747
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨ `/y` æ—¶ï¼ŒåŒ¹é…å¿…é¡»æ­£å¥½ä» `.lastIndex` å¼€å§‹ã€‚`.lastIndex` å°†è¢«æ›´æ–°ã€‚å¦‚æœæ²¡æœ‰åŒ¹é…é¡¹ï¼Œåˆ™è¿”å› `null`ã€‚
- en: '[PRE123]'
  id: totrans-748
  prefs: []
  type: TYPE_PRE
  zh: '[PRE123]'
- en: With `/g`, we get all matches (group 0) in an Array. `.lastIndex` is ignored
    and reset to zero.
  id: totrans-749
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨ `/g` æ—¶ï¼Œæˆ‘ä»¬å¾—åˆ°ä¸€ä¸ªæ•°ç»„ä¸­çš„æ‰€æœ‰åŒ¹é…é¡¹ï¼ˆç»„ 0ï¼‰ã€‚`.lastIndex` è¢«å¿½ç•¥å¹¶é‡ç½®ä¸ºé›¶ã€‚
- en: '[PRE124]'
  id: totrans-750
  prefs: []
  type: TYPE_PRE
  zh: '[PRE124]'
- en: '`/gy` works similarly to `/g`, but no gaps between matches are allowed:'
  id: totrans-751
  prefs: []
  type: TYPE_NORMAL
  zh: '`/gy` çš„è¡Œä¸ºä¸ `/g` ç±»ä¼¼ï¼Œä½†åŒ¹é…é¡¹ä¹‹é—´ä¸å…è®¸æœ‰é—´éš”ï¼š'
- en: '[PRE125]'
  id: totrans-752
  prefs: []
  type: TYPE_PRE
  zh: '[PRE125]'
- en: '[46.16.2.2â€ƒ`string.matchAll(regExp)` ^(ES2020)](#stringmatchallregexp-es2020)'
  id: totrans-753
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '[46.16.2.2â€ƒ`string.matchAll(regExp)` (ES2020)](#stringmatchallregexp-es2020)'
- en: 'If `/g` is not set, `.matchAll()` throws an exception:'
  id: totrans-754
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœæ²¡æœ‰è®¾ç½® `/g`ï¼Œ`.matchAll()` ä¼šæŠ›å‡ºå¼‚å¸¸ï¼š
- en: '[PRE126]'
  id: totrans-755
  prefs: []
  type: TYPE_PRE
  zh: '[PRE126]'
- en: 'If `/g` is set, matching starts at `.lastIndex` and that property isnâ€™t changed:'
  id: totrans-756
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœè®¾ç½®äº† `/g`ï¼ŒåŒ¹é…å°†ä» `.lastIndex` å¼€å§‹ï¼Œå¹¶ä¸”è¯¥å±æ€§ä¸ä¼šæ”¹å˜ï¼š
- en: '[PRE127]'
  id: totrans-757
  prefs: []
  type: TYPE_PRE
  zh: '[PRE127]'
- en: '`/gy` works similarly to `/g`, but no gaps between matches are allowed:'
  id: totrans-758
  prefs: []
  type: TYPE_NORMAL
  zh: '`/gy` çš„è¡Œä¸ºä¸ `/g` ç±»ä¼¼ï¼Œä½†åŒ¹é…é¡¹ä¹‹é—´ä¸å…è®¸æœ‰é—´éš”ï¼š'
- en: '[PRE128]'
  id: totrans-759
  prefs: []
  type: TYPE_PRE
  zh: '[PRE128]'
- en: '[46.16.2.3â€ƒ`regExp.exec(str)` ^(ES3)](#regexpexecstr-es3)'
  id: totrans-760
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '[46.16.2.3â€ƒ`regExp.exec(str)` (ES3)](#regexpexecstr-es3)'
- en: 'Without `/g` and `/y`, `.exec()` ignores `.lastIndex` and always returns a
    match object for the first match:'
  id: totrans-761
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æ²¡æœ‰ `/g` å’Œ `/y` çš„æƒ…å†µä¸‹ï¼Œ`.exec()` ä¼šå¿½ç•¥ `.lastIndex` å¹¶å§‹ç»ˆè¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹çš„åŒ¹é…å¯¹è±¡ï¼š
- en: '[PRE129]'
  id: totrans-762
  prefs: []
  type: TYPE_PRE
  zh: '[PRE129]'
- en: With `/g`, the match must start at `.lastIndex` or later. `.lastIndex` is updated.
    If there is no match, `null` is returned.
  id: totrans-763
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨ `/g` æ—¶ï¼ŒåŒ¹é…å¿…é¡»ä» `.lastIndex` æˆ–ä¹‹åå¼€å§‹ã€‚`.lastIndex` å°†è¢«æ›´æ–°ã€‚å¦‚æœæ²¡æœ‰åŒ¹é…é¡¹ï¼Œåˆ™è¿”å› `null`ã€‚
- en: '[PRE130]'
  id: totrans-764
  prefs: []
  type: TYPE_PRE
  zh: '[PRE130]'
- en: With `/y`, the match must start at exactly `.lastIndex`. `.lastIndex` is updated.
    If there is no match, `null` is returned.
  id: totrans-765
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨ `/y` æ—¶ï¼ŒåŒ¹é…å¿…é¡»æ­£å¥½ä» `.lastIndex` å¼€å§‹ã€‚`.lastIndex` å°†è¢«æ›´æ–°ã€‚å¦‚æœæ²¡æœ‰åŒ¹é…é¡¹ï¼Œåˆ™è¿”å› `null`ã€‚
- en: '[PRE131]'
  id: totrans-766
  prefs: []
  type: TYPE_PRE
  zh: '[PRE131]'
- en: With `/gy`, `.exec()` behaves the same as with `/y`.
  id: totrans-767
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨ `/gy` æ—¶ï¼Œ`.exec()` çš„è¡Œä¸ºä¸ä½¿ç”¨ `/y` æ—¶ç›¸åŒã€‚
- en: '[46.16.2.4â€ƒ`string.replace(regExp, str)` ^(ES3)](#stringreplaceregexp-str-es3)'
  id: totrans-768
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '[46.16.2.4â€ƒ`string.replace(regExp, str)` (ES3)](#stringreplaceregexp-str-es3)'
- en: 'Without `/g` and `/y`, only the first occurrence is replaced:'
  id: totrans-769
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æ²¡æœ‰ `/g` å’Œ `/y` çš„æƒ…å†µä¸‹ï¼Œåªæ›¿æ¢ç¬¬ä¸€ä¸ªå‡ºç°ï¼š
- en: '[PRE132]'
  id: totrans-770
  prefs: []
  type: TYPE_PRE
  zh: '[PRE132]'
- en: With `/g`, all occurrences are replaced. `.lastIndex` is ignored but reset to
    zero.
  id: totrans-771
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨ `/g` æ—¶ï¼Œå°†æ›¿æ¢æ‰€æœ‰å‡ºç°ã€‚`.lastIndex` è¢«å¿½ç•¥ä½†é‡ç½®ä¸ºé›¶ã€‚
- en: '[PRE133]'
  id: totrans-772
  prefs: []
  type: TYPE_PRE
  zh: '[PRE133]'
- en: With `/y`, only the (first) occurrence at `.lastIndex` is replaced. `.lastIndex`
    is updated.
  id: totrans-773
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨ `/y` æ—¶ï¼Œåªæ›¿æ¢ `.lastIndex` å¤„çš„ï¼ˆç¬¬ä¸€ä¸ªï¼‰å‡ºç°ã€‚`.lastIndex` å°†è¢«æ›´æ–°ã€‚
- en: '[PRE134]'
  id: totrans-774
  prefs: []
  type: TYPE_PRE
  zh: '[PRE134]'
- en: '`/gy` works like `/g`, but gaps between matches are not allowed:'
  id: totrans-775
  prefs: []
  type: TYPE_NORMAL
  zh: '`/gy` çš„è¡Œä¸ºç±»ä¼¼äº `/g`ï¼Œä½†åŒ¹é…é¡¹ä¹‹é—´ä¸å…è®¸æœ‰é—´éš”ï¼š'
- en: '[PRE135]'
  id: totrans-776
  prefs: []
  type: TYPE_PRE
  zh: '[PRE135]'
- en: '[46.16.2.5â€ƒ`string.replaceAll(regExp, str)` ^(ES2021)](#stringreplaceallregexp-str-es2021)'
  id: totrans-777
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '[46.16.2.5â€ƒ`string.replaceAll(regExp, str)` (ES2021)](#stringreplaceallregexp-str-es2021)'
- en: '`.replaceAll()` works like `.replace()` but throws an exception if `/g` is
    not set:'
  id: totrans-778
  prefs: []
  type: TYPE_NORMAL
  zh: '`.replaceAll()` çš„è¡Œä¸ºç±»ä¼¼äº `.replace()`ï¼Œä½†å¦‚æœæœªè®¾ç½® `/g`ï¼Œåˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ï¼š'
- en: '[PRE136]'
  id: totrans-779
  prefs: []
  type: TYPE_PRE
  zh: '[PRE136]'
- en: '[46.16.2.6â€ƒ`regExp.test(str)` ^(ES3)](#regexpteststr-es3)'
  id: totrans-780
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '[46.16.2.6â€ƒ`regExp.test(str)` (ES3)](#regexpteststr-es3)'
- en: This method behaves the same same as `.exec()`, but instead of returning a match
    object, it returns `true`, and instead of returning `null`, it returns `false`.
  id: totrans-781
  prefs: []
  type: TYPE_NORMAL
  zh: æ­¤æ–¹æ³•çš„è¡Œä¸ºä¸ `.exec()` ç›¸åŒï¼Œä½†è¿”å› `true` è€Œä¸æ˜¯åŒ¹é…å¯¹è±¡ï¼Œè¿”å› `null` è€Œä¸æ˜¯ `false`ã€‚
- en: 'For example, without either `/g` or `/y`, the result is always `true`:'
  id: totrans-782
  prefs: []
  type: TYPE_NORMAL
  zh: ä¾‹å¦‚ï¼Œå¦‚æœæ²¡æœ‰ `/g` æˆ– `/y`ï¼Œç»“æœæ€»æ˜¯ `true`ï¼š
- en: '[PRE137]'
  id: totrans-783
  prefs: []
  type: TYPE_PRE
  zh: '[PRE137]'
- en: 'With `/g`, there are two matches:'
  id: totrans-784
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨ `/g` æ—¶ï¼Œæœ‰ä¸¤ä¸ªåŒ¹é…é¡¹ï¼š
- en: '[PRE138]'
  id: totrans-785
  prefs: []
  type: TYPE_PRE
  zh: '[PRE138]'
- en: 'With `/y`, there is only one match:'
  id: totrans-786
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨ `/y` æ—¶ï¼Œåªæœ‰ä¸€ä¸ªåŒ¹é…é¡¹ï¼š
- en: '[PRE139]'
  id: totrans-787
  prefs: []
  type: TYPE_PRE
  zh: '[PRE139]'
- en: With `/gy`, `.test()` behaves the same as with `/y`.
  id: totrans-788
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨ `/gy` æ—¶ï¼Œ`.test()` çš„è¡Œä¸ºä¸ `/y` ç›¸åŒã€‚
- en: '[46.16.3â€ƒFour pitfalls of `/g` and `/y` and how to deal with them](#four-pitfalls-of-g-and-y-and-how-to-deal-with-them)'
  id: totrans-789
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.16.3â€ƒ/g å’Œ /y çš„å››ä¸ªé™·é˜±åŠå…¶å¤„ç†æ–¹æ³•](#four-pitfalls-of-g-and-y-and-how-to-deal-with-them)'
- en: We will first look at four pitfalls of `/g` and `/y` and then at ways of dealing
    with those pitfalls.
  id: totrans-790
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å°†é¦–å…ˆæ¢è®¨ `/g` å’Œ `/y` çš„å››ä¸ªé™·é˜±ï¼Œç„¶åæ¢è®¨å¤„ç†è¿™äº›é™·é˜±çš„æ–¹æ³•ã€‚
- en: '[46.16.3.1â€ƒPitfall 1: We canâ€™t inline a regular expression with `/g` or `/y`](#pitfall-1-we-cant-inline-a-regular-expression-with-g-or-y)'
  id: totrans-791
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '[46.16.3.1â€ƒé™·é˜± 1ï¼šæˆ‘ä»¬æ— æ³•å°†å¸¦æœ‰ `/g` æˆ– `/y` çš„æ­£åˆ™è¡¨è¾¾å¼å†…è”](#é™·é˜±-1-æˆ‘ä»¬æ— æ³•å°†å¸¦æœ‰-g-æˆ–-y-çš„æ­£åˆ™è¡¨è¾¾å¼å†…è”)'
- en: A regular expression with `/g` canâ€™t be inlined. For example, in the following
    `while` loop, the regular expression is created fresh, every time the condition
    is checked. Therefore, its `.lastIndex` is always zero and the loop never terminates.
  id: totrans-792
  prefs: []
  type: TYPE_NORMAL
  zh: å¸¦æœ‰ `/g` çš„æ­£åˆ™è¡¨è¾¾å¼ä¸èƒ½å†…è”ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸‹é¢çš„ `while` å¾ªç¯ä¸­ï¼Œæ¯æ¬¡æ£€æŸ¥æ¡ä»¶æ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚å› æ­¤ï¼Œå…¶ `.lastIndex`
    æ€»æ˜¯é›¶ï¼Œå¾ªç¯æ°¸è¿œä¸ä¼šç»ˆæ­¢ã€‚
- en: '[PRE140]'
  id: totrans-793
  prefs: []
  type: TYPE_PRE
  zh: '[PRE140]'
- en: With `/y`, the problem is the same.
  id: totrans-794
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨ `/y` æ—¶ï¼Œé—®é¢˜ç›¸åŒã€‚
- en: '[46.16.3.2â€ƒPitfall 2: Removing `/g` or `/y` can break code](#pitfall-2-removing-g-or-y-can-break-code)'
  id: totrans-795
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '[46.16.3.2â€ƒé™·é˜± 2ï¼šç§»é™¤ `/g` æˆ– `/y` å¯èƒ½ä¼šç ´åä»£ç ](#é™·é˜±-2-ç§»é™¤-g-æˆ–-y-å¯èƒ½ä¼šç ´åä»£ç )'
- en: 'If code expects a regular expression with `/g` and has a loop over the results
    of `.exec()` or `.test()`, then a regular expression without `/g` can cause an
    infinite loop:'
  id: totrans-796
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœä»£ç æœŸæœ›ä¸€ä¸ªå¸¦æœ‰ `/g` çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªéå† `.exec()` æˆ– `.test()` ç»“æœçš„å¾ªç¯ï¼Œé‚£ä¹ˆæ²¡æœ‰ `/g` çš„æ­£åˆ™è¡¨è¾¾å¼å¯èƒ½ä¼šå¯¼è‡´æ— é™å¾ªç¯ï¼š
- en: '[PRE141]'
  id: totrans-797
  prefs: []
  type: TYPE_PRE
  zh: '[PRE141]'
- en: Why is there an infinite loop? Because `.exec()` always returns the first result,
    a match object, and never `null`.
  id: totrans-798
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºä»€ä¹ˆä¼šæœ‰æ— é™å¾ªç¯ï¼Ÿå› ä¸º `.exec()` æ€»æ˜¯è¿”å›ç¬¬ä¸€ä¸ªç»“æœï¼Œä¸€ä¸ªåŒ¹é…å¯¹è±¡ï¼Œè€Œä¸ä¼šè¿”å› `null`ã€‚
- en: With `/y`, the problem is the same.
  id: totrans-799
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨ `/y` æ—¶ï¼Œé—®é¢˜ç›¸åŒã€‚
- en: '[46.16.3.3â€ƒPitfall 3: Adding `/g` or `/y` can break code](#pitfall-3-adding-g-or-y-can-break-code)'
  id: totrans-800
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '[46.16.3.3â€ƒé™·é˜± 3ï¼šæ·»åŠ  `/g` æˆ– `/y` å¯èƒ½ä¼šç ´åä»£ç ](#é™·é˜±-3-æ·»åŠ -g-æˆ–-y-å¯èƒ½ä¼šç ´åä»£ç )'
- en: 'With `.test()`, there is another caveat: It is affected by `.lastIndex`. Therefore,
    if we want to check exactly once if a regular expression matches a string, then
    the regular expression must not have `/g`. Otherwise, we generally get a different
    result every time we call `.test()`:'
  id: totrans-801
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨ `.test()` æ—¶ï¼Œè¿˜æœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼šå®ƒä¼šå—åˆ° `.lastIndex` çš„å½±å“ã€‚å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬æƒ³ç²¾ç¡®åœ°æ£€æŸ¥ä¸€æ¬¡æ­£åˆ™è¡¨è¾¾å¼æ˜¯å¦ä¸å­—ç¬¦ä¸²åŒ¹é…ï¼Œé‚£ä¹ˆæ­£åˆ™è¡¨è¾¾å¼å¿…é¡»æ²¡æœ‰
    `/g`ã€‚å¦åˆ™ï¼Œæˆ‘ä»¬é€šå¸¸æ¯æ¬¡è°ƒç”¨ `.test()` éƒ½ä¼šå¾—åˆ°ä¸åŒçš„ç»“æœï¼š
- en: '[PRE142]'
  id: totrans-802
  prefs: []
  type: TYPE_PRE
  zh: '[PRE142]'
- en: The first invocation produces a match and updates `.lastIndex`. The second invocation
    does not find a match and resets `.lastIndex` to zero.
  id: totrans-803
  prefs: []
  type: TYPE_NORMAL
  zh: ç¬¬ä¸€æ¬¡è°ƒç”¨ä¼šäº§ç”Ÿä¸€ä¸ªåŒ¹é…å¹¶æ›´æ–° `.lastIndex`ã€‚ç¬¬äºŒæ¬¡è°ƒç”¨æ‰¾ä¸åˆ°åŒ¹é…å¹¶é‡ç½® `.lastIndex` ä¸ºé›¶ã€‚
- en: If we create a regular expression specifically for `.test()`, then we probably
    wonâ€™t add `/g`. However, the likeliness of encountering `/g` increases if we use
    the same regular expression for replacing and for testing.
  id: totrans-804
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªä¸“é—¨ç”¨äº `.test()` çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯èƒ½ä¸ä¼šæ·»åŠ  `/g`ã€‚ç„¶è€Œï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨ç›¸åŒçš„æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œæ›¿æ¢å’Œæµ‹è¯•ï¼Œé‚£ä¹ˆé‡åˆ°
    `/g` çš„å¯èƒ½æ€§ä¼šå¢åŠ ã€‚
- en: 'Once again, this problem also exists with `/y`:'
  id: totrans-805
  prefs: []
  type: TYPE_NORMAL
  zh: å†æ¬¡å¼ºè°ƒï¼Œè¿™ä¸ªé—®é¢˜ä¹Ÿå­˜åœ¨äº `/y` ä¸Šï¼š
- en: '[PRE143]'
  id: totrans-806
  prefs: []
  type: TYPE_PRE
  zh: '[PRE143]'
- en: '[46.16.3.4â€ƒPitfall 4: Code can produce unexpected results if `.lastIndex` isnâ€™t
    zero](#pitfall-4-code-can-produce-unexpected-results-if-lastindex-isnt-zero)'
  id: totrans-807
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '[46.16.3.4â€ƒé™·é˜± 4ï¼šå¦‚æœ `.lastIndex` ä¸æ˜¯é›¶ï¼Œä»£ç å¯èƒ½ä¼šäº§ç”Ÿæ„å¤–çš„ç»“æœ](#é™·é˜±-4-å¦‚æœ-lastindex-ä¸æ˜¯é›¶-ä»£ç å¯èƒ½ä¼šäº§ç”Ÿæ„å¤–çš„ç»“æœ)'
- en: 'If an operation uses regular expression methods that are affected by `.lastIndex`,
    then we must ensure that `.lastIndex` is zero at the beginning. Otherwise, we
    may get unexpected results:'
  id: totrans-808
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœä¸€ä¸ªæ“ä½œä½¿ç”¨äº†å— `.lastIndex` å½±å“çš„æ­£åˆ™è¡¨è¾¾å¼æ–¹æ³•ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¿…é¡»ç¡®ä¿ `.lastIndex` åœ¨å¼€å§‹æ—¶ä¸ºé›¶ã€‚å¦åˆ™ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šå¾—åˆ°æ„å¤–çš„ç»“æœï¼š
- en: '[PRE144]'
  id: totrans-809
  prefs: []
  type: TYPE_PRE
  zh: '[PRE144]'
- en: Normally, `.lastIndex` is zero in newly created regular expressions and we wonâ€™t
    change it explicitly like we did in the example. But `.lastIndex` can still end
    up not being zero if we use the regular expression multiple times.
  id: totrans-810
  prefs: []
  type: TYPE_NORMAL
  zh: é€šå¸¸ï¼Œ`.lastIndex` åœ¨æ–°åˆ›å»ºçš„æ­£åˆ™è¡¨è¾¾å¼ä¸­ä¸ºé›¶ï¼Œæˆ‘ä»¬ä¸ä¼šåƒåœ¨ä¾‹å­ä¸­é‚£æ ·æ˜¾å¼åœ°æ›´æ”¹å®ƒã€‚ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬å¤šæ¬¡ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼Œ`.lastIndex`
    ä»ç„¶å¯èƒ½ä¸æ˜¯é›¶ã€‚
- en: '[46.16.3.5â€ƒHow to avoid the pitfalls of `/g` and `/y`](#how-to-avoid-the-pitfalls-of-g-and-y)'
  id: totrans-811
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '[46.16.3.5â€ƒå¦‚ä½•é¿å… `/g` å’Œ `/y` çš„é™·é˜±](#å¦‚ä½•é¿å…-g-å’Œ-y-çš„é™·é˜±)'
- en: As an example of dealing with `/g` and `.lastIndex`, we revisit `countMatches()`
    from the previous example. How do we prevent a wrong regular expression from breaking
    our code? Letâ€™s look at three approaches.
  id: totrans-812
  prefs: []
  type: TYPE_NORMAL
  zh: ä½œä¸ºå¤„ç† `/g` å’Œ `.lastIndex` çš„ä¸€ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å›é¡¾ä¸€ä¸‹å‰ä¸€ä¸ªä¾‹å­ä¸­çš„ `countMatches()`ã€‚æˆ‘ä»¬å¦‚ä½•é˜²æ­¢é”™è¯¯çš„æ­£åˆ™è¡¨è¾¾å¼ç ´åæˆ‘ä»¬çš„ä»£ç ï¼Ÿè®©æˆ‘ä»¬çœ‹çœ‹ä¸‰ç§æ–¹æ³•ã€‚
- en: '[46.16.3.5.1â€ƒThrowing exceptions](#throwing-exceptions)'
  id: totrans-813
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: '[46.16.3.5.1â€ƒæŠ›å‡ºå¼‚å¸¸](#æŠ›å‡ºå¼‚å¸¸)'
- en: 'First, we can throw an exception if `/g` isnâ€™t set or `.lastIndex` isnâ€™t zero:'
  id: totrans-814
  prefs: []
  type: TYPE_NORMAL
  zh: é¦–å…ˆï¼Œå¦‚æœ `/g` æ²¡æœ‰è®¾ç½®æˆ– `.lastIndex` ä¸æ˜¯é›¶ï¼Œæˆ‘ä»¬å¯ä»¥æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼š
- en: '[PRE145]'
  id: totrans-815
  prefs: []
  type: TYPE_PRE
  zh: '[PRE145]'
- en: '[46.16.3.5.2â€ƒCloning regular expressions](#cloning-regular-expressions)'
  id: totrans-816
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: '[46.16.3.5.2â€ƒå…‹éš†æ­£åˆ™è¡¨è¾¾å¼](#å…‹éš†æ­£åˆ™è¡¨è¾¾å¼)'
- en: Second, we can clone the parameter. That has the added benefit that `regExp`
    wonâ€™t be changed.
  id: totrans-817
  prefs: []
  type: TYPE_NORMAL
  zh: å…¶æ¬¡ï¼Œæˆ‘ä»¬å¯ä»¥å…‹éš†å‚æ•°ã€‚è¿™è¿˜æœ‰ä¸€ä¸ªé¢å¤–çš„ä¼˜ç‚¹ï¼Œå³ `regExp` ä¸ä¼šæ”¹å˜ã€‚
- en: '[PRE146]'
  id: totrans-818
  prefs: []
  type: TYPE_PRE
  zh: '[PRE146]'
- en: '[46.16.3.5.3â€ƒUsing an operation that isnâ€™t affected by `.lastIndex` or flags](#using-an-operation-that-isnt-affected-by-lastindex-or-flags)'
  id: totrans-819
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: '[46.16.3.5.3â€ƒä½¿ç”¨ä¸å— `.lastIndex` æˆ–æ ‡å¿—å½±å“çš„æ“ä½œ](#ä½¿ç”¨ä¸å—-lastindex-æˆ–æ ‡å¿—å½±å“çš„æ“ä½œ)'
- en: 'Several regular expression operations are not affected by `.lastIndex` or by
    flags. For example, `.match()` ignores `.lastIndex` if `/g` is present:'
  id: totrans-820
  prefs: []
  type: TYPE_NORMAL
  zh: å‡ ä¸ªæ­£åˆ™è¡¨è¾¾å¼æ“ä½œä¸å— `.lastIndex` æˆ–æ ‡å¿—çš„å½±å“ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå­˜åœ¨ `/g`ï¼Œ`.match()` ä¼šå¿½ç•¥ `.lastIndex`ï¼š
- en: '[PRE147]'
  id: totrans-821
  prefs: []
  type: TYPE_PRE
  zh: '[PRE147]'
- en: Here, `countMatches()` works even though we didnâ€™t check or fix `.lastIndex`.
  id: totrans-822
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è¿™é‡Œï¼Œ`countMatches()` å³ä½¿æ²¡æœ‰æ£€æŸ¥æˆ–ä¿®å¤ `.lastIndex` ä¹Ÿèƒ½æ­£å¸¸å·¥ä½œã€‚
- en: '[46.16.4â€ƒUse case for `.lastIndex`: starting matching at a given index](#use-case-for-lastindex-starting-matching-at-a-given-index)'
  id: totrans-823
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.16.4 ä½¿ç”¨ `.lastIndex` çš„ç”¨ä¾‹ï¼šä»ç»™å®šç´¢å¼•å¼€å§‹åŒ¹é…](#use-case-for-lastindex-starting-matching-at-a-given-index)'
- en: 'Apart from storing the current position when matching multiple times, `.lastIndex`
    can also be used to:'
  id: totrans-824
  prefs: []
  type: TYPE_NORMAL
  zh: é™¤äº†åœ¨å¤šæ¬¡åŒ¹é…æ—¶å­˜å‚¨å½“å‰ä½ç½®å¤–ï¼Œ`.lastIndex` è¿˜å¯ä»¥ç”¨äºï¼š
- en: Match once at exactly a given position (via flag `/y`)
  id: totrans-825
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: åœ¨ç»™å®šä½ç½®ç²¾ç¡®åŒ¹é…ä¸€æ¬¡ï¼ˆé€šè¿‡æ ‡å¿— `/y`ï¼‰
- en: Match once at a given position or later (via flag `/g`)
  id: totrans-826
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: åœ¨ç»™å®šä½ç½®æˆ–ä¹‹ååŒ¹é…ä¸€æ¬¡ï¼ˆé€šè¿‡æ ‡å¿— `/g`ï¼‰
- en: Weâ€™ll look at examples next.
  id: totrans-827
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬æ¥ä¸‹æ¥å°†æŸ¥çœ‹ç¤ºä¾‹ã€‚
- en: '[46.16.4.1â€ƒExample: Checking if a regular expression matches at a given index](#example-checking-if-a-regular-expression-matches-at-a-given-index)'
  id: totrans-828
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '[46.16.4.1 ç¤ºä¾‹ï¼šæ£€æŸ¥æ­£åˆ™è¡¨è¾¾å¼æ˜¯å¦åœ¨ç»™å®šç´¢å¼•å¤„åŒ¹é…](#example-checking-if-a-regular-expression-matches-at-a-given-index)'
- en: 'Given that `.test()` is affected by `/y` and `.lastIndex`, we can use it to
    check if a regular expression `regExp` matches a string `str` at exactly a given
    `index`:'
  id: totrans-829
  prefs: []
  type: TYPE_NORMAL
  zh: ç”±äº `.test()` å— `/y` å’Œ `.lastIndex` çš„å½±å“ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥æ£€æŸ¥æ­£åˆ™è¡¨è¾¾å¼ `regExp` æ˜¯å¦åœ¨ç»™å®šçš„ `index`
    å¤„ä¸å­—ç¬¦ä¸² `str` åŒ¹é…ï¼š
- en: '[PRE148]'
  id: totrans-830
  prefs: []
  type: TYPE_PRE
  zh: '[PRE148]'
- en: '`regExp` is anchored to `.lastIndex` due to `/y`.'
  id: totrans-831
  prefs: []
  type: TYPE_NORMAL
  zh: ç”±äº `/y`ï¼Œ`regExp` é”šå®šåˆ° `.lastIndex`ã€‚
- en: Note that we must not use the assertion `^` which would anchor `regExp` to the
    beginning of the input string.
  id: totrans-832
  prefs: []
  type: TYPE_NORMAL
  zh: æ³¨æ„ï¼Œæˆ‘ä»¬ä¸å¾—ä½¿ç”¨æ–­è¨€ `^`ï¼Œè¿™å°†ä½¿ `regExp` é”šå®šåˆ°è¾“å…¥å­—ç¬¦ä¸²çš„å¼€å§‹ã€‚
- en: '[46.16.4.2â€ƒExample: Finding the location of a match, starting at a given index](#example-finding-the-location-of-a-match-starting-at-a-given-index)'
  id: totrans-833
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '[46.16.4.2 ç¤ºä¾‹ï¼šä»ç»™å®šç´¢å¼•å¼€å§‹æŸ¥æ‰¾åŒ¹é…ä½ç½®](#example-finding-the-location-of-a-match-starting-at-a-given-index)'
- en: '`.search()` lets us find the location where a regular expression matches:'
  id: totrans-834
  prefs: []
  type: TYPE_NORMAL
  zh: '`.search()` å…è®¸æˆ‘ä»¬æ‰¾åˆ°æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„ä½ç½®ï¼š'
- en: '[PRE149]'
  id: totrans-835
  prefs: []
  type: TYPE_PRE
  zh: '[PRE149]'
- en: 'Alas, we canâ€™t change where `.search()` starts looking for matches. As a workaround,
    we can use `.exec()` for searching:'
  id: totrans-836
  prefs: []
  type: TYPE_NORMAL
  zh: å¯æƒœï¼Œæˆ‘ä»¬æ— æ³•æ›´æ”¹ `.search()` å¼€å§‹æŸ¥æ‰¾åŒ¹é…çš„ä½ç½®ã€‚ä½œä¸ºæ›¿ä»£æ–¹æ¡ˆï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `.exec()` è¿›è¡Œæœç´¢ï¼š
- en: '[PRE150]'
  id: totrans-837
  prefs: []
  type: TYPE_PRE
  zh: '[PRE150]'
- en: '[46.16.4.3â€ƒExample: Replacing an occurrence at a given index](#example-replacing-an-occurrence-at-a-given-index)'
  id: totrans-838
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '[46.16.4.3 ç¤ºä¾‹ï¼šåœ¨ç»™å®šç´¢å¼•å¤„æ›¿æ¢å‡ºç°](#example-replacing-an-occurrence-at-a-given-index)'
- en: 'When used without `/g` and with `/y`, `.replace()` makes one replacement â€“
    if there is a match at `.lastIndex`:'
  id: totrans-839
  prefs: []
  type: TYPE_NORMAL
  zh: å½“æ²¡æœ‰ `/g` å¹¶ä¸”æœ‰ `/y` æ—¶ï¼Œ`.replace()` ä¼šè¿›è¡Œä¸€æ¬¡æ›¿æ¢â€”â€”å¦‚æœ `.lastIndex` å¤„æœ‰åŒ¹é…é¡¹ï¼š
- en: '[PRE151]'
  id: totrans-840
  prefs: []
  type: TYPE_PRE
  zh: '[PRE151]'
- en: '[46.16.5â€ƒThe downsides and an upside of `.lastIndex`](#regexp-lastindex-upsides-downsides)'
  id: totrans-841
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.16.5 `.lastIndex` çš„ç¼ºç‚¹å’Œä¼˜ç‚¹](#regexp-lastindex-upsides-downsides)'
- en: 'The regular expression property `.lastIndex` has two significant downsides:'
  id: totrans-842
  prefs: []
  type: TYPE_NORMAL
  zh: æ­£åˆ™è¡¨è¾¾å¼å±æ€§ `.lastIndex` æœ‰ä¸¤ä¸ªæ˜¾è‘—çš„ç¼ºç‚¹ï¼š
- en: 'It makes regular expressions stateful:'
  id: totrans-843
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: è¿™ä½¿å¾—æ­£åˆ™è¡¨è¾¾å¼å…·æœ‰çŠ¶æ€ï¼š
- en: We now have to be mindful of the states of regular expressions and how we share
    them.
  id: totrans-844
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬ç°åœ¨å¿…é¡»æ³¨æ„æ­£åˆ™è¡¨è¾¾å¼çš„çŠ¶æ€ä»¥åŠæˆ‘ä»¬å¦‚ä½•å…±äº«å®ƒä»¬ã€‚
- en: For many use cases, we canâ€™t make them immutable via freezing, either.
  id: totrans-845
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: å¯¹äºè®¸å¤šç”¨ä¾‹ï¼Œæˆ‘ä»¬ä¹Ÿä¸èƒ½é€šè¿‡å†»ç»“æ¥ä½¿å®ƒä»¬ä¸å¯å˜ã€‚
- en: Support for `.lastIndex` is inconsistent among regular expression operations.
  id: totrans-846
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`.lastIndex` åœ¨æ­£åˆ™è¡¨è¾¾å¼æ“ä½œä¸­çš„æ”¯æŒä¸ä¸€è‡´ã€‚'
- en: 'On the upside, `.lastIndex` also gives us additional useful functionality:
    We can dictate where matching should begin (for some operations). Ideally, such
    functionality would be provided via an assertion such as `\G` (vs. a flag `/y`)
    and an index as an argument for various regular-expression-related methods (vs.
    a regular expression property `.lastIndex`). But itâ€™s better than not having it
    at all.'
  id: totrans-847
  prefs: []
  type: TYPE_NORMAL
  zh: ä¼˜ç‚¹æ˜¯ï¼Œ`.lastIndex` ä¹Ÿæä¾›äº†é¢å¤–çš„æœ‰ç”¨åŠŸèƒ½ï¼šæˆ‘ä»¬å¯ä»¥æŒ‡å®šåŒ¹é…åº”è¯¥å¼€å§‹çš„ä½ç½®ï¼ˆå¯¹äºæŸäº›æ“ä½œï¼‰ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œè¿™ç§åŠŸèƒ½åº”è¯¥é€šè¿‡ä¸€ä¸ªæ–­è¨€å¦‚ `\G`ï¼ˆä¸æ ‡å¿—
    `/y` ç›¸æ¯”ï¼‰ä»¥åŠä½œä¸ºå„ç§æ­£åˆ™è¡¨è¾¾å¼ç›¸å…³æ–¹æ³•çš„å‚æ•°çš„ç´¢å¼•ï¼ˆä¸æ­£åˆ™è¡¨è¾¾å¼å±æ€§ `.lastIndex` ç›¸æ¯”ï¼‰æ¥æä¾›ã€‚ä½†æ€»æ¯”æ²¡æœ‰å¥½ã€‚
- en: '[46.17â€ƒ`RegExp.escape()`: escaping text so that it can be used inside a regular
    expression ^(ES2025)](#RegExp.escape)'
  id: totrans-848
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[46.17 `RegExp.escape()`ï¼šè½¬ä¹‰æ–‡æœ¬ä»¥ä¾¿åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ä½¿ç”¨ (ES2025)](#RegExp.escape)'
- en: For a string `text`, `RegExp.escape(text)` creates a regular expression pattern
    that matches `text`.
  id: totrans-849
  prefs: []
  type: TYPE_NORMAL
  zh: å¯¹äºå­—ç¬¦ä¸² `text`ï¼Œ`RegExp.escape(text)` åˆ›å»ºä¸€ä¸ªä¸ `text` åŒ¹é…çš„æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ã€‚
- en: 'Characters that have special meaning in regular expressions canâ€™t be used verbatim
    and have to be escaped:'
  id: totrans-850
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­å…·æœ‰ç‰¹æ®Šæ„ä¹‰çš„å­—ç¬¦ä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼Œå¿…é¡»è¿›è¡Œè½¬ä¹‰ï¼š
- en: '[PRE152]'
  id: totrans-851
  prefs: []
  type: TYPE_PRE
  zh: '[PRE152]'
- en: 'Note that we see each regular expression backslash twice: One of them is the
    actual backslash, the other one escapes it inside the string literal:'
  id: totrans-852
  prefs: []
  type: TYPE_NORMAL
  zh: æ³¨æ„ï¼Œæˆ‘ä»¬çœ‹åˆ°çš„æ¯ä¸ªæ­£åˆ™è¡¨è¾¾å¼åæ–œæ éƒ½å‡ºç°äº†ä¸¤æ¬¡ï¼šå…¶ä¸­ä¸€ä¸ªæ˜¯å®é™…çš„åæ–œæ ï¼Œå¦ä¸€ä¸ªæ˜¯åœ¨å­—ç¬¦ä¸²å­—é¢é‡ä¸­å°†å…¶è½¬ä¹‰ï¼š
- en: '[PRE153]'
  id: totrans-853
  prefs: []
  type: TYPE_PRE
  zh: '[PRE153]'
- en: 'Characters that have no special meaning donâ€™t have to be escaped:'
  id: totrans-854
  prefs: []
  type: TYPE_NORMAL
  zh: æ²¡æœ‰ç‰¹æ®Šæ„ä¹‰çš„å­—ç¬¦ä¸éœ€è¦è½¬ä¹‰ï¼š
- en: '[PRE154]'
  id: totrans-855
  prefs: []
  type: TYPE_PRE
  zh: '[PRE154]'
- en: '[46.17.1â€ƒUse case for `RegExp.escape()`: replacing all occurrences of a text](#use-case-for-regexpescape-replacing-all-occurrences-of-a-text)'
  id: totrans-856
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.17.1 `RegExp.escape()` çš„ç”¨ä¾‹ï¼šæ›¿æ¢æ‰€æœ‰æ–‡æœ¬çš„å‡ºç°](#use-case-for-regexpescape-replacing-all-occurrences-of-a-text)'
- en: 'The classic use case for escaping was searching and replacing text:'
  id: totrans-857
  prefs: []
  type: TYPE_NORMAL
  zh: è½¬ä¹‰çš„ç»å…¸ç”¨ä¾‹æ˜¯æœç´¢å’Œæ›¿æ¢æ–‡æœ¬ï¼š
- en: '[PRE155]'
  id: totrans-858
  prefs: []
  type: TYPE_PRE
  zh: '[PRE155]'
- en: 'However, since ES2021, we have [`.replaceAll()`](#String.prototype.replaceAll):'
  id: totrans-859
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶è€Œï¼Œè‡ªES2021ä»¥æ¥ï¼Œæˆ‘ä»¬æœ‰äº† [`.replaceAll()`](#String.prototype.replaceAll)ï¼š
- en: '[PRE156]'
  id: totrans-860
  prefs: []
  type: TYPE_PRE
  zh: '[PRE156]'
- en: '[46.17.2â€ƒUse case for `RegExp.escape()`: part of a regular expression must
    match a given text](#use-case-for-regexpescape-part-of-a-regular-expression-must-match-a-given-text)'
  id: totrans-861
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.17.2 `RegExp.escape()` çš„ç”¨ä¾‹ï¼šæ­£åˆ™è¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†å¿…é¡»åŒ¹é…ç»™å®šçš„æ–‡æœ¬](#use-case-for-regexpescape-part-of-a-regular-expression-must-match-a-given-text)'
- en: 'The following code removes all occurrences of `text` inside `str` that are
    not quoted:'
  id: totrans-862
  prefs: []
  type: TYPE_NORMAL
  zh: ä»¥ä¸‹ä»£ç ç§»é™¤äº† `str` ä¸­æ‰€æœ‰æœªå¼•ç”¨çš„ `text` å‡ºç°ï¼š
- en: '[PRE157]'
  id: totrans-863
  prefs: []
  type: TYPE_PRE
  zh: '[PRE157]'
- en: The same approach can also be used to find or count unquoted text.
  id: totrans-864
  prefs: []
  type: TYPE_NORMAL
  zh: åŒæ ·çš„æ–¹æ³•ä¹Ÿå¯ä»¥ç”¨æ¥æŸ¥æ‰¾æˆ–è®¡æ•°æœªå¼•ç”¨çš„æ–‡æœ¬ã€‚
- en: '![Icon â€œexerciseâ€](../Images/4fc2ec98bb44cc1f4de7c6a46d9dd043.png)â€‚**Exercise:
    Searching for text that contains a wildcard**'
  id: totrans-865
  prefs: []
  type: TYPE_NORMAL
  zh: '![å›¾æ ‡â€œç»ƒä¹ â€](../Images/4fc2ec98bb44cc1f4de7c6a46d9dd043.png) **ç»ƒä¹ ï¼šæœç´¢åŒ…å«é€šé…ç¬¦çš„æ–‡æœ¬**'
- en: âœ… `exercises/regexps/includes-with-elision_test.mjs`
  id: totrans-866
  prefs: []
  type: TYPE_NORMAL
  zh: âœ… `exercises/regexps/includes-with-elision_test.mjs`
- en: '[46.18â€ƒMatching everything or nothing](#matching-everything-or-nothing)'
  id: totrans-867
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[46.18 åŒ¹é…æ‰€æœ‰æˆ–æ— å†…å®¹](#matching-everything-or-nothing)'
- en: Sometimes, we may need a regular expression that matches everything or nothing
    â€“ for example, as a default value.
  id: totrans-868
  prefs: []
  type: TYPE_NORMAL
  zh: æœ‰æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦ä¸€ä¸ªåŒ¹é…æ‰€æœ‰æˆ–æ— å†…å®¹çš„æ­£åˆ™è¡¨è¾¾å¼ - ä¾‹å¦‚ï¼Œä½œä¸ºé»˜è®¤å€¼ã€‚
- en: 'Match everything: `/(?:)/`'
  id: totrans-869
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: åŒ¹é…æ‰€æœ‰å†…å®¹ï¼š`/(?:)/`
- en: The empty group `()` matches everything. We make it non-capturing (via `?:`),
    to avoid unnecessary work.
  id: totrans-870
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: ç©ºç»„ `()` åŒ¹é…æ‰€æœ‰å†…å®¹ã€‚æˆ‘ä»¬å°†å…¶è®¾ç½®ä¸ºéæ•è·ç»„ï¼ˆé€šè¿‡ `?:`ï¼‰ï¼Œä»¥é¿å…ä¸å¿…è¦çš„æ“ä½œã€‚
- en: '[PRE158]'
  id: totrans-871
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE158]'
- en: 'Match nothing: `/.^/`'
  id: totrans-872
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: åŒ¹é…æ— å†…å®¹ï¼š`/.^/`
- en: '`^` only matches at the beginning of a string. The dot moves matching beyond
    the first character and now `^` doesnâ€™t match anymore.'
  id: totrans-873
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`^` ä»…åŒ¹é…å­—ç¬¦ä¸²çš„å¼€å§‹ã€‚ç‚¹å·å°†åŒ¹é…æ‰©å±•åˆ°ç¬¬ä¸€ä¸ªå­—ç¬¦ä¹‹å¤–ï¼Œç°åœ¨ `^` ä¸å†åŒ¹é…ã€‚'
- en: '[PRE159]'
  id: totrans-874
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE159]'
- en: 'Regular expression literals canâ€™t be empty because `//` starts a single-line
    comment. Therefore, the first of the previous two regular expressions is used
    in this case:'
  id: totrans-875
  prefs: []
  type: TYPE_NORMAL
  zh: æ­£åˆ™è¡¨è¾¾å¼å­—é¢é‡ä¸èƒ½ä¸ºç©ºï¼Œå› ä¸º `//` å¼€å§‹äº†ä¸€ä¸ªå•è¡Œæ³¨é‡Šã€‚å› æ­¤ï¼Œåœ¨å½“å‰æƒ…å†µä¸‹ï¼Œä½¿ç”¨å‰ä¸¤ä¸ªæ­£åˆ™è¡¨è¾¾å¼ä¸­çš„ç¬¬ä¸€ä¸ªï¼š
- en: '[PRE160]'
  id: totrans-876
  prefs: []
  type: TYPE_PRE
  zh: '[PRE160]'
- en: '[46.19â€ƒTips for making regular expressions easier to use](#tips-for-making-regular-expressions-easier-to-use)'
  id: totrans-877
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[46.19 ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ›´æ˜“äºä½¿ç”¨çš„æŠ€å·§](#tips-for-making-regular-expressions-easier-to-use)'
- en: 'In this section, we explore ways in which we can make regular expressions easier
    to use. Weâ€™ll use the following regular expression as an example:'
  id: totrans-878
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬æ¢è®¨æˆ‘ä»¬å¯ä»¥ä½¿æ­£åˆ™è¡¨è¾¾å¼æ›´å®¹æ˜“ä½¿ç”¨çš„æ–¹æ³•ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ä»¥ä¸‹æ­£åˆ™è¡¨è¾¾å¼ä½œä¸ºç¤ºä¾‹ï¼š
- en: '[PRE161]'
  id: totrans-879
  prefs: []
  type: TYPE_PRE
  zh: '[PRE161]'
- en: Right now, it is still fairly cryptic. It will be much easier to understand
    once we get to â€œinsignificant whitespaceâ€.
  id: totrans-880
  prefs: []
  type: TYPE_NORMAL
  zh: ç›®å‰ï¼Œå®ƒä»ç„¶ç›¸å½“æ™¦æ¶©ã€‚ä¸€æ—¦æˆ‘ä»¬åˆ°è¾¾â€œä¸é‡è¦çš„ç©ºç™½â€ï¼Œå®ƒå°†æ›´å®¹æ˜“ç†è§£ã€‚
- en: '[46.19.1â€ƒTip: Use flag `/v`](#tip-use-flag-v)'
  id: totrans-881
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.19.1 æç¤ºï¼šä½¿ç”¨æ ‡å¿— `/v`](#tip-use-flag-v)'
- en: 'If we add flag `/v` to our regular expression, we get fewer quirks and more
    features:'
  id: totrans-882
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœæˆ‘ä»¬åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­æ·»åŠ æ ‡å¿— `/v`ï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°æ›´å°‘çš„æ€ªå¼‚è¡Œä¸ºå’Œæ›´å¤šåŠŸèƒ½ï¼š
- en: '[PRE162]'
  id: totrans-883
  prefs: []
  type: TYPE_PRE
  zh: '[PRE162]'
- en: '`/v` doesnâ€™t change anything in this particular case, but it helps us if we
    add grapheme clusters with more than one code point or if we want features such
    as set operations in character classes.'
  id: totrans-884
  prefs: []
  type: TYPE_NORMAL
  zh: '`/v` åœ¨è¿™ä¸ªç‰¹å®šæƒ…å†µä¸‹æ²¡æœ‰æ”¹å˜ä»»ä½•ä¸œè¥¿ï¼Œä½†å®ƒæœ‰åŠ©äºæˆ‘ä»¬åœ¨æ·»åŠ å…·æœ‰å¤šä¸ªä»£ç ç‚¹çš„å›¾å½¢ç¾¤é›†æˆ–æƒ³è¦å­—ç¬¦ç±»ä¸­çš„é›†åˆè¿ç®—ç­‰åŠŸèƒ½æ—¶ã€‚'
- en: '[46.19.2â€ƒTip: order flags alphabetically](#tip-order-flags-alphabetically)'
  id: totrans-885
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.19.2 æç¤ºï¼šæŒ‰å­—æ¯é¡ºåºæ’åºæ ‡å¿—](#tip-order-flags-alphabetically)'
- en: 'If there is more than one flag, we should [order the flags alphabetically](#order-of-regexp-flags)
    â€“Â e.g.:'
  id: totrans-886
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœæœ‰å¤šä¸ªæ ‡å¿—ï¼Œæˆ‘ä»¬åº”è¯¥ [æŒ‰å­—æ¯é¡ºåºæ’åºæ ‡å¿—](#order-of-regexp-flags) - ä¾‹å¦‚ï¼š
- en: '[PRE163]'
  id: totrans-887
  prefs: []
  type: TYPE_PRE
  zh: '[PRE163]'
- en: 'That makes ordering consistent and is also how JavaScript displays regular
    expressions:'
  id: totrans-888
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ ·å¯ä»¥ä½¿é¡ºåºä¸€è‡´ï¼Œè¿™ä¹Ÿæ˜¯JavaScriptæ˜¾ç¤ºæ­£åˆ™è¡¨è¾¾å¼çš„æ–¹å¼ï¼š
- en: '[PRE164]'
  id: totrans-889
  prefs: []
  type: TYPE_PRE
  zh: '[PRE164]'
- en: '[46.19.3â€ƒTip: Use named capture groups](#tip-use-named-capture-groups)'
  id: totrans-890
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.19.3 æç¤ºï¼šä½¿ç”¨å‘½åæ•è·ç»„](#tip-use-named-capture-groups)'
- en: 'Our regular expression contains two positional capture groups. If we name them,
    they describe their purposes and we need less external documentation:'
  id: totrans-891
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬çš„æ­£åˆ™è¡¨è¾¾å¼åŒ…å«ä¸¤ä¸ªä½ç½®æ•è·ç»„ã€‚å¦‚æœæˆ‘ä»¬ç»™å®ƒä»¬å‘½åï¼Œå®ƒä»¬å°†æè¿°å…¶ç›®çš„ï¼Œæˆ‘ä»¬éœ€è¦çš„é¢å¤–æ–‡æ¡£æ›´å°‘ï¼š
- en: '[PRE165]'
  id: totrans-892
  prefs: []
  type: TYPE_PRE
  zh: '[PRE165]'
- en: '[46.19.4â€ƒTip: insignificant whitespace and line comments via `#`](#tip-insignificant-whitespace-and-line-comments-via-)'
  id: totrans-893
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.19.4 æç¤ºï¼šé€šè¿‡ `#` ä½¿ç”¨ä¸é‡è¦çš„ç©ºç™½å’Œè¡Œæ³¨é‡Š](#tip-insignificant-whitespace-and-line-comments-via-)'
- en: 'So far, the regular expression is still fairly hard to read. We can change
    that by adding spaces and line breaks. Since regular expression literals donâ€™t
    allow us to do that, we use the library [Regex+](https://github.com/slevithan/regex)
    which provides us with the template tag `regex`:'
  id: totrans-894
  prefs: []
  type: TYPE_NORMAL
  zh: åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæ­£åˆ™è¡¨è¾¾å¼ä»ç„¶ç›¸å½“éš¾ä»¥é˜…è¯»ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æ·»åŠ ç©ºæ ¼å’Œæ¢è¡Œç¬¦æ¥æ”¹å˜è¿™ä¸€ç‚¹ã€‚ç”±äºæ­£åˆ™è¡¨è¾¾å¼å­—é¢é‡ä¸å…è®¸æˆ‘ä»¬è¿™æ ·åšï¼Œæˆ‘ä»¬ä½¿ç”¨åº“ [Regex+](https://github.com/slevithan/regex)ï¼Œå®ƒä¸ºæˆ‘ä»¬æä¾›äº†æ¨¡æ¿æ ‡ç­¾
    `regex`ï¼š
- en: '[PRE166]'
  id: totrans-895
  prefs: []
  type: TYPE_PRE
  zh: '[PRE166]'
- en: The feature of ignoring whitespace in regular expression patterns is called
    *insignificant whitespace*. Additionally, we used a feature called *inline comments*
    â€“ which are started by hash symbols (`#`).
  id: totrans-896
  prefs: []
  type: TYPE_NORMAL
  zh: æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ä¸­å¿½ç•¥ç©ºç™½çš„åŠŸèƒ½è¢«ç§°ä¸º**ä¸é‡è¦çš„ç©ºç™½**ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜ä½¿ç”¨äº†ä¸€ä¸ªåä¸º**å†…è”æ³¨é‡Š**çš„åŠŸèƒ½â€”â€”å®ƒä»¥äº•å·ç¬¦å·ï¼ˆ`#`ï¼‰å¼€å§‹ã€‚
- en: 'Two observations:'
  id: totrans-897
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸¤ä¸ªè§‚å¯Ÿç»“æœï¼š
- en: Since all spaces are removed, we use the hex escape `\x20` to express that there
    is a space after `new` and after `get`.
  id: totrans-898
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ç”±äºæ‰€æœ‰ç©ºæ ¼éƒ½è¢«ç§»é™¤ï¼Œæˆ‘ä»¬ä½¿ç”¨åå…­è¿›åˆ¶è½¬ä¹‰ç¬¦ `\x20` æ¥è¡¨ç¤ºåœ¨ `new` å’Œ `get` ä¹‹åæœ‰ä¸€ä¸ªç©ºæ ¼ã€‚
- en: Alas, line comments are not allowed inside character classes. Thatâ€™s why the
    comment about square brackets comes before the character class.
  id: totrans-899
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å¾ˆé—æ†¾ï¼Œè¡Œæ³¨é‡Šä¸å…è®¸åœ¨å­—ç¬¦ç±»å†…éƒ¨ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå…³äºæ–¹æ‹¬å·çš„æ³¨é‡Šåœ¨å­—ç¬¦ç±»ä¹‹å‰ã€‚
- en: In the future, JavaScript may get built-in support for insignificant whitespace
    via a flag `/x` ([ECMAScript proposal](https://github.com/tc39/proposal-regexp-x-mode)).
  id: totrans-900
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æœªæ¥ï¼ŒJavaScript å¯èƒ½ä¼šé€šè¿‡æ ‡å¿— `/x`ï¼ˆ[ECMAScript ææ¡ˆ](https://github.com/tc39/proposal-regexp-x-mode)ï¼‰å†…ç½®å¯¹ä¸é‡è¦çš„ç©ºç™½çš„æ”¯æŒã€‚
- en: 'With the `regex` template tag, the following flags are always active:'
  id: totrans-901
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨ `regex` æ¨¡æ¿æ ‡ç­¾ï¼Œä»¥ä¸‹æ ‡å¿—å§‹ç»ˆå¤„äºæ´»åŠ¨çŠ¶æ€ï¼š
- en: Flag `/v`
  id: totrans-902
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ ‡å¿— `/v`
- en: Flag `/x` (emulated) enables insignificant whitespace and line comments via
    `#`.
  id: totrans-903
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ ‡å¿— `/x`ï¼ˆæ¨¡æ‹Ÿï¼‰é€šè¿‡ `#` å¯ç”¨ä¸é‡è¦çš„ç©ºç™½å’Œè¡Œæ³¨é‡Šã€‚
- en: 'Flag `/n` (emulated) enables *named capture only mode*, which prevents numbered
    groups from capturing. In other words: `(pattern)` is treated like `(?:pattern)`.'
  id: totrans-904
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ ‡å¿— `/n`ï¼ˆæ¨¡æ‹Ÿï¼‰å¯ç”¨**ä»…å‘½åæ•è·æ¨¡å¼**ï¼Œè¿™é˜²æ­¢äº†ç¼–å·ç»„è¿›è¡Œæ•è·ã€‚æ¢å¥è¯è¯´ï¼šï¼ˆæ¨¡å¼ï¼‰è¢«å¤„ç†æˆï¼ˆ?:æ¨¡å¼ï¼‰ã€‚
- en: '[46.19.5â€ƒTip: Write tests for your regular expression](#tip-write-tests-for-your-regular-expression)'
  id: totrans-905
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.19.5 æç¤ºï¼šä¸ºæ‚¨çš„æ­£åˆ™è¡¨è¾¾å¼ç¼–å†™æµ‹è¯•](#tip-write-tests-for-your-regular-expression)'
- en: 'To make sure that a regular expression works as intended, we can write tests
    for it. These are tests for `RE_API_SIGNATURE`:'
  id: totrans-906
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†ç¡®ä¿æ­£åˆ™è¡¨è¾¾å¼æŒ‰é¢„æœŸå·¥ä½œï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºå…¶ç¼–å†™æµ‹è¯•ã€‚è¿™äº›æ˜¯é’ˆå¯¹ `RE_API_SIGNATURE` çš„æµ‹è¯•ï¼š
- en: '[PRE167]'
  id: totrans-907
  prefs: []
  type: TYPE_PRE
  zh: '[PRE167]'
- en: '[46.19.6â€ƒTip: Mention examples in your documentation](#tip-mention-examples-in-your-documentation)'
  id: totrans-908
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.19.6 æç¤ºï¼šåœ¨æ‚¨çš„æ–‡æ¡£ä¸­æåŠç¤ºä¾‹](#tip-mention-examples-in-your-documentation)'
- en: 'Seeing strings that match, helps with understanding what a regular expression
    is supposed to do:'
  id: totrans-909
  prefs: []
  type: TYPE_NORMAL
  zh: çœ‹åˆ°åŒ¹é…çš„å­—ç¬¦ä¸²ï¼Œæœ‰åŠ©äºç†è§£æ­£åˆ™è¡¨è¾¾å¼åº”è¯¥åšä»€ä¹ˆï¼š
- en: '[PRE168]'
  id: totrans-910
  prefs: []
  type: TYPE_PRE
  zh: '[PRE168]'
- en: '* `get Map.prototype.size`'
  id: totrans-911
  prefs: []
  type: TYPE_NORMAL
  zh: '* `get Map.prototype.size`'
- en: '* `new Array(len = 0)`'
  id: totrans-912
  prefs: []
  type: TYPE_NORMAL
  zh: '* `new Array(len = 0)`'
- en: '* `Array.prototype.push(...items)`'
  id: totrans-913
  prefs: []
  type: TYPE_NORMAL
  zh: '* `Array.prototype.push(...items)`'
- en: '* `Map.prototype[Symbol.iterator]()`'
  id: totrans-914
  prefs: []
  type: TYPE_NORMAL
  zh: '* `Map.prototype[Symbol.iterator]()`'
- en: '* [PRE169]'
  id: totrans-915
  prefs: []
  type: TYPE_NORMAL
  zh: '* [PRE169]'
- en: Some documentation tools let us refer to unit tests in doc comments and show
    their code in the documentation. Thatâ€™s a good alternative to what we have done
    above.
  id: totrans-916
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€äº›æ–‡æ¡£å·¥å…·å…è®¸æˆ‘ä»¬åœ¨æ–‡æ¡£æ³¨é‡Šä¸­å¼•ç”¨å•å…ƒæµ‹è¯•ï¼Œå¹¶åœ¨æ–‡æ¡£ä¸­æ˜¾ç¤ºå®ƒä»¬çš„ä»£ç ã€‚è¿™æ¯”æˆ‘ä»¬ä¸Šé¢æ‰€åšçš„æ˜¯ä¸€ç§å¥½çš„æ›¿ä»£æ–¹æ¡ˆã€‚
- en: '[46.19.7â€ƒBonus tip: Use interpolation to reuse patterns](#bonus-tip-use-interpolation-to-reuse-patterns)'
  id: totrans-917
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.19.7 å¥–åŠ±æç¤ºï¼šä½¿ç”¨æ’å€¼æ¥é‡ç”¨æ¨¡å¼](#bonus-tip-use-interpolation-to-reuse-patterns)'
- en: 'The Regex+ library lets us interpolate regular expression fragments (â€œpatternsâ€),
    which helps with reuse. The following example defines a simple markup syntax that
    is reminiscent of HTML:'
  id: totrans-918
  prefs: []
  type: TYPE_NORMAL
  zh: Regex+ åº“å…è®¸æˆ‘ä»¬æ’å€¼æ­£åˆ™è¡¨è¾¾å¼ç‰‡æ®µï¼ˆâ€œæ¨¡å¼â€ï¼‰ï¼Œè¿™æœ‰åŠ©äºé‡ç”¨ã€‚ä»¥ä¸‹ç¤ºä¾‹å®šä¹‰äº†ä¸€ç§ç®€å•çš„æ ‡è®°è¯­æ³•ï¼Œå®ƒè®©äººè”æƒ³åˆ° HTMLï¼š
- en: '[PRE170]'
  id: totrans-919
  prefs: []
  type: TYPE_PRE
  zh: '[PRE170]'
- en: The regular expression `TAG` uses the regular expression fragments `NAME` and
    `ARGS` twice â€“Â which reduces redundancy.
  id: totrans-920
  prefs: []
  type: TYPE_NORMAL
  zh: æ­£åˆ™è¡¨è¾¾å¼ `TAG` ä½¿ç”¨äº†æ­£åˆ™è¡¨è¾¾å¼ç‰‡æ®µ `NAME` å’Œ `ARGS` ä¸¤æ¬¡â€”â€”è¿™å‡å°‘äº†å†—ä½™ã€‚
- en: '[46.19.8â€ƒBonus tip: insignificant whitespace without a library](#bonus-tip-insignificant-whitespace-without-a-library)'
  id: totrans-921
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.19.8 å¥–åŠ±æç¤ºï¼šæ— éœ€åº“çš„ä¸é‡è¦ç©ºç™½](#bonus-tip-insignificant-whitespace-without-a-library)'
- en: 'With the following trick, we donâ€™t need a library to write a regular expression
    with insignificant whitespace:'
  id: totrans-922
  prefs: []
  type: TYPE_NORMAL
  zh: é€šè¿‡ä»¥ä¸‹æŠ€å·§ï¼Œæˆ‘ä»¬ä¸éœ€è¦åº“å°±å¯ä»¥ç¼–å†™å…·æœ‰ä¸é‡è¦çš„ç©ºç™½æ ¼å¼çš„æ­£åˆ™è¡¨è¾¾å¼ï¼š
- en: '[PRE171]'
  id: totrans-923
  prefs: []
  type: TYPE_PRE
  zh: '[PRE171]'
- en: How does this code work?
  id: totrans-924
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ®µä»£ç æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ
- en: '[`String.raw`](ch_template-literals.html#raw-string-literals) enables two things:'
  id: totrans-925
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[String.raw](ch_template-literals.html#raw-string-literals) å¯ç”¨ä¸¤ä»¶äº‹ï¼š'
- en: We donâ€™t have to escape regular expression backslashes for this kind of string
    literal.
  id: totrans-926
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬ä¸éœ€è¦ä¸ºè¿™ç§å­—ç¬¦ä¸²å­—é¢é‡è½¬ä¹‰æ­£åˆ™è¡¨è¾¾å¼åæ–œæ ã€‚
- en: The regular expression can span multiple lines.
  id: totrans-927
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ­£åˆ™è¡¨è¾¾å¼å¯ä»¥è·¨è¶Šå¤šè¡Œã€‚
- en: '`.replaceAll()` removes all whitespace (spaces, tabs, line breaks, etc.) so
    that the end result looks almost like the initial version of the regular expression.
    There is one difference, though: Since literal spaces are removed, we have to
    find a different way to specify that there is a space after `new` and after `get`.
    One option is the hex escape `\x20`: hexadecimal 20 (decimal 32) is the code point
    SPACE.'
  id: totrans-928
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`.replaceAll()` ç§»é™¤æ‰€æœ‰ç©ºç™½å­—ç¬¦ï¼ˆç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢è¡Œç¬¦ç­‰ï¼‰ï¼Œä½¿å¾—æœ€ç»ˆç»“æœçœ‹èµ·æ¥å‡ ä¹ä¸æ­£åˆ™è¡¨è¾¾å¼çš„åˆå§‹ç‰ˆæœ¬ç›¸åŒã€‚ä¸è¿‡æœ‰ä¸€ä¸ªåŒºåˆ«ï¼šç”±äºå­—é¢ç©ºæ ¼è¢«ç§»é™¤ï¼Œæˆ‘ä»¬ä¸å¾—ä¸æ‰¾åˆ°ä¸€ç§ä¸åŒçš„æ–¹å¼æ¥æŒ‡å®š
    `new` å’Œ `get` åé¢æœ‰ä¸€ä¸ªç©ºæ ¼ã€‚ä¸€ä¸ªé€‰é¡¹æ˜¯åå…­è¿›åˆ¶è½¬ä¹‰ç¬¦ `\x20`ï¼šåå…­è¿›åˆ¶20ï¼ˆåè¿›åˆ¶32ï¼‰æ˜¯ç©ºæ ¼çš„ä»£ç ç‚¹ã€‚'
- en: 'We can even emulate inline comments like this:'
  id: totrans-929
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬ç”šè‡³å¯ä»¥åƒè¿™æ ·æ¨¡æ‹Ÿå†…è”æ³¨é‡Šï¼š
- en: '[PRE172]'
  id: totrans-930
  prefs: []
  type: TYPE_PRE
  zh: '[PRE172]'
- en: Alas, itâ€™s more syntactically noisy than Iâ€™d like.
  id: totrans-931
  prefs: []
  type: TYPE_NORMAL
  zh: å¾ˆé—æ†¾ï¼Œå®ƒçš„è¯­æ³•æ¯”æˆ‘æƒ³çš„è¦å¤æ‚ã€‚
- en: '[46.19.9â€ƒConclusion: This is how regular expressions are meant to be written](#conclusion-this-is-how-regular-expressions-are-meant-to-be-written)'
  id: totrans-932
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.19.9â€ƒç»“è®ºï¼šè¿™æ˜¯æ­£åˆ™è¡¨è¾¾å¼åº”è¯¥è¢«ç¼–å†™çš„æ–¹å¼](#conclusion-this-is-how-regular-expressions-are-meant-to-be-written)'
- en: 'One reason why many people donâ€™t like regular expressions is that they find
    them difficult to read. However, that is much less of a problem with insignificant
    whitespace and comments. Iâ€™d argue that is the proper way of writing regular expressions:
    Think what JavaScript code would look like if we had to write it without whitespace
    and comments.'
  id: totrans-933
  prefs: []
  type: TYPE_NORMAL
  zh: è®¸å¤šäººä¸å–œæ¬¢æ­£åˆ™è¡¨è¾¾å¼çš„ä¸€ä¸ªåŸå› å°±æ˜¯å®ƒä»¬å‘ç°æ­£åˆ™è¡¨è¾¾å¼éš¾ä»¥é˜…è¯»ã€‚ç„¶è€Œï¼Œåœ¨ä¸é‡è¦çš„ç©ºç™½å’Œæ³¨é‡Šçš„æƒ…å†µä¸‹ï¼Œè¿™ä¸ªé—®é¢˜å°±å°å¾—å¤šã€‚æˆ‘è®¤ä¸ºè¿™æ˜¯ç¼–å†™æ­£åˆ™è¡¨è¾¾å¼çš„æ­£ç¡®æ–¹å¼ï¼šæƒ³æƒ³å¦‚æœæ²¡æœ‰ç©ºç™½å’Œæ³¨é‡Šï¼ŒJavaScript
    ä»£ç ä¼šæ˜¯ä»€ä¹ˆæ ·å­ã€‚
- en: '[46.20â€ƒQuick reference: regular expression functionality](#quickref-RegExp)'
  id: totrans-934
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[46.20â€ƒå¿«é€Ÿå‚è€ƒï¼šæ­£åˆ™è¡¨è¾¾å¼åŠŸèƒ½](#quickref-RegExp)'
- en: '[46.20.1â€ƒSummary: `.global` (`/g`) and `.sticky` (`/y`)](#summary-flags-global-sticky)'
  id: totrans-935
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.20.1â€ƒæ€»ç»“ï¼š`.global` (`/g`) å’Œ `.sticky` (`/y`)](#summary-flags-global-sticky)'
- en: 'The following two methods are completely unaffected by `/g` and `/y`:'
  id: totrans-936
  prefs: []
  type: TYPE_NORMAL
  zh: ä»¥ä¸‹ä¸¤ä¸ªæ–¹æ³•å®Œå…¨ä¸å— `/g` å’Œ `/y` çš„å½±å“ï¼š
- en: '`String.prototype.search()`'
  id: totrans-937
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`String.prototype.search()`'
- en: '`String.prototype.split()`'
  id: totrans-938
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`String.prototype.split()`'
- en: 'This table explains how the remaining regular-expression-related methods are
    affected by these two flags (if neither `/g` nor `/y` are there, `regExp.lastIndex`
    is always ignored):'
  id: totrans-939
  prefs: []
  type: TYPE_NORMAL
  zh: æ­¤è¡¨è§£é‡Šäº†å‰©ä½™çš„æ­£åˆ™è¡¨è¾¾å¼ç›¸å…³æ–¹æ³•å¦‚ä½•å—è¿™ä¸¤ä¸ªæ ‡å¿—çš„å½±å“ï¼ˆå¦‚æœæ—¢æ²¡æœ‰ `/g` ä¹Ÿæ²¡æœ‰ `/y`ï¼Œåˆ™ `regExp.lastIndex` æ€»æ˜¯ä¼šè¢«å¿½ç•¥ï¼‰ï¼š
- en: '|  | Flags | Honors `.lastIndex`? | Updates `.lastIndex`? |'
  id: totrans-940
  prefs: []
  type: TYPE_TB
  zh: '|  | æ ‡å¿— | å°Šé‡ `.lastIndex`ï¼Ÿ | æ›´æ–° `.lastIndex`ï¼Ÿ |'
- en: '| --- | --- | --- | --- |'
  id: totrans-941
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- | --- |'
- en: '| `s.match` | `/y` | âœ” | âœ” |'
  id: totrans-942
  prefs: []
  type: TYPE_TB
  zh: '| `s.match` | `/y` | âœ” | âœ” |'
- en: '|  | `/g /gy` | âœ˜ | 0 |'
  id: totrans-943
  prefs: []
  type: TYPE_TB
  zh: '|  | `/g /gy` | âœ˜ | 0 |'
- en: '| `s.matchAll` | `/g /gy` | âœ” | âœ˜ |'
  id: totrans-944
  prefs: []
  type: TYPE_TB
  zh: '| `s.matchAll` | `/g /gy` | âœ” | âœ˜ |'
- en: '| `r.exec` | `/g /y /gy` | âœ” | âœ” |'
  id: totrans-945
  prefs: []
  type: TYPE_TB
  zh: '| `r.exec` | `/g /y /gy` | âœ” | âœ” |'
- en: '| `s.replace` | `/y` | âœ” | âœ” |'
  id: totrans-946
  prefs: []
  type: TYPE_TB
  zh: '| `s.replace` | `/y` | âœ” | âœ” |'
- en: '|  | `/g /gy` | âœ˜ | 0 |'
  id: totrans-947
  prefs: []
  type: TYPE_TB
  zh: '|  | `/g /gy` | âœ˜ | 0 |'
- en: '| `s.replaceAll` | `/g /gy` | âœ˜ | 0 |'
  id: totrans-948
  prefs: []
  type: TYPE_TB
  zh: '| `s.replaceAll` | `/g /gy` | âœ˜ | 0 |'
- en: '| `r.test` | `/g /y /gy` | âœ” | âœ” |'
  id: totrans-949
  prefs: []
  type: TYPE_TB
  zh: '| `r.test` | `/g /y /gy` | âœ” | âœ” |'
- en: '![Icon â€œexternalâ€](../Images/38e6ff55e8d602659f3cdb8893e63f62.png)â€‚**A longer
    overview**'
  id: totrans-950
  prefs: []
  type: TYPE_NORMAL
  zh: '![å›¾æ ‡â€œå¤–éƒ¨â€](../Images/38e6ff55e8d602659f3cdb8893e63f62.png)â€‚**æ›´é•¿çš„æ¦‚è¿°**'
- en: I posted [a longer table](https://gist.github.com/rauschma/5c90e6c19923611521a61e199d8cb15b)
    online that was created via a Node.js script.
  id: totrans-951
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘åœ¨ç½‘ä¸Šå‘å¸ƒäº†ä¸€ä¸ªæ›´é•¿çš„è¡¨æ ¼ï¼ˆ[a longer table](https://gist.github.com/rauschma/5c90e6c19923611521a61e199d8cb15b)ï¼‰ï¼Œè¯¥è¡¨æ ¼æ˜¯é€šè¿‡
    Node.js è„šæœ¬åˆ›å»ºçš„ã€‚
- en: '[46.20.2â€ƒ`String.prototype.*`: matching and searching](#stringprototype-matching-and-searching)'
  id: totrans-952
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.20.2â€ƒ`String.prototype.*`: åŒ¹é…å’Œæœç´¢](#stringprototype-matching-and-searching)'
- en: '`String.prototype.match(regExpOrString)`'
  id: totrans-953
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`String.prototype.match(regExpOrString)`'
- en: ES3 | `/y` honors and updates `.lastIndex` | `/g /gy` ignore and reset `.lastIndex`
  id: totrans-954
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: ES3 | `/y` å°Šé‡å¹¶æ›´æ–° `.lastIndex` | `/g /gy` å¿½ç•¥å¹¶é‡ç½® `.lastIndex`
- en: (1 of 3) `regExpOrString` is a string.
  id: totrans-955
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: (1 of 3) `regExpOrString` æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚
- en: If `regExpOrString` is a string, it defines a pattern for a regular expression
    without `/g` (think parameter of `new RegExp()`). That regular expression is used
    as explained in the next list item.
  id: totrans-956
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: å¦‚æœ `regExpOrString` æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå®ƒå®šä¹‰äº†ä¸€ä¸ªæ²¡æœ‰ `/g` çš„æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ï¼ˆæƒ³æƒ³ `new RegExp()` çš„å‚æ•°ï¼‰ã€‚è¯¥æ­£åˆ™è¡¨è¾¾å¼å°†æŒ‰ä¸‹ä¸€é¡¹ä¸­æ‰€è¿°ä½¿ç”¨ã€‚
- en: (2 of 3) `regExpOrString` is a RegExp without `/g`.
  id: totrans-957
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: (2 of 3) `regExpOrString` æ˜¯ä¸€ä¸ªæ²¡æœ‰ `/g` çš„ RegExpã€‚
- en: '[PRE173]'
  id: totrans-958
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE173]'
- en: If `regExpOrString` is a regular expression with flag `/g` not set, then `.match()`
    returns the first match for `regExpOrString` within the string. Or `null` if there
    is no match.
  id: totrans-959
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: å¦‚æœ `regExpOrString` æ˜¯ä¸€ä¸ªæ²¡æœ‰è®¾ç½® `/g` æ ‡å¿—çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œé‚£ä¹ˆ `.match()` è¿”å›å­—ç¬¦ä¸²ä¸­ `regExpOrString`
    çš„ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹ã€‚å¦‚æœæ²¡æœ‰åŒ¹é…é¡¹ï¼Œåˆ™è¿”å› `null`ã€‚
- en: Numbered capture groups become Array elements (which is why `RegExpMatchArray`
    extends `Array`).
  id: totrans-960
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: ç¼–å·æ•è·ç»„æˆä¸ºæ•°ç»„å…ƒç´ ï¼ˆè¿™å°±æ˜¯ä¸ºä»€ä¹ˆ `RegExpMatchArray` æ‰©å±•äº† `Array`ï¼‰ã€‚
- en: '[Named capture groups](#named-capture-groups) ^(ES2018) become properties of
    `.groups`.'
  id: totrans-961
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[å‘½åæ•è·ç»„](#named-capture-groups)^(ES2018) æˆä¸º `.groups` çš„å±æ€§ã€‚'
- en: 'Examples:'
  id: totrans-962
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: ç¤ºä¾‹ï¼š
- en: '[PRE174]'
  id: totrans-963
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE174]'
- en: (3 of 3) `regExpOrString` is RegExp with `/g`.
  id: totrans-964
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: (3 of 3) `regExpOrString` æ˜¯å¸¦æœ‰ `/g` çš„ RegExpã€‚
- en: '[PRE175]'
  id: totrans-965
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE175]'
- en: If flag `/g` of `regExpOrString` is set, `.match()` returns either an Array
    with all matches or `null` if there was no match.
  id: totrans-966
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: å¦‚æœ `regExpOrString` çš„ `/g` æ ‡å¿—è¢«è®¾ç½®ï¼Œ`.match()` è¿”å›ä¸€ä¸ªåŒ…å«æ‰€æœ‰åŒ¹é…é¡¹çš„æ•°ç»„æˆ–å¦‚æœæ²¡æœ‰åŒ¹é…é¡¹ï¼Œåˆ™è¿”å› `null`ã€‚
- en: '[PRE176]'
  id: totrans-967
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE176]'
- en: '`String.prototype.matchAll(regExp)`'
  id: totrans-968
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`String.prototype.matchAll(regExp)`'
- en: ES2020 | `/g /gy` honor and preserve `.lastIndex`
  id: totrans-969
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: ES2020 | `/g /gy` å°Šé‡å¹¶ä¿ç•™ `.lastIndex`
- en: '[PRE177]'
  id: totrans-970
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE177]'
- en: Throws an exception if flag `/g` is not set.
  id: totrans-971
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: å¦‚æœæ²¡æœ‰è®¾ç½®æ ‡å¿— `/g`ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ã€‚
- en: 'Returns an iterator over zero or more matches. Per match:'
  id: totrans-972
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: è¿”å›é›¶ä¸ªæˆ–å¤šä¸ªåŒ¹é…çš„è¿­ä»£å™¨ã€‚æ¯ä¸ªåŒ¹é…é¡¹ï¼š
- en: Numbered capture groups become Array elements (which is why `RegExpMatchArray`
    extends `Array`).
  id: totrans-973
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'ç¼–å·æ•è·ç»„æˆä¸ºæ•°ç»„å…ƒç´ ï¼ˆè¿™å°±æ˜¯ä¸ºä»€ä¹ˆ `RegExpMatchArray` æ‰©å±• `Array`ï¼‰ã€‚ '
- en: '[Named capture groups](#named-capture-groups) ^(ES2018) become properties of
    `.groups`.'
  id: totrans-974
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[å‘½åæ•è·ç»„](#named-capture-groups) ^ (ES2018) æˆä¸º `.groups` çš„å±æ€§ã€‚'
- en: 'Example:'
  id: totrans-975
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: ç¤ºä¾‹ï¼š
- en: '[PRE178]'
  id: totrans-976
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE178]'
- en: '`String.prototype.search(regExpOrString)`'
  id: totrans-977
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`String.prototype.search(regExpOrString)`'
- en: ES3 | Ignores `.lastIndex`
  id: totrans-978
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: ES3 | å¿½ç•¥ `.lastIndex`
- en: Returns the index at which `regExpOrString` occurs within the string. If `regExpOrString`
    is a string, it is used to create a regular expression (think parameter of `new
    RegExp()`).
  id: totrans-979
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: è¿”å› `regExpOrString` åœ¨å­—ç¬¦ä¸²ä¸­å‡ºç°çš„ç´¢å¼•ã€‚å¦‚æœ `regExpOrString` æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå®ƒè¢«ç”¨æ¥åˆ›å»ºä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼ˆæƒ³æƒ³ `new
    RegExp()` çš„å‚æ•°ï¼‰ã€‚
- en: '[PRE179]'
  id: totrans-980
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE179]'
- en: '[46.20.3â€ƒ`String.prototype.*`: splitting and replacing](#stringprototype-splitting-and-replacing)'
  id: totrans-981
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.20.3â€ƒ`String.prototype.*`: åˆ†å‰²å’Œæ›¿æ¢](#stringprototype-splitting-and-replacing)'
- en: '`String.prototype.split(separator, limit?)`'
  id: totrans-982
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`String.prototype.split(separator, limit?)`'
- en: ES3 | Ignores `.lastIndex`
  id: totrans-983
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: ES3 | å¿½ç•¥ `.lastIndex`
- en: '[PRE180]'
  id: totrans-984
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE180]'
- en: The separator can be a string (which is interpreted as plain text, not as a
    regular expression pattern) or a regular expression.
  id: totrans-985
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: åˆ†éš”ç¬¦å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆå®ƒè¢«è§£é‡Šä¸ºçº¯æ–‡æœ¬ï¼Œè€Œä¸æ˜¯æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ï¼‰æˆ–æ­£åˆ™è¡¨è¾¾å¼ã€‚
- en: 'Examples:'
  id: totrans-986
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: ç¤ºä¾‹ï¼š
- en: '[PRE181]'
  id: totrans-987
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE181]'
- en: 'If we want the separators to be part of the returned string fragments, we can
    use a regular expression with a [lookbehind assertion](#regexp-lookbehind-assertions)
    or a [lookahead assertion](#regexp-lookahead-assertions):'
  id: totrans-988
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: å¦‚æœæˆ‘ä»¬å¸Œæœ›åˆ†éš”ç¬¦æˆä¸ºè¿”å›çš„å­—ç¬¦ä¸²ç‰‡æ®µçš„ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¸¦æœ‰ [å‘åæŸ¥æ‰¾æ–­è¨€](#regexp-lookbehind-assertions) æˆ– [å‘å‰æŸ¥æ‰¾æ–­è¨€](#regexp-lookahead-assertions)
    çš„æ­£åˆ™è¡¨è¾¾å¼ï¼š
- en: '[PRE182]'
  id: totrans-989
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE182]'
- en: '**Pitfall:** `.split('''')` splits into JavaScript characters, but we usually
    want to split into grapheme clusters or at least Unicode code points. Therefore,
    itâ€™s better to use `Array.from()` or `Intl.Segmenter` for splitting. For more
    information, see [â€œAtoms of text: code points, JavaScript characters, grapheme
    clustersâ€ (Â§22.7)](ch_strings.html#atoms-of-text).'
  id: totrans-990
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**é™·é˜±**ï¼š`.split('''')` å°†åˆ†å‰²æˆ JavaScript å­—ç¬¦ï¼Œä½†é€šå¸¸æˆ‘ä»¬å¸Œæœ›åˆ†å‰²æˆå›¾å½¢ç°‡æˆ–è‡³å°‘ Unicode ä»£ç ç‚¹ã€‚å› æ­¤ï¼Œæœ€å¥½ä½¿ç”¨
    `Array.from()` æˆ– `Intl.Segmenter` è¿›è¡Œåˆ†å‰²ã€‚æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… [â€œæ–‡æœ¬çš„åŸå­ï¼šä»£ç ç‚¹ã€JavaScript å­—ç¬¦ã€å›¾å½¢ç°‡â€ï¼ˆÂ§22.7ï¼‰](ch_strings.html#atoms-of-text)ã€‚'
- en: '`String.prototype.replace(searchValue, replaceValue)`'
  id: totrans-991
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`String.prototype.replace(searchValue, replaceValue)`'
- en: ES3 | `/y` honors and updates `.lastIndex` | `/g /gy` ignore and reset `.lastIndex`
  id: totrans-992
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: ES3 | `/y` å°Šé‡å¹¶æ›´æ–° `.lastIndex` | `/g /gy` å¿½ç•¥å¹¶é‡ç½® `.lastIndex`
- en: For more information on this method, see [its section](#String.prototype.replace)
    earlier in this chapter.
  id: totrans-993
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: å…³äºæ­¤æ–¹æ³•çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…æœ¬ç« å‰é¢çš„ [å…¶éƒ¨åˆ†](#String.prototype.replace)ã€‚
- en: (1 of 2) `searchValue` is string or RegExp without `/g`.
  id: totrans-994
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: (1 of 2) `searchValue` æ˜¯æ²¡æœ‰ `/g` çš„å­—ç¬¦ä¸²æˆ– RegExpã€‚
- en: '[PRE183]'
  id: totrans-995
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE183]'
- en: 'Works similarly to `.replaceAll()`, but only replaces the first occurrence:'
  id: totrans-996
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: ä¸ `.replaceAll()` çš„å·¥ä½œæ–¹å¼ç±»ä¼¼ï¼Œä½†åªæ›¿æ¢ç¬¬ä¸€ä¸ªå‡ºç°ï¼š
- en: '[PRE184]'
  id: totrans-997
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE184]'
- en: (1 of 2) `searchValue` is RegExp with `/g`.
  id: totrans-998
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: (1 of 2) `searchValue` æ˜¯å¸¦æœ‰ `/g` çš„ RegExpã€‚
- en: '[PRE185]'
  id: totrans-999
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE185]'
- en: 'Works exactly like `.replaceAll()`:'
  id: totrans-1000
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: ä¸ `.replaceAll()` å®Œå…¨ç›¸åŒï¼š
- en: '[PRE186]'
  id: totrans-1001
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE186]'
- en: '`String.prototype.replaceAll(searchValue, replaceValue)`'
  id: totrans-1002
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`String.prototype.replaceAll(searchValue, replaceValue)`'
- en: ES2021 | `/g /gy` ignore and reset `.lastIndex`
  id: totrans-1003
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: ES2021 | `/g /gy` å¿½ç•¥å¹¶é‡ç½® `.lastIndex`
- en: (1 of 2) `replaceValue` is a string.
  id: totrans-1004
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: (1 of 2) `replaceValue` æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚
- en: '[PRE187]'
  id: totrans-1005
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE187]'
- en: Replaces all matches of `searchValue` with `replaceValue`. If `searchValue`
    is a regular expression without flag `/g`, a `TypeError` is thrown.
  id: totrans-1006
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: å°† `searchValue` çš„æ‰€æœ‰åŒ¹é…é¡¹æ›¿æ¢ä¸º `replaceValue`ã€‚å¦‚æœ `searchValue` æ˜¯æ²¡æœ‰ `/g` æ ‡å¿—çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œåˆ™æŠ›å‡º
    `TypeError`ã€‚
- en: '[PRE188]'
  id: totrans-1007
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE188]'
- en: 'Special characters in `replaceValue` are:'
  id: totrans-1008
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`replaceValue` ä¸­çš„ç‰¹æ®Šå­—ç¬¦åŒ…æ‹¬ï¼š'
- en: '`$$`: becomes `$`'
  id: totrans-1009
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`$$`: å˜æˆ `$`'
- en: '`$n`: becomes the capture of numbered group `n` (alas, `$0` stands for the
    string `''$0''`, it does not refer to the complete match)'
  id: totrans-1010
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`$n`: å˜æˆç¼–å·ç»„ `n` çš„æ•è·ï¼ˆé—æ†¾çš„æ˜¯ï¼Œ`$0` ä»£è¡¨å­—ç¬¦ä¸² `''$0''`ï¼Œå®ƒä¸æŒ‡å‘å®Œæ•´åŒ¹é…ï¼‰'
- en: '`$&`: becomes the complete match'
  id: totrans-1011
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`$&`: å˜æˆå®Œæ•´åŒ¹é…'
- en: '`` $` ``: becomes everything before the match'
  id: totrans-1012
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`` $` ``: å˜æˆåŒ¹é…é¡¹ä¹‹å‰çš„å†…å®¹'
- en: '`$''`: becomes everything after the match'
  id: totrans-1013
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`$''`: å˜æˆåŒ¹é…é¡¹ä¹‹åçš„å†…å®¹'
- en: '`$<name>` becomes the capture of named group `name`'
  id: totrans-1014
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`$<name>` å˜æˆå‘½åç»„ `name` çš„æ•è·'
- en: (2 of 2) `replaceValue` is a function.
  id: totrans-1015
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: (2 of 2) `replaceValue` æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚
- en: '[PRE189]'
  id: totrans-1016
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE189]'
- en: 'If the second parameter is a function, occurrences are replaced with the strings
    it returns. Its parameters `args` are:'
  id: totrans-1017
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: å¦‚æœç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œåˆ™å‡ºç°è¢«å…¶è¿”å›çš„å­—ç¬¦ä¸²æ›¿æ¢ã€‚å…¶å‚æ•° `args` æ˜¯ï¼š
- en: '`matched: string`. The complete match'
  id: totrans-1018
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`matched: string`. å®Œæ•´åŒ¹é…'
- en: '`g1: string|undefined`. The capture of numbered group 1'
  id: totrans-1019
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`g1: string|undefined`ã€‚ç¼–å·ç»„ 1 çš„æ•è·'
- en: '`g2: string|undefined`. The capture of numbered group 2'
  id: totrans-1020
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`g2: string|undefined`ã€‚ç¼–å·ç»„ 2 çš„æ•è·'
- en: (Etc.)
  id: totrans-1021
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: (ç­‰ç­‰ã€‚)
- en: '`offset: number`. Where was the match found in the input string?'
  id: totrans-1022
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`offset: number`ã€‚åŒ¹é…åœ¨è¾“å…¥å­—ç¬¦ä¸²ä¸­çš„ä½ç½®ï¼Ÿ'
- en: '`input: string`. The whole input string'
  id: totrans-1023
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`input: string`ã€‚æ•´ä¸ªè¾“å…¥å­—ç¬¦ä¸²'
- en: '[PRE190]'
  id: totrans-1024
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE190]'
- en: '[Named capture groups](#named-capture-groups) (ES2018) are supported, too.
    If there are any, an argument is added at the end with an object whose properties
    contain the captures:'
  id: totrans-1025
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[å‘½åæ•è·ç»„](#named-capture-groups) (ES2018) ä¹Ÿå—æ”¯æŒã€‚å¦‚æœæœ‰ï¼Œåˆ™ä¼šåœ¨æœ«å°¾æ·»åŠ ä¸€ä¸ªå¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œè¯¥å¯¹è±¡çš„å±æ€§åŒ…å«æ•è·ï¼š'
- en: '[PRE191]'
  id: totrans-1026
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE191]'
- en: '[46.20.4â€ƒ`RegExp.prototype.*`](#regexpprototype)'
  id: totrans-1027
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[46.20.4â€ƒ`RegExp.prototype.*`](#regexpprototype)'
- en: '`RegExp.prototype.test(string)`'
  id: totrans-1028
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`RegExp.prototype.test(string)`'
- en: ES3 | `/g /y /gy` honor and update `.lastIndex`
  id: totrans-1029
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: ES3 | `/g /y /gy` å°Šé‡å¹¶æ›´æ–° `.lastIndex`
- en: '[PRE192]'
  id: totrans-1030
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE192]'
- en: 'Returns `true` if the receiver matches `string`:'
  id: totrans-1031
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: å¦‚æœæ¥æ”¶å™¨ä¸ `string` åŒ¹é…ï¼Œåˆ™è¿”å› `true`ï¼š
- en: '[PRE193]'
  id: totrans-1032
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE193]'
- en: '**Pitfall:** Donâ€™t use this method with a regular expression that has flag
    `/g`. Then `regExp.test()` starts matching at `regExp.lastIndex` and also updates
    that property.'
  id: totrans-1033
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**é™·é˜±ï¼š** ä¸è¦ä½¿ç”¨å¸¦æœ‰æ ‡å¿— `/g` çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚ç„¶å `regExp.test()` å°†ä» `regExp.lastIndex` å¼€å§‹åŒ¹é…ï¼Œå¹¶æ›´æ–°è¯¥å±æ€§ã€‚'
- en: '`RegExp.prototype.exec(string)`'
  id: totrans-1034
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`RegExp.prototype.exec(string)`'
- en: ES3 | `/g /y /gy` honor and update `.lastIndex`
  id: totrans-1035
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: ES3 | `/g /y /gy` å°Šé‡å¹¶æ›´æ–° `.lastIndex`
- en: (1 of 2) Receiver is a RegExp without `/g`.
  id: totrans-1036
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: (1 of 2) æ¥æ”¶å™¨æ˜¯ä¸€ä¸ªæ²¡æœ‰ `/g` çš„ RegExpã€‚
- en: Without flag `/g`, `regExp.exec(string)` works like [`string.match(regExp)`](#qref-String.prototype.match)
    â€“ it returns a single match object.
  id: totrans-1037
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: æ²¡æœ‰æ ‡å¿— `/g`ï¼Œ`regExp.exec(string)` çš„è¡Œä¸ºç±»ä¼¼äº `string.match(regExp)`ï¼ˆ#qref-String.prototype.matchï¼‰
    - å®ƒè¿”å›ä¸€ä¸ªå•ç‹¬çš„åŒ¹é…å¯¹è±¡ã€‚
- en: (2 of 2) Receiver is a RegExp with `/g`.
  id: totrans-1038
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: (2 of 2) æ¥æ”¶å™¨æ˜¯ä¸€ä¸ªå¸¦æœ‰ `/g` çš„ RegExpã€‚
- en: '[PRE194]'
  id: totrans-1039
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE194]'
- en: If `regExp` has flag `/g` then `regExp.exec(str)` returns an object for the
    first match starting at `regExp.lastIndex` â€“ or `null` if it canâ€™t find a match.
    It also updates `regExp.lastIndex` so that it points to the index after the match.
  id: totrans-1040
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: å¦‚æœ `regExp` æœ‰æ ‡å¿— `/g`ï¼Œåˆ™ `regExp.exec(str)` è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä» `regExp.lastIndex` å¼€å§‹çš„ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹
    - å¦‚æœæ‰¾ä¸åˆ°åŒ¹é…é¡¹ï¼Œåˆ™è¿”å› `null`ã€‚å®ƒè¿˜ä¼šæ›´æ–° `regExp.lastIndex`ï¼Œä½¿å…¶æŒ‡å‘åŒ¹é…ä¹‹åçš„ç´¢å¼•ã€‚
- en: Numbered capture groups become Array elements (which is why `RegExpExecArray`
    extends `Array`).
  id: totrans-1041
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: ç¼–å·æ•è·ç»„æˆä¸ºæ•°ç»„å…ƒç´ ï¼ˆè¿™å°±æ˜¯ä¸ºä»€ä¹ˆ `RegExpExecArray` æ‰©å±•äº† `Array`ï¼‰ã€‚
- en: '[Named capture groups](#named-capture-groups) ^(ES2018) become properties of
    `.groups`.'
  id: totrans-1042
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[å‘½åæ•è·ç»„](#named-capture-groups) (ES2018) æˆä¸º `.groups` çš„å±æ€§ã€‚'
- en: 'Examples:'
  id: totrans-1043
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: ç¤ºä¾‹ï¼š
- en: '[PRE195]'
  id: totrans-1044
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE195]'
