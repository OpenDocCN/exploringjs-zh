- en: 21â€ƒUnicode â€“ a brief introduction (advanced)
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 21 Unicode â€“ ç®€è¦ä»‹ç»ï¼ˆé«˜çº§ï¼‰
- en: åŸæ–‡ï¼š[https://exploringjs.com/js/book/ch_unicode.html](https://exploringjs.com/js/book/ch_unicode.html)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åŸæ–‡ï¼š[https://exploringjs.com/js/book/ch_unicode.html](https://exploringjs.com/js/book/ch_unicode.html)
- en: '[21.1â€ƒCode points vs. code units](#unicode-code-points-vs-code-units)'
  id: totrans-2
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[21.1 ç ç‚¹ä¸ç ä½](#unicode-code-points-vs-code-units)'
- en: '[21.1.1â€ƒCode points](#unicode-code-points)'
  id: totrans-3
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[21.1.1 ç ç‚¹](#unicode-code-points)'
- en: '[21.1.2â€ƒEncoding Unicode code points: UTF-32, UTF-16, UTF-8](#encoding-unicode-code-points-utf32-utf16-utf8)'
  id: totrans-4
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[21.1.2 ç¼–ç  Unicode ç ç‚¹ï¼šUTF-32ï¼ŒUTF-16ï¼ŒUTF-8](#encoding-unicode-code-points-utf32-utf16-utf8)'
- en: '[21.2â€ƒEncodings used in web development: UTF-16 and UTF-8](#utf-in-web-dev)'
  id: totrans-5
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[21.2 ç½‘ç»œå¼€å‘ä¸­ä½¿ç”¨çš„ç¼–ç ï¼šUTF-16 å’Œ UTF-8](#utf-in-web-dev)'
- en: '[21.2.1â€ƒSource code internally: UTF-16](#source-code-internally-utf16)'
  id: totrans-6
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[21.2.1 å†…éƒ¨æºä»£ç ï¼šUTF-16](#source-code-internally-utf16)'
- en: '[21.2.2â€ƒStrings: UTF-16](#strings-utf16)'
  id: totrans-7
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[21.2.2 å­—ç¬¦ä¸²ï¼šUTF-16](#strings-utf16)'
- en: '[21.2.3â€ƒSource code in files: UTF-8](#source-code-in-files-utf8)'
  id: totrans-8
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[21.2.3 æºä»£ç åœ¨æ–‡ä»¶ä¸­ï¼šUTF-8](#source-code-in-files-utf8)'
- en: '[21.3â€ƒGrapheme clusters â€“ the real characters](#grapheme-clusters)'
  id: totrans-9
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[21.3 å›¾å½¢ç¾¤ç»„ â€“ çœŸæ­£çš„å­—ç¬¦](#grapheme-clusters)'
- en: '[21.3.1â€ƒGrapheme clusters vs. glyphs](#grapheme-clusters-vs-glyphs)'
  id: totrans-10
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[21.3.1 å›¾å½¢ç¾¤ç»„ä¸ç¬¦å·](#grapheme-clusters-vs-glyphs)'
- en: Unicode is a standard for representing and managing text in most of the worldâ€™s
    writing systems. Virtually all modern software that works with text, supports
    Unicode. The standard is maintained by the Unicode Consortium. A new version of
    the standard is published every year (with new emojis, etc.). Unicode version
    1.0.0 was published in October 1991.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: Unicode æ˜¯ä¸€ä¸ªç”¨äºè¡¨ç¤ºå’Œç®¡ç†ä¸–ç•Œä¸Šå¤§å¤šæ•°ä¹¦å†™ç³»ç»Ÿçš„æ ‡å‡†ã€‚å‡ ä¹æ‰€æœ‰å¤„ç†æ–‡æœ¬çš„ç°ä»£è½¯ä»¶éƒ½æ”¯æŒ Unicodeã€‚è¯¥æ ‡å‡†ç”± Unicode è”ç›Ÿç»´æŠ¤ã€‚æ¯å¹´å‘å¸ƒä¸€ä¸ªæ–°çš„æ ‡å‡†ç‰ˆæœ¬ï¼ˆåŒ…æ‹¬æ–°çš„è¡¨æƒ…ç¬¦å·ç­‰ï¼‰ã€‚Unicode
    1.0.0 ç‰ˆæœ¬äº 1991 å¹´ 10 æœˆå‘å¸ƒã€‚
- en: '[21.1â€ƒCode points vs. code units](#unicode-code-points-vs-code-units)'
  id: totrans-12
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[21.1 ç ç‚¹ä¸ç ä½](#unicode-code-points-vs-code-units)'
- en: 'Two concepts are crucial for understanding Unicode:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸¤ä¸ªæ¦‚å¿µå¯¹äºç†è§£ Unicode è‡³å…³é‡è¦ï¼š
- en: '*Code points* are numbers that represent the atomic parts of Unicode text.
    Most of them represent visible symbols but they can also have other meanings such
    as specifying an aspect of a symbol (the accent of a letter, the skin tone of
    an emoji, etc.).'
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*ç ç‚¹*æ˜¯ä»£è¡¨ Unicode æ–‡æœ¬åŸå­éƒ¨åˆ†çš„æ•°å­—ã€‚å…¶ä¸­å¤§éƒ¨åˆ†ä»£è¡¨å¯è§ç¬¦å·ï¼Œä½†å®ƒä»¬ä¹Ÿå¯ä»¥æœ‰å…¶ä»–å«ä¹‰ï¼Œä¾‹å¦‚æŒ‡å®šç¬¦å·çš„æŸä¸ªæ–¹é¢ï¼ˆå­—æ¯çš„é‡éŸ³ï¼Œè¡¨æƒ…ç¬¦å·çš„è‚¤è‰²ç­‰ï¼‰ã€‚'
- en: '*Code units* are numbers that encode code points, to store or transmit Unicode
    text. One or more code units encode a single code point. Each code unit has the
    same size, which depends on the *encoding format* that is used. The most popular
    format, UTF-8, has 8-bit code units.'
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*ç ä½*æ˜¯ç¼–ç ç ç‚¹çš„æ•°å­—ï¼Œç”¨äºå­˜å‚¨æˆ–ä¼ è¾“ Unicode æ–‡æœ¬ã€‚ä¸€ä¸ªæˆ–å¤šä¸ªç ä½ç¼–ç ä¸€ä¸ªå•ä¸€çš„ç ç‚¹ã€‚æ¯ä¸ªç ä½å…·æœ‰ç›¸åŒçš„å¤§å°ï¼Œè¿™å–å†³äºæ‰€ä½¿ç”¨çš„*ç¼–ç æ ¼å¼*ã€‚æœ€æµè¡Œçš„æ ¼å¼ï¼ŒUTF-8ï¼Œå…·æœ‰
    8 ä½ç ä½ã€‚'
- en: '[21.1.1â€ƒCode points](#unicode-code-points)'
  id: totrans-16
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[21.1.1 ç ç‚¹](#unicode-code-points)'
- en: 'The first version of Unicode had 16-bit code points. Since then, the number
    of characters has grown considerably and the size of code points was extended
    to 21 bits. These 21 bits are partitioned in 17 planes, with 16 bits each:'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: Unicode çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬æœ‰ 16 ä½ç ç‚¹ã€‚ä»é‚£æ—¶èµ·ï¼Œå­—ç¬¦çš„æ•°é‡å¤§å¹…å¢é•¿ï¼Œç ç‚¹çš„å¤§å°æ‰©å±•åˆ° 21 ä½ã€‚è¿™ 21 ä½è¢«åˆ†ä¸º 17 ä¸ªå¹³é¢ï¼Œæ¯ä¸ªå¹³é¢ 16
    ä½ï¼š
- en: 'Plane 0: **Basic Multilingual Plane (BMP)**, 0x0000â€“0xFFFF'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å¹³é¢ 0ï¼š**åŸºæœ¬å¤šè¯­è¨€å¹³é¢ (BMP)**ï¼Œ0x0000â€“0xFFFF
- en: Contains characters for almost all modern languages (Latin characters, Asian
    characters, etc.) and many symbols.
  id: totrans-19
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: åŒ…å«å‡ ä¹æ‰€æœ‰ç°ä»£è¯­è¨€çš„å­—ç¬¦ï¼ˆæ‹‰ä¸å­—ç¬¦ã€äºšæ´²å­—ç¬¦ç­‰ï¼‰ä»¥åŠè®¸å¤šç¬¦å·ã€‚
- en: 'Plane 1: Supplementary Multilingual Plane (SMP), 0x10000â€“0x1FFFF'
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å¹³é¢ 1ï¼šè¡¥å……å¤šè¯­è¨€å¹³é¢ (SMP)ï¼Œ0x10000â€“0x1FFFF
- en: Supports historic writing systems (e.g., Egyptian hieroglyphs and cuneiform)
    and additional modern writing systems.
  id: totrans-21
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ”¯æŒå†å²ä¹¦å†™ç³»ç»Ÿï¼ˆä¾‹å¦‚ï¼ŒåŸƒåŠè±¡å½¢æ–‡å­—å’Œæ¥”å½¢æ–‡å­—ï¼‰ä»¥åŠé¢å¤–çš„ç°ä»£ä¹¦å†™ç³»ç»Ÿã€‚
- en: Supports emojis and many other symbols.
  id: totrans-22
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ”¯æŒè¡¨æƒ…ç¬¦å·å’Œè®¸å¤šå…¶ä»–ç¬¦å·ã€‚
- en: 'Plane 2: Supplementary Ideographic Plane (SIP), 0x20000â€“0x2FFFF'
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å¹³é¢ 2ï¼šè¡¥å……è¡¨æ„æ–‡å­—å¹³é¢ (SIP)ï¼Œ0x20000â€“0x2FFFF
- en: Contains additional CJK (Chinese, Japanese, Korean) ideographs.
  id: totrans-24
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: åŒ…å«é¢å¤–çš„ CJKï¼ˆä¸­æ–‡ã€æ—¥æ–‡ã€éŸ©æ–‡ï¼‰è¡¨æ„æ–‡å­—ã€‚
- en: 'Plane 3â€“13: Unassigned'
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å¹³é¢ 3â€“13ï¼šæœªåˆ†é…
- en: 'Plane 14: Supplementary Special-Purpose Plane (SSP), 0xE0000â€“0xEFFFF'
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å¹³é¢ 14ï¼šè¡¥å……ç‰¹æ®Šç”¨é€”å¹³é¢ (SSP)ï¼Œ0xE0000â€“0xEFFFF
- en: Contains non-graphical characters such as tag characters and glyph variation
    selectors.
  id: totrans-27
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: åŒ…å«éå›¾å½¢å­—ç¬¦ï¼Œå¦‚æ ‡ç­¾å­—ç¬¦å’Œç¬¦å·å˜ä½“é€‰æ‹©å™¨ã€‚
- en: 'Plane 15â€“16: Supplementary Private Use Area (S PUA A/B), 0x0F0000â€“0x10FFFF'
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å¹³é¢ 15â€“16ï¼šè¡¥å……ä¸“ç”¨åŒº (S PUA A/B)ï¼Œ0x0F0000â€“0x10FFFF
- en: Available for character assignment by parties outside the ISO and the Unicode
    Consortium. Not standardized.
  id: totrans-29
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: å¯ä¾› ISO å’Œ Unicode è”ç›Ÿä»¥å¤–çš„å„æ–¹è¿›è¡Œå­—ç¬¦åˆ†é…ã€‚æœªæ ‡å‡†åŒ–ã€‚
- en: Planes 1-16 are called supplementary planes or **astral planes**.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: å¹³é¢ 1-16 è¢«ç§°ä¸ºè¡¥å……å¹³é¢æˆ–**å¤©ä½“å¹³é¢**ã€‚
- en: 'Letâ€™s check the code points of a few characters:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬æ£€æŸ¥å‡ ä¸ªå­—ç¬¦çš„ä»£ç ç‚¹ï¼š
- en: '[PRE0]'
  id: totrans-32
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: The hexadecimal numbers of the code points tell us that the first three characters
    reside in plane 0 (within 16 bits), while the emoji resides in plane 1.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: ä»£ç ç‚¹çš„åå…­è¿›åˆ¶æ•°å‘Šè¯‰æˆ‘ä»¬ï¼Œå‰ä¸‰ä¸ªå­—ç¬¦ä½äºå¹³é¢0ï¼ˆ16ä½ä»¥å†…ï¼‰ï¼Œè€Œè¡¨æƒ…ç¬¦å·ä½äºå¹³é¢1ã€‚
- en: '[21.1.2â€ƒEncoding Unicode code points: UTF-32, UTF-16, UTF-8](#encoding-unicode-code-points-utf32-utf16-utf8)'
  id: totrans-34
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[21.1.2â€ƒç¼–ç Unicodeä»£ç ç‚¹ï¼šUTF-32ã€UTF-16ã€UTF-8](#encoding-unicode-code-points-utf32-utf16-utf8)'
- en: 'The main ways of encoding code points are three *Unicode Transformation Formats*
    (UTFs): UTF-32, UTF-16, UTF-8\. The number at the end of each format indicates
    the size (in bits) of its code units.'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: ç¼–ç ä»£ç ç‚¹çš„ä¸‰ç§ä¸»è¦æ–¹å¼æ˜¯ä¸‰ç§*Unicodeè½¬æ¢æ ¼å¼*ï¼ˆUTFsï¼‰ï¼šUTF-32ã€UTF-16ã€UTF-8ã€‚æ¯ä¸ªæ ¼å¼çš„ç»“å°¾æ•°å­—è¡¨ç¤ºå…¶ä»£ç å•å…ƒçš„å¤§å°ï¼ˆä»¥ä½ä¸ºå•ä½ï¼‰ã€‚
- en: '[21.1.2.1â€ƒUTF-32 (Unicode Transformation Format 32)](#utf32-unicode-transformation-format-32)'
  id: totrans-36
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '[21.1.2.1â€ƒUTF-32 (Unicodeè½¬æ¢æ ¼å¼32)](#utf32-unicode-transformation-format-32)'
- en: UTF-32 uses 32 bits to store code units, resulting in one code unit per code
    point. This format is the only one with *fixed-length encoding*; all others use
    a varying number of code units to encode a single code point.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: UTF-32ä½¿ç”¨32ä½æ¥å­˜å‚¨ä»£ç å•å…ƒï¼Œæ¯ä¸ªä»£ç ç‚¹ä¸€ä¸ªä»£ç å•å…ƒã€‚è¿™æ˜¯å”¯ä¸€å…·æœ‰*å›ºå®šé•¿åº¦ç¼–ç *çš„æ ¼å¼ï¼›æ‰€æœ‰å…¶ä»–æ ¼å¼éƒ½ä½¿ç”¨ä¸åŒæ•°é‡çš„ä»£ç å•å…ƒæ¥ç¼–ç å•ä¸ªä»£ç ç‚¹ã€‚
- en: '[21.1.2.2â€ƒUTF-16 (Unicode Transformation Format 16)](#utf-16)'
  id: totrans-38
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '[21.1.2.2â€ƒUTF-16 (Unicodeè½¬æ¢æ ¼å¼16)](#utf-16)'
- en: 'UTF-16 uses 16-bit code units. It encodes code points as follows:'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: UTF-16ä½¿ç”¨16ä½ä»£ç å•å…ƒã€‚å®ƒæŒ‰ä»¥ä¸‹æ–¹å¼ç¼–ç ä»£ç ç‚¹ï¼š
- en: The BMP (first 16 bits of Unicode) is stored in single code units.
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: BMPï¼ˆUnicodeçš„ç¬¬ä¸€ä¸ª16ä½ï¼‰å­˜å‚¨åœ¨å•ä¸ªä»£ç å•å…ƒä¸­ã€‚
- en: 'Astral planes: The BMP comprises 0x10_000 code points. Given that Unicode has
    a total of 0x110_000 code points, we still need to encode the remaining 0x100_000
    code points (20 bits). The BMP has two ranges of unassigned code points that provide
    the necessary storage:'
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: é˜¿æ–¯ç‰¹æ‹‰å°”å¹³é¢ï¼šBMPåŒ…å«0x10_000ä¸ªä»£ç ç‚¹ã€‚é‰´äºUnicodeæ€»å…±æœ‰0x110_000ä¸ªä»£ç ç‚¹ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ç¼–ç å‰©ä½™çš„0x100_000ä¸ªä»£ç ç‚¹ï¼ˆ20ä½ï¼‰ã€‚BMPæœ‰ä¸¤ä¸ªæœªåˆ†é…çš„ä»£ç ç‚¹èŒƒå›´ï¼Œæä¾›äº†å¿…è¦çš„å­˜å‚¨ç©ºé—´ï¼š
- en: 'Most significant 10 bits (*leading surrogate*, *high surrogate*): 0xD800-0xDBFF'
  id: totrans-42
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: æœ€æ˜¾è‘—çš„10ä½ï¼ˆ*å‰å¯¼ä»£ç†*ï¼Œ*é«˜ä»£ç†*ï¼‰ï¼š0xD800-0xDBFF
- en: 'Least significant 10 bits (*trailing surrogate*, *low surrogate*): 0xDC00-0xDFFF'
  id: totrans-43
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: æœ€ä¸æ˜¾è‘—çš„10ä½ï¼ˆ*åç¼€ä»£ç†*ï¼Œ*ä½ä»£ç†*ï¼‰ï¼š0xDC00-0xDFFF
- en: 'As a consequence, each UTF-16 code unit is either:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: å› æ­¤ï¼Œæ¯ä¸ªUTF-16ä»£ç å•å…ƒè¦ä¹ˆï¼š
- en: A BMP code point (a *scalar*)
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: BMPä»£ç ç‚¹ï¼ˆä¸€ä¸ª*æ ‡é‡*ï¼‰
- en: A leading surrogate
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä¸€ä¸ªå‰å¯¼ä»£ç†
- en: A trailing surrogate
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä¸€ä¸ªåç¼€ä»£ç†
- en: If a surrogate appears on its own, without its partner, it is called a *lone
    surrogate*.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœä»£ç†å•ç‹¬å‡ºç°ï¼Œæ²¡æœ‰å…¶ä¼™ä¼´ï¼Œåˆ™ç§°ä¸º*å­¤ä»£ç†*ã€‚
- en: 'This is how the bits of the code points are distributed among the surrogates:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ˜¯ä»£ç ç‚¹çš„ä½å¦‚ä½•åˆ†å¸ƒåœ¨ä»£ç†ä¹‹é—´çš„ï¼š
- en: '[PRE1]'
  id: totrans-50
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Each character of a JavaScript string is a UTF-16 code unit. As an example,
    consider code point 0x1F642 (ğŸ™‚) that is represented by two UTF-16 code units â€“
    0xD83D and 0xDE42:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: JavaScriptå­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªå­—ç¬¦éƒ½æ˜¯ä¸€ä¸ªUTF-16ä»£ç å•å…ƒã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘ä»£ç ç‚¹0x1F642ï¼ˆğŸ™‚ï¼‰ï¼Œå®ƒç”±ä¸¤ä¸ªUTF-16ä»£ç å•å…ƒè¡¨ç¤º â€“ 0xD83Då’Œ0xDE42ï¼š
- en: '[PRE2]'
  id: totrans-52
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Letâ€™s derive the code units from the code point:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬ä»ä»£ç ç‚¹æ¨å¯¼å‡ºä»£ç å•å…ƒï¼š
- en: '[PRE3]'
  id: totrans-54
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'In contrast, code point 0x03C0 (Ï€) is part of the BMP and therefore represented
    by a single UTF-16 code unit â€“ 0x03C0:'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: ç›¸æ¯”ä¹‹ä¸‹ï¼Œä»£ç ç‚¹0x03C0ï¼ˆÏ€ï¼‰æ˜¯BMPçš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤ç”±å•ä¸ªUTF-16ä»£ç å•å…ƒè¡¨ç¤º â€“ 0x03C0ï¼š
- en: '[PRE4]'
  id: totrans-56
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '[21.1.2.3â€ƒUTF-8 (Unicode Transformation Format 8)](#utf8-unicode-transformation-format-8)'
  id: totrans-57
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '[21.1.2.3â€ƒUTF-8 (Unicodeè½¬æ¢æ ¼å¼8)](#utf8-unicode-transformation-format-8)'
- en: 'UTF-8 has 8-bit code units. It uses 1â€“4 code units to encode a code point:'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: UTF-8æœ‰8ä½ä»£ç å•å…ƒã€‚å®ƒä½¿ç”¨1-4ä¸ªä»£ç å•å…ƒæ¥ç¼–ç ä¸€ä¸ªä»£ç ç‚¹ï¼š
- en: '| Code points | Code units |'
  id: totrans-59
  prefs: []
  type: TYPE_TB
  zh: '| ä»£ç ç‚¹ | ä»£ç å•å…ƒ |'
- en: '| --- | --- |'
  id: totrans-60
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| 0000â€“007F | 0bbbbbbb (7 bits) |'
  id: totrans-61
  prefs: []
  type: TYPE_TB
  zh: '| 0000â€“007F | 0bbbbbbb (7 bits) |'
- en: '| 0080â€“07FF | 110bbbbb, 10bbbbbb (5+6 bits) |'
  id: totrans-62
  prefs: []
  type: TYPE_TB
  zh: '| 0080â€“07FF | 110bbbbb, 10bbbbbb (5+6 bits) |'
- en: '| 0800â€“FFFF | 1110bbbb, 10bbbbbb, 10bbbbbb (4+6+6 bits) |'
  id: totrans-63
  prefs: []
  type: TYPE_TB
  zh: '| 0800â€“FFFF | 1110bbbb, 10bbbbbb, 10bbbbbb (4+6+6 bits) |'
- en: '| 10000â€“1FFFFF | 11110bbb, 10bbbbbb, 10bbbbbb, 10bbbbbb (3+6+6+6 bits) |'
  id: totrans-64
  prefs: []
  type: TYPE_TB
  zh: '| 10000â€“1FFFFF | 11110bbb, 10bbbbbb, 10bbbbbb, 10bbbbbb (3+6+6+6 bits) |'
- en: 'Notes:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: æ³¨æ„ï¼š
- en: 'The bit prefix of each code unit tells us:'
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ¯ä¸ªä»£ç å•å…ƒçš„ä½å‰ç¼€å‘Šè¯‰æˆ‘ä»¬ï¼š
- en: Is it first in a series of code units? If yes, how many code units will follow?
  id: totrans-67
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: å®ƒæ˜¯ä»£ç å•å…ƒç³»åˆ—ä¸­çš„ç¬¬ä¸€ä¸ªå—ï¼Ÿå¦‚æœæ˜¯ï¼Œå°†è·Ÿéšå¤šå°‘ä¸ªä»£ç å•å…ƒï¼Ÿ
- en: Is it second or later in a series of code units?
  id: totrans-68
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: å®ƒæ˜¯ä»£ç å•å…ƒç³»åˆ—ä¸­çš„ç¬¬äºŒä¸ªæˆ–åç»­çš„å—ï¼Ÿ
- en: The character mappings in the 0000â€“007F range are the same as ASCII, which leads
    to a degree of backward compatibility with older software.
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 0000â€“007FèŒƒå›´å†…çš„å­—ç¬¦æ˜ å°„ä¸ASCIIç›¸åŒï¼Œè¿™å¯¼è‡´ä¸æ—§è½¯ä»¶æœ‰ä¸€å®šçš„å‘åå…¼å®¹æ€§ã€‚
- en: 'Three examples:'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸‰ä¸ªç¤ºä¾‹ï¼š
- en: '| Character | Code point | Code units |'
  id: totrans-71
  prefs: []
  type: TYPE_TB
  zh: '| å­—ç¬¦ | ä»£ç ç‚¹ | ä»£ç å•å…ƒ |'
- en: '| --- | --- | --- |'
  id: totrans-72
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| A | 0x0041 | 01000001 |'
  id: totrans-73
  prefs: []
  type: TYPE_TB
  zh: '| A | 0x0041 | 01000001 |'
- en: '| Ï€ | 0x03C0 | 11001111, 10000000 |'
  id: totrans-74
  prefs: []
  type: TYPE_TB
  zh: '| Ï€ | 0x03C0 | 11001111, 10000000 |'
- en: '| ğŸ™‚ | 0x1F642 | 11110000, 10011111, 10011001, 10000010 |'
  id: totrans-75
  prefs: []
  type: TYPE_TB
  zh: '| ğŸ™‚ | 0x1F642 | 11110000, 10011111, 10011001, 10000010 |'
- en: '[21.2â€ƒEncodings used in web development: UTF-16 and UTF-8](#utf-in-web-dev)'
  id: totrans-76
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[21.2â€ƒç½‘ç»œå¼€å‘ä¸­ä½¿ç”¨çš„ç¼–ç ï¼šUTF-16 å’Œ UTF-8](#utf-in-web-dev)'
- en: 'The Unicode encoding formats that are used in web development are: UTF-16 and
    UTF-8.'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ç½‘ç»œå¼€å‘ä¸­ä½¿ç”¨çš„ Unicode ç¼–ç æ ¼å¼æ˜¯ï¼šUTF-16 å’Œ UTF-8ã€‚
- en: '[21.2.1â€ƒSource code internally: UTF-16](#source-code-internally-utf16)'
  id: totrans-78
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[21.2.1â€ƒæºä»£ç å†…éƒ¨ï¼šUTF-16](#source-code-internally-utf16)'
- en: The ECMAScript specification internally represents source code as UTF-16.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: ECMAScript è§„èŒƒåœ¨å†…éƒ¨å°†æºä»£ç è¡¨ç¤ºä¸º UTF-16ã€‚
- en: '[21.2.2â€ƒStrings: UTF-16](#strings-utf16)'
  id: totrans-80
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[21.2.2â€ƒå­—ç¬¦ä¸²ï¼šUTF-16](#strings-utf16)'
- en: 'The characters in JavaScript strings are based on UTF-16 code units:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: JavaScript å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦åŸºäº UTF-16 ä»£ç å•å…ƒï¼š
- en: '[PRE5]'
  id: totrans-82
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'For more information on Unicode and strings, see [â€œAtoms of text: code points,
    JavaScript characters, grapheme clustersâ€ (Â§22.7)](ch_strings.html#atoms-of-text).'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: å…³äº Unicode å’Œå­—ç¬¦ä¸²çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…[â€œæ–‡æœ¬çš„åŸå­ï¼šç ç‚¹ã€JavaScript å­—ç¬¦ã€å›¾å½¢ç¾¤â€ (Â§22.7)](ch_strings.html#atoms-of-text)ã€‚
- en: '[21.2.3â€ƒSource code in files: UTF-8](#source-code-in-files-utf8)'
  id: totrans-84
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[21.2.3â€ƒæ–‡ä»¶ä¸­çš„æºä»£ç ï¼šUTF-8](#source-code-in-files-utf8)'
- en: HTML and JavaScript files are almost always encoded as UTF-8 now.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨ï¼ŒHTML å’Œ JavaScript æ–‡ä»¶å‡ ä¹æ€»æ˜¯ä»¥ UTF-8 ç¼–ç ã€‚
- en: 'For example, this is how HTML files usually start now:'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: ä¾‹å¦‚ï¼Œè¿™æ˜¯ç°åœ¨ HTML æ–‡ä»¶é€šå¸¸å¼€å§‹çš„æ ¼å¼ï¼š
- en: '[PRE6]'
  id: totrans-87
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '[21.3â€ƒGrapheme clusters â€“ the real characters](#grapheme-clusters)'
  id: totrans-88
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[21.3â€ƒå›¾å½¢ç¾¤â€”â€”çœŸæ­£çš„å­—ç¬¦](#grapheme-clusters)'
- en: 'The concept of a character becomes remarkably complex once we consider the
    various writing systems of the world. Thatâ€™s why there are several different Unicode
    terms that all mean â€œcharacterâ€ in some way: *code point*, *grapheme cluster*,
    *glyph*, etc.'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€æ—¦æˆ‘ä»¬è€ƒè™‘ä¸–ç•Œä¸Šçš„å„ç§ä¹¦å†™ç³»ç»Ÿï¼Œå­—ç¬¦çš„æ¦‚å¿µå°±ä¼šå˜å¾—éå¸¸å¤æ‚ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæœ‰å‡ ä¸ªä¸åŒçš„ Unicode æœ¯è¯­ï¼Œå®ƒä»¬éƒ½ä»¥æŸç§æ–¹å¼æ„å‘³ç€â€œå­—ç¬¦â€ï¼š*ç ç‚¹*ã€*å›¾å½¢ç¾¤*ã€*ç¬¦å·*ç­‰ã€‚
- en: In Unicode, a *code point* is an atomic part of text stored in a computer.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ Unicode ä¸­ï¼Œä¸€ä¸ª *ç ç‚¹* æ˜¯å­˜å‚¨åœ¨è®¡ç®—æœºä¸­çš„æ–‡æœ¬çš„åŸå­éƒ¨åˆ†ã€‚
- en: However, a *grapheme cluster* corresponds most closely to a symbol displayed
    on screen or paper. It is defined as â€œa horizontally segmentable unit of textâ€.
    Therefore, [official Unicode documents](https://unicode.org/reports/tr29/#Grapheme_Cluster_Boundaries)
    also call it a *user-perceived character*. One or more code points are needed
    to encode a grapheme cluster.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶è€Œï¼Œä¸€ä¸ª *å›¾å½¢ç¾¤* æœ€æ¥è¿‘äºå±å¹•æˆ–çº¸å¼ ä¸Šæ˜¾ç¤ºçš„ç¬¦å·ã€‚å®ƒè¢«å®šä¹‰ä¸ºâ€œä¸€ä¸ªæ°´å¹³å¯åˆ†å‰²çš„æ–‡æœ¬å•ä½â€ã€‚å› æ­¤ï¼Œ[å®˜æ–¹ Unicode æ–‡æ¡£](https://unicode.org/reports/tr29/#Grapheme_Cluster_Boundaries)ä¹Ÿå°†å…¶ç§°ä¸º*ç”¨æˆ·æ„ŸçŸ¥å­—ç¬¦*ã€‚ç¼–ç ä¸€ä¸ªå›¾å½¢ç¾¤éœ€è¦ä¸€ä¸ªæˆ–å¤šä¸ªç ç‚¹ã€‚
- en: 'For example, the Devanagari *kshi* is encoded by 4 code points. We use `Array.from()`
    to split the string into an Array with code points:'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: ä¾‹å¦‚ï¼Œå¾·æ–‡é‚£åŠ é‡Œè¯­ä¸­çš„ *kshi* è¢«ç¼–ç ä¸º 4 ä¸ªç ç‚¹ã€‚æˆ‘ä»¬ä½¿ç”¨ `Array.from()` å°†å­—ç¬¦ä¸²æ‹†åˆ†ä¸ºä¸€ä¸ªåŒ…å«ç ç‚¹çš„æ•°ç»„ï¼š
- en: '![](../Images/327b7f8b4b4d9c9c757e133802a9ace0.png)'
  id: totrans-93
  prefs:
  - PREF_BQ
  type: TYPE_IMG
  zh: '![](../Images/327b7f8b4b4d9c9c757e133802a9ace0.png)'
- en: 'Many emojis are composed of multiple code points:'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: è®¸å¤šè¡¨æƒ…ç¬¦å·ç”±å¤šä¸ªç ç‚¹ç»„æˆï¼š
- en: '![](../Images/a968a426ee730ce9975413b34be1f93a.png)'
  id: totrans-95
  prefs:
  - PREF_BQ
  type: TYPE_IMG
  zh: '![](../Images/a968a426ee730ce9975413b34be1f93a.png)'
- en: 'Flag emojis are grapheme clusters and composed of two code points â€“ for example,
    the flag of Japan:'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: å›½æ——è¡¨æƒ…ç¬¦å·æ˜¯å›¾å½¢ç¾¤ï¼Œç”±ä¸¤ä¸ªç ç‚¹ç»„æˆâ€”â€”ä¾‹å¦‚ï¼Œæ—¥æœ¬çš„å›½æ——ï¼š
- en: '![](../Images/0a7ad977809c49e13a21283b6356d9cb.png)'
  id: totrans-97
  prefs:
  - PREF_BQ
  type: TYPE_IMG
  zh: '![](../Images/0a7ad977809c49e13a21283b6356d9cb.png)'
- en: '[21.3.1â€ƒGrapheme clusters vs. glyphs](#grapheme-clusters-vs-glyphs)'
  id: totrans-98
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[21.3.1â€ƒå›¾å½¢ç¾¤ä¸ç¬¦å·](#grapheme-clusters-vs-glyphs)'
- en: 'A symbol is an abstract concept and part of written language:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: ç¬¦å·æ˜¯ä¸€ä¸ªæŠ½è±¡æ¦‚å¿µï¼Œä¹Ÿæ˜¯ä¹¦é¢è¯­è¨€çš„ä¸€éƒ¨åˆ†ï¼š
- en: It is represented in computer memory by a *grapheme cluster* â€“ a sequence of
    one or more code points (numbers).
  id: totrans-100
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å®ƒåœ¨è®¡ç®—æœºå†…å­˜ä¸­é€šè¿‡ä¸€ä¸ª *å›¾å½¢ç¾¤* è¡¨ç¤ºâ€”â€”ä¸€ä¸ªç”±ä¸€ä¸ªæˆ–å¤šä¸ªç ç‚¹ï¼ˆæ•°å­—ï¼‰ç»„æˆçš„åºåˆ—ã€‚
- en: It is drawn on screen via *glyphs*. A glyph is an image and usually stored in
    a font. More than one glyph may be used to draw a single symbol â€“ for example,
    the symbol â€œÃ©â€ may be drawn by combining the glyph â€œeâ€ with the glyph â€œÂ´â€.
  id: totrans-101
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å®ƒé€šè¿‡ *ç¬¦å·* åœ¨å±å¹•ä¸Šç»˜åˆ¶ã€‚ç¬¦å·æ˜¯ä¸€ä¸ªå›¾åƒï¼Œé€šå¸¸å­˜å‚¨åœ¨å­—ä½“ä¸­ã€‚å¯èƒ½éœ€è¦å¤šä¸ªç¬¦å·æ¥ç»˜åˆ¶å•ä¸ªç¬¦å·â€”â€”ä¾‹å¦‚ï¼Œç¬¦å·â€œÃ©â€å¯èƒ½é€šè¿‡å°†â€œeâ€ç¬¦å·ä¸â€œÂ´â€ç¬¦å·ç»„åˆæ¥ç»˜åˆ¶ã€‚
- en: The distinction between a concept and its representation is subtle and can blur
    when talking about Unicode.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è°ˆè®º Unicode æ—¶ï¼Œæ¦‚å¿µä¸å…¶è¡¨ç¤ºä¹‹é—´çš„åŒºåˆ«æ˜¯å¾®å¦™çš„ï¼Œå¹¶ä¸”å¯èƒ½ä¼šå˜å¾—æ¨¡ç³Šã€‚
- en: '![Icon â€œexternalâ€](../Images/38e6ff55e8d602659f3cdb8893e63f62.png)â€‚**More information
    on grapheme clusters**'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: '![å›¾æ ‡â€œå¤–éƒ¨â€](../Images/38e6ff55e8d602659f3cdb8893e63f62.png)â€‚**å…³äºå›¾å½¢ç¾¤ä½“çš„æ›´å¤šä¿¡æ¯**'
- en: For more information, see [â€œLetâ€™s Stop Ascribing Meaning to Code Pointsâ€](https://manishearth.github.io/blog/2017/01/14/stop-ascribing-meaning-to-unicode-code-points/)
    by Manish Goregaokar.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… Manish Goregaokar æ’°å†™çš„[â€œè®©æˆ‘ä»¬åœæ­¢å°†æ„ä¹‰å½’å› äºç ç‚¹â€](https://manishearth.github.io/blog/2017/01/14/stop-ascribing-meaning-to-unicode-code-points/)ã€‚
