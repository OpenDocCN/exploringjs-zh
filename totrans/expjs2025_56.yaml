- en: 47 Dates (Date)
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://exploringjs.com/js/book/ch_dates.html](https://exploringjs.com/js/book/ch_dates.html)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[47.1 Best practice: avoid the built-in `Date`](#date-libraries)'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[47.1.1 Things to look for in a date library](#things-to-look-for-in-a-date-library)'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '[47.2 Time standards](#time-standards)'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[47.2.1 Background: UTC vs. Z vs. GMT](#utc-z-gmt)'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '[47.2.2 Dates do not support time zones](#dates-have-no-time-zones)'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '[47.3 Background: date time formats (ISO)](#date-time-formats)'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[47.3.1 Tip: append a `Z` to make date parsing deterministic](#tip-append-a-z-to-make-date-parsing-deterministic)'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '[47.4 Time values](#time-values)'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[47.4.1 Creating time values](#creating-time-values)'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '[47.4.2 Getting and setting time values](#getting-and-setting-time-values)'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '[47.5 Creating Dates](#creating-dates)'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[47.5.1 Creating dates via numbers](#creating-dates-via-numbers)'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '[47.5.2 Parsing dates from strings](#parsing-dates-from-strings)'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '[47.5.3 Other ways of creating dates](#other-ways-of-creating-dates)'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '[47.6 Getters and setters](#getters-and-setters)'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[47.6.1 Time unit getters and setters](#time-unit-getters-and-setters)'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '[47.7 Converting Dates to strings](#converting-dates-to-strings)'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[47.7.1 Strings with times](#strings-with-times)'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '[47.7.2 Strings with dates](#strings-with-dates)'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '[47.7.3 Strings with dates and times](#strings-with-dates-and-times)'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '[47.7.4 Other methods](#other-methods)'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: This chapter describes JavaScript’s API for working with dates – the class `Date`.
  prefs: []
  type: TYPE_NORMAL
- en: '[47.1 Best practice: avoid the built-in `Date`](#date-libraries)'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'The JavaScript `Date` API is cumbersome to use. Hence, it’s best to rely on
    a library for anything related to dates. This is functionality that already is,
    or soon will be, built in:'
  prefs: []
  type: TYPE_NORMAL
- en: '[Temporal](https://github.com/tc39/proposal-temporal) is an upcoming ECMAScript
    data time API that can already be used via polyfills.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'The `Intl` API is supported by most JavaScript platforms and offers useful
    date-time-related functionality:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[`Intl.DateTimeFormat`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/DateTimeFormat)
    provides “language-sensitive date and time formatting”.'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '[`Intl.RelativeTimeFormat`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/RelativeTimeFormat)
    provides “language-sensitive relative time formatting”.'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '[`Intl.DurationFormat`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/DurationFormat)
    provides “language-sensitive duration formatting”.'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Popular libraries include:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Libraries with custom date objects (for complex use cases):'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Luxon](https://moment.github.io/luxon/)'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Day.js](https://github.com/iamkun/dayjs)'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '[js-joda](https://js-joda.github.io/js-joda/)'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Moment.js](https://momentjs.com)'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Libraries that use the built-in `Date` objects (for simpler use cases):'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Tempo](https://tempo.formkit.com)'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '[date-fns](https://github.com/date-fns/date-fns)'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '[47.1.1 Things to look for in a date library](#things-to-look-for-in-a-date-library)'
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'Two things are important to keep in mind:'
  prefs: []
  type: TYPE_NORMAL
- en: '[*Tree-shaking*](ch_next-steps.html#tree-shaking) can considerably reduce the
    size of a library. It is a technique of only deploying those exports of a library
    to a web server that are imported somewhere. Functions are much more amenable
    to tree-shaking than classes.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Support for time zones: As explained [later](#dates-have-no-time-zones), `Date`
    does not support time zones, which introduces a number of pitfalls and is a key
    weakness. Make sure that your date library supports them.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[47.2 Time standards](#time-standards)'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '[47.2.1 Background: UTC vs. Z vs. GMT](#utc-z-gmt)'
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'UTC, Z, and GMT are ways of specifying time that are similar, but subtly different:'
  prefs: []
  type: TYPE_NORMAL
- en: UTC (Coordinated Universal Time) is the time standard that all times zones are
    based on. They are specified relative to it. That is, no country or territory
    has UTC as its local time zone. If a time zone has daylight savings time, its
    offset relative to UTC changes during a year.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Z (Zulu Time Zone) is a military time zone that is often used in aviation and
    the military as another name for UTC+0.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: GMT (Greenwich Mean Time) is a time zone used in some European and African countries.
    It is UTC plus zero hours and therefore has the same time as UTC.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Sources:'
  prefs: []
  type: TYPE_NORMAL
- en: '[“The Difference Between GMT and UTC”](https://www.timeanddate.com/time/gmt-utc-time.html)
    at TimeAndDate.com'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[“Z – Zulu Time Zone (Military Time)”](https://www.timeanddate.com/time/zones/z)
    at TimeAndDate.com'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[47.2.2 Dates do not support time zones](#dates-have-no-time-zones)'
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'Dates support the following time standards:'
  prefs: []
  type: TYPE_NORMAL
- en: The local time zone (which depends on the current location)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: UTC
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Time offsets (relative to UTC)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Depending on the operation, only some of those options are available. For example,
    when converting dates to strings or extracting time units such as the day of the
    month, we can only choose between the local time zone and UTC.
  prefs: []
  type: TYPE_NORMAL
- en: 'Internally, Dates are stored as UTC. When converting from or to the local time
    zone, the necessary offsets are determined via the date. In the following example,
    the local time zone is Europe/Paris:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'Whenever we create or convert dates, we need to be mindful of the time standard
    being used – for example: `new Date()` uses the local time zone while `.toISOString()`
    uses UTC.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: Dates interpret 0 as January. The day of the month is 27 in the local time zone,
    but 26 in UTC.
  prefs: []
  type: TYPE_NORMAL
- en: '![Icon “tip”](../Images/8440b17bb8219cda9f9405ac83c36db0.png) **Documenting
    the time standards supported by each operation**'
  prefs: []
  type: TYPE_NORMAL
- en: In the remainder of this chapter, the supported time standards are noted for
    each operation.
  prefs: []
  type: TYPE_NORMAL
- en: '[47.2.2.1 The downsides of not being able to specify time zones](#the-downsides-of-not-being-able-to-specify-time-zones)'
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
- en: 'Not being able to specify time zones has two downsides:'
  prefs: []
  type: TYPE_NORMAL
- en: It makes it impossible to support multiple time zones.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'It can lead to location-specific bugs. For example, the previous example produces
    different results depending on where it is executed. To be safe:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Use UTC-based operations whenever possible
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: Use `Z` or a time offset when parsing strings (see the next section for more
    information).
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '[47.3 Background: date time formats (ISO)](#date-time-formats)'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'Date time formats describe:'
  prefs: []
  type: TYPE_NORMAL
- en: 'The strings accepted by:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`Date.parse()`'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '`new Date()`'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 'The strings returned by (always longest format):'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`Date.prototype.toISOString()`'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 'The following is an example of a date time string returned by `.toISOString()`:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: 'Date time formats have the following structures:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Date formats: Y=year; M=month; D=day'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: 'Time formats: T=separator (the string `''T''`); H=hour; m=minute; s=second
    and millisecond; Z=Zulu Time Zone (the string `''Z''`)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: '[PRE6] [PRE7]`'
  prefs: []
  type: TYPE_NORMAL
