- en: 10 Protecting objects from being changed
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://exploringjs.com/deep-js/ch_protecting-objects.html](https://exploringjs.com/deep-js/ch_protecting-objects.html)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '* * *'
  prefs: []
  type: TYPE_NORMAL
- en: '10.1 [Levels of protection: preventing extensions, sealing, freezing](ch_protecting-objects.html#levels-of-protection-preventing-extensions-sealing-freezing)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 10.2 [Preventing extensions of objects](ch_protecting-objects.html#preventing-extensions-of-objects)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 10.2.1 [Checking whether an object is extensible](ch_protecting-objects.html#checking-whether-an-object-is-extensible)
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 10.3 [Sealing objects](ch_protecting-objects.html#sealing-objects)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 10.3.1 [Checking whether an object is sealed](ch_protecting-objects.html#checking-whether-an-object-is-sealed)
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 10.4 [Freezing objects](ch_protecting-objects.html#freezing-objects)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 10.4.1 [Checking whether an object is frozen](ch_protecting-objects.html#checking-whether-an-object-is-frozen)
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 10.4.2 [Freezing is shallow](ch_protecting-objects.html#freezing-is-shallow)
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 10.4.3 [Implementing deep freezing](ch_protecting-objects.html#implementing-deep-freezing)
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 10.5 [Further reading](ch_protecting-objects.html#further-reading-2)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '* * *'
  prefs: []
  type: TYPE_NORMAL
- en: 'In this chapter, we’ll look at how objects can be protected from being changed.
    Examples include: Preventing properties being added and preventing properties
    being changed.'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/6b17215a2abf7f098e996c026fba60fd.png)  **Required knowledge:
    property attributes**'
  prefs: []
  type: TYPE_NORMAL
- en: 'For this chapter, you should be familiar with property attributes. If you aren’t,
    check out [§9 “Property attributes: an introduction”](ch_property-attributes-intro.html).'
  prefs: []
  type: TYPE_NORMAL
- en: '10.1 Levels of protection: preventing extensions, sealing, freezing'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'JavaScript has three levels of protecting objects:'
  prefs: []
  type: TYPE_NORMAL
- en: '*Preventing extensions* makes it impossible to add new properties to an object.
    We can still delete and change properties, though.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Method: `Object.preventExtensions(obj)`'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '*Sealing* prevents extensions and makes all properties *unconfigurable* (roughly:
    we can’t change how a property works anymore).'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Method: `Object.seal(obj)`'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '*Freezing* seals an object after making all of its properties non-writable.
    That is, the object is not extensible, all properties are read-only and there
    is no way to change that.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Method: `Object.freeze(obj)`'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 10.2 Preventing extensions of objects
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'This method works as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: If `obj` is not an object, it returns it.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Otherwise, it changes `obj` so that we can’t add properties anymore and returns
    it.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The type parameter `<T>` expresses that the result has the same type as the
    parameter.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Let’s use `Object.preventExtensions()` in an example:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: 'We can still delete properties, though:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: 10.2.1 Checking whether an object is extensible
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: 'Checks whether `obj` is extensible – for example:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: 10.3 Sealing objects
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: 'Description of this method:'
  prefs: []
  type: TYPE_NORMAL
- en: If `obj` isn’t an object, it returns it.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Otherwise, it prevents extensions of `obj`, makes all of its properties *unconfigurable*,
    and returns it. The properties being unconfigurable means that they can’t be changed,
    anymore (except for their values): Read-only properties stay read-only, enumerable
    properties stay enumerable, etc.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The following example demonstrates that sealing makes the object non-extensible
    and its properties unconfigurable.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: 'We can still change the the value of property `.first`:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: 'But we can’t change its attributes:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  prefs: []
  type: TYPE_PRE
- en: 10.3.1 Checking whether an object is sealed
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: '[PRE9]'
  prefs: []
  type: TYPE_PRE
- en: 'Checks whether `obj` is sealed – for example:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE10]'
  prefs: []
  type: TYPE_PRE
- en: 10.4 Freezing objects
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '[PRE11]'
  prefs: []
  type: TYPE_PRE
- en: This method immediately returns `obj` if it isn’t an object.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Otherwise, it makes all properties non-writable, seals `obj`, and returns it.
    That is, `obj` is not extensible, all properties are read-only and there is no
    way to change that.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE12]'
  prefs: []
  type: TYPE_PRE
- en: 10.4.1 Checking whether an object is frozen
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: '[PRE13]'
  prefs: []
  type: TYPE_PRE
- en: 'Checks whether `obj` is frozen – for example:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE14]'
  prefs: []
  type: TYPE_PRE
- en: 10.4.2 Freezing is shallow
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: '`Object.freeze(obj)` only freezes `obj` and its properties. It does not freeze
    the values of those properties – for example:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE15]'
  prefs: []
  type: TYPE_PRE
- en: 10.4.3 Implementing deep freezing
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'If we want deep freezing, we need to implement it ourselves:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE16]'
  prefs: []
  type: TYPE_PRE
- en: 'Revisiting the example from the previous section, we can check if `deepFreeze()`
    really freezes deeply:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE17]'
  prefs: []
  type: TYPE_PRE
- en: 10.5 Further reading
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'More information on patterns for preventing data structures from being changed:
    [§15 “Immutable wrappers for collections”](ch_immutable-collection-wrappers.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Comments](https://github.com/rauschma/deep-js/issues/10)'
  prefs: []
  type: TYPE_NORMAL
