- en: '6 How TypeScript is used: workflows, tools, etc.'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 6 TypeScript 的使用：工作流程、工具等。
- en: 原文：[https://exploringjs.com/ts/book/ch_typescript-workflows.html](https://exploringjs.com/ts/book/ch_typescript-workflows.html)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://exploringjs.com/ts/book/ch_typescript-workflows.html](https://exploringjs.com/ts/book/ch_typescript-workflows.html)
- en: (Ad, please don’t block.)
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: （广告，请勿遮挡。）
- en: '[6.1 TypeScript is JavaScript plus type syntax](#typescript-is-javascript-plus-type-syntax)'
  id: totrans-3
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[6.1 TypeScript 是 JavaScript 加上类型语法](#typescript-is-javascript-plus-type-syntax)'
- en: '[6.2 Ways of running TypeScript code](#ways-of-running-typescript-code)'
  id: totrans-4
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[6.2 运行 TypeScript 代码的方式](#ways-of-running-typescript-code)'
- en: '[6.2.1 Running TypeScript directly](#running-typescript-directly-1)'
  id: totrans-5
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[6.2.1 直接运行 TypeScript](#running-typescript-directly-1)'
- en: '[6.2.2 Bundling TypeScript](#bundling)'
  id: totrans-6
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[6.2.2 打包 TypeScript](#bundling)'
- en: '[6.2.3 Transpiling TypeScript to JavaScript](#transpiling-typescript-to-javascript)'
  id: totrans-7
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[6.2.3 将 TypeScript 转译为 JavaScript](#transpiling-typescript-to-javascript)'
- en: '[6.2.4 The filename extensions of locally imported TypeScript modules](#the-filename-extensions-of-locally-imported-typescript-modules)'
  id: totrans-8
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[6.2.4 本地导入 TypeScript 模块的文件扩展名](#the-filename-extensions-of-locally-imported-typescript-modules)'
- en: '[6.3 Publishing a library package to the npm registry](#publishing-a-library-package-to-the-npm-registry)'
  id: totrans-9
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[6.3 将库包发布到 npm 注册表](#publishing-a-library-package-to-the-npm-registry)'
- en: '[6.3.1 Essential: `.js` and `.d.ts`](#essential-js-and-d-ts)'
  id: totrans-10
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[6.3.1 基本：`.js` 和 `.d.ts` 文件](#essential-js-and-d-ts)'
- en: '[6.3.2 Optional: source maps](#optional-source-maps)'
  id: totrans-11
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[6.3.2 可选：源映射](#optional-source-maps)'
- en: '[6.4 DefinitelyTyped: a repository with types for type-less npm packages](#definitelytyped-a-repository-with-types-for-type-less-npm-packages)'
  id: totrans-12
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[6.4 DefinitelyTyped：一个为无类型 npm 包提供类型的仓库](#definitelytyped-a-repository-with-types-for-type-less-npm-packages)'
- en: '[6.5 Compiling TypeScript with tools other than `tsc`](#compiling-typescript-with-tools-other-than-tsc)'
  id: totrans-13
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[6.5 使用除 `tsc` 之外的工具编译 TypeScript](#compiling-typescript-with-tools-other-than-tsc)'
- en: '[6.5.1 Type stripping](#type-stripping-1)'
  id: totrans-14
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[6.5.1 类型剥离](#type-stripping-1)'
- en: '[6.5.2 Isolated declarations](#isolated-declarations)'
  id: totrans-15
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[6.5.2 隔离声明](#isolated-declarations)'
- en: '[6.6 JSR – the JavaScript registry](#jsr-the-javascript-registry)'
  id: totrans-16
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[6.6 JSR – JavaScript 注册表](#jsr-the-javascript-registry)'
- en: '[6.6.1 Who owns JSR?](#who-owns-jsr)'
  id: totrans-17
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[6.6.1 JSR 属于谁？](#who-owns-jsr)'
- en: '[6.7 Editing TypeScript](#editing-typescript)'
  id: totrans-18
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[6.7 编辑 TypeScript](#editing-typescript)'
- en: '[6.8 Type-checking JavaScript files](#check-js)'
  id: totrans-19
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[6.8 检查 JavaScript 文件中的类型](#check-js)'
- en: 'Read this chapter if you are a JavaScript programmer and want to get a rough
    idea of what using TypeScript is like (think first step before learning more details).
    You’ll get answers to the following questions:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你是 JavaScript 程序员并且想大致了解使用 TypeScript 的感觉（在学习更多细节之前先迈出第一步），请阅读本章。你将得到以下问题的答案：
- en: How is TypeScript code different from JavaScript code?
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: TypeScript 代码与 JavaScript 代码有何不同？
- en: How is TypeScript code run?
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: TypeScript 代码是如何运行的？
- en: How does TypeScript help during editing in an IDE?
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: TypeScript 是如何帮助在 IDE 中进行编辑的？
- en: Etc.
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 等等。
- en: This chapter focuses on how TypeScript works. If you want to know more about
    why it is useful, see [“Sales pitch for TypeScript” (§2)](ch_why-typescript.html#ch_why-typescript).
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 本章重点介绍 TypeScript 的工作原理。如果你想了解更多关于为什么它有用的信息，请参阅[“TypeScript 的销售方案”（§2）](ch_why-typescript.html#ch_why-typescript)。
- en: '[6.1 TypeScript is JavaScript plus type syntax](#typescript-is-javascript-plus-type-syntax)'
  id: totrans-26
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[6.1 TypeScript 是 JavaScript 加上类型语法](#typescript-is-javascript-plus-type-syntax)'
- en: 'Let’s start with a rough first description of what TypeScript is. That description
    is not completely accurate (there are exceptions and details that I’m omitting),
    but it should give you a solid first idea:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从对 TypeScript 的初步描述开始。这个描述并不完全准确（有一些例外和细节我省略了），但它应该给你一个坚实的基础：
- en: TypeScript is JavaScript plus type syntax.
  id: totrans-28
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: TypeScript 是 JavaScript 加上类型语法。
- en: What are the purposes of these two parts?
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 这两部分的目的有哪些？
- en: 'The JavaScript syntax is what is run and what exists at runtime: In order to
    run TypeScript code, the type syntax must be removed – via compilation that results
    in pure JavaScript. That code is executed by a JavaScript engine.'
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: JavaScript 语法是运行时存在的语法：为了运行 TypeScript 代码，必须移除类型语法——通过编译生成纯 JavaScript。该代码由
    JavaScript 引擎执行。
- en: 'The type syntax is only used during editing and compiling; it has no effect
    at runtime:'
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 类型语法仅在编辑和编译期间使用；它在运行时没有影响：
- en: On one hand, it supports *type checking* which reports errors if there are inconsistencies
    within the types or between the types and the JavaScript values. Type checking
    runs during editing and during compiling.
  id: totrans-32
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一方面，它支持 *类型检查*，如果类型之间存在不一致或类型与 JavaScript 值之间存在不一致，则会报告错误。类型检查在编辑和编译期间运行。
- en: On the other hand, the types improve editing via auto-completion, type hints,
    refactorings, etc.
  id: totrans-33
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 另一方面，类型通过自动完成、类型提示、重构等提高了编辑效率。
- en: 'Consider the following TypeScript code:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑以下TypeScript代码：
- en: '[PRE0]'
  id: totrans-35
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'If we want to run this code, we have to remove the type syntax and get JavaScript
    that is executed by a JavaScript engine:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们想运行这段代码，我们必须移除类型语法，并得到由JavaScript引擎执行的JavaScript：
- en: '[PRE1]'
  id: totrans-37
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '[6.2 Ways of running TypeScript code](#ways-of-running-typescript-code)'
  id: totrans-38
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[6.2 TypeScript代码的运行方式](#ways-of-running-typescript-code)'
- en: 'Consider the following TypeScript project:'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑以下TypeScript项目：
- en: '[PRE2]'
  id: totrans-40
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '`tsconfig.json` is a configuration file that tells TypeScript how to type-check
    and compile our code.'
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`tsconfig.json`是一个配置文件，它告诉TypeScript如何检查和编译我们的代码。'
- en: The remaining files are TypeScript source code.
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 剩余的文件是TypeScript源代码。
- en: Let’s explore the different ways in which we can run this code.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们探索我们可以运行此代码的不同方式。
- en: '[6.2.1 Running TypeScript directly](#running-typescript-directly-1)'
  id: totrans-44
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[6.2.1 直接运行TypeScript](#running-typescript-directly-1)'
- en: 'Most server-side runtimes now can run TypeScript code directly – e.g., Node.js,
    Deno and Bun. In other words, the following works in Node.js 23.6.0+:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 现在大多数服务器端运行时都可以直接运行TypeScript代码——例如，Node.js、Deno和Bun。换句话说，以下在Node.js 23.6.0+中有效：
- en: '[PRE3]'
  id: totrans-46
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '[6.2.2 Bundling TypeScript](#bundling)'
  id: totrans-47
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[6.2.2 打包TypeScript](#bundling)'
- en: 'When developing a web app, *bundling* is a common practice – even for pure
    JavaScript projects: All the JavaScript code (app code and library code) is combined
    into a single JavaScript file (sometimes more, but never more than a few) – which
    is typically loaded from an HTML file. That has several benefits:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 在开发Web应用程序时，*打包*是一种常见的做法——即使是纯JavaScript项目：所有的JavaScript代码（应用程序代码和库代码）都被合并成一个单一的JavaScript文件（有时更多，但永远不会超过几个）——通常是从HTML文件中加载的。这有几个好处：
- en: Prior to HTTP/2, only one file could be served per connection. But that benefit
    of bundling is not relevant anymore.
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在HTTP/2之前，每个连接只能服务一个文件。但打包的好处现在不再相关。
- en: Each file the client has to request and process, still incurs a little overhead
    (even though no new connection is opened).
  id: totrans-50
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 客户端请求并处理的每个文件，仍然会产生一点开销（即使没有打开新的连接）。
- en: Web servers don’t have to serve many (often small) files – which helps with
    efficiency.
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Web服务器不需要服务许多（通常是小的）文件——这有助于提高效率。
- en: A single large file can be compressed better than many small files.
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个大文件比许多小文件压缩得更好。
- en: 'Most bundlers support TypeScript – either directly or via plugins. That means,
    we run our TypeScript code via the JavaScript file `bundle.js` that was produced
    by a bundler:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数打包器都支持TypeScript——直接或通过插件。这意味着，我们通过打包器生成的JavaScript文件`bundle.js`运行我们的TypeScript代码：
- en: '[PRE4]'
  id: totrans-54
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '[6.2.3 Transpiling TypeScript to JavaScript](#transpiling-typescript-to-javascript)'
  id: totrans-55
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[6.2.3 将TypeScript转换为JavaScript](#transpiling-typescript-to-javascript)'
- en: Another option is to compile out TypeScript app to JavaScript via the TypeScript
    compiler `tsc` and run the resulting code. Before server-side JavaScript runtimes
    had built-in support for TypeScript, that was the only way we could run TypeScript
    there.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个选项是通过TypeScript编译器`tsc`将TypeScript应用程序编译成JavaScript，并运行生成的代码。在服务器端JavaScript运行时还没有内置对TypeScript的支持之前，这是我们在那里运行TypeScript的唯一方法。
- en: 'Compiling source code to source code is also called *transpiling*. `tsconfig.json`
    specifies where the transpilation output is written. Let’s assume we write it
    to the directory `dist/`:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 将源代码编译成源代码也称为*转换*。`tsconfig.json`指定了转换输出写入的位置。假设我们将其写入`dist/`目录：
- en: '[PRE5]'
  id: totrans-58
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: '[6.2.4 The filename extensions of locally imported TypeScript modules](#the-filename-extensions-of-locally-imported-typescript-modules)'
  id: totrans-59
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[6.2.4 本地导入TypeScript模块的文件名扩展名](#the-filename-extensions-of-locally-imported-typescript-modules)'
- en: When it comes to filename extensions of locally imported TypeScript modules,
    we must distinguish between code that is transpiled and code that is run directly.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 当涉及到本地导入TypeScript模块的文件名扩展名时，我们必须区分被转换的代码和直接运行的代码。
- en: 'By default, TypeScript does not change the specifiers of imported modules.
    Therefore, code that is transpiled must look like this (we import `util.js`, from
    JavaScript code):'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，TypeScript不会更改导入模块的指定符。因此，必须转换的代码看起来像这样（从JavaScript代码中导入`util.js`）：
- en: '[PRE6]'
  id: totrans-62
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'However, such code does not work if we run it directly. There, we must write
    (we import `util.ts` from TypeScript code):'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，如果我们直接运行这样的代码，它将不起作用。在那里，我们必须编写（从TypeScript代码中导入`util.ts`）：
- en: '[PRE7]'
  id: totrans-64
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: We can also tell TypeScript to change the filename extensions of local imports
    from `.ts` to `.js` ([more information](ch_tsconfig-json.html#running-typescript-directly)).
    Then the previous code can also be transpiled.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还可以告诉TypeScript将本地导入的文件名扩展名从`.ts`更改为`.js`（[更多信息](ch_tsconfig-json.html#running-typescript-directly)）。然后之前的代码也可以被转换。
- en: '[6.3 Publishing a library package to the npm registry](#publishing-a-library-package-to-the-npm-registry)'
  id: totrans-66
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[6.3 将库包发布到 npm 注册表](#publishing-a-library-package-to-the-npm-registry)'
- en: 'The npm registry is still the most popular means of publishing packages. Even
    though Node.js runs TypeScript code, packages must be deployed as JavaScript code.
    That enables JavaScript code to use library packages written in TypeScript. However,
    we additionally want to support TypeScript features. Therefore, a single library
    file `lib.ts` is often deployed as five files (four of which are compiled by TypeScript
    from `lib.ts`):'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: npm 注册表仍然是发布包最受欢迎的方式。尽管 Node.js 运行 TypeScript 代码，但包必须作为 JavaScript 代码部署。这使 JavaScript
    代码可以使用用 TypeScript 编写的库包。然而，我们还想支持 TypeScript 功能。因此，单个库文件 `lib.ts` 通常部署为五个文件（其中四个由
    TypeScript 从 `lib.ts` 编译而成）：
- en: 'Essential:'
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 必要的：
- en: '`lib.js`: the JavaScript part of `lib.ts`'
  id: totrans-69
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`lib.js`：`lib.ts` 的 JavaScript 部分'
- en: '`lib.d.ts`: the type part of `lib.ts` (a *declaration file*)'
  id: totrans-70
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`lib.d.ts`：`lib.ts` 的类型部分（一个 *声明文件*）'
- en: 'Optional: source maps. They map source code locations of compilation output
    to `lib.ts`.'
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可选：源映射。它们将编译输出的源代码位置映射到 `lib.ts`。
- en: '`lib.js.map`: source map for `lib.js`'
  id: totrans-72
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`lib.js.map`：`lib.js` 的源映射'
- en: '`lib.d.ts.map`: source map for `lib.d.ts`'
  id: totrans-73
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`lib.d.ts.map`：`lib.d.ts` 的源映射'
- en: '`lib.ts`: the target of the previous two source maps'
  id: totrans-74
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`lib.ts`：前两个源映射的目标'
- en: (More on what all of that means in a second.)
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: （关于这一切意味着什么的更多内容将在下一部分中讨论。）
- en: 'As an example, consider the following library package:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，考虑以下库包：
- en: '[PRE8]'
  id: totrans-77
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: '`package.json` is npm’s description of our library package. Some of its data,
    such as the so-called *package exports*, are also used by TypeScript – e.g. to
    look up type information when someone imports from our package.'
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`package.json` 是 npm 对我们的库包的描述。其中一些数据，如所谓的 *package exports*，也被 TypeScript
    使用——例如，当有人从我们的包中导入时查找类型信息。'
- en: Every file in `dist/` was generated by TypeScript. While it is uploaded to the
    npm registry, it is usually not added to version control systems because it can
    easily be regenerated.
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`dist/` 目录中的每个文件都是由 TypeScript 生成的。虽然它被上传到 npm 注册表，但通常不会添加到版本控制系统中，因为它可以很容易地重新生成。'
- en: Only `tsconfig.json` is not uploaded to the npm registry.
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 只有 `tsconfig.json` 没有上传到 npm 注册表。
- en: '[6.3.1 Essential: `.js` and `.d.ts`](#essential-js-and-d-ts)'
  id: totrans-81
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[6.3.1 必要的：`.js` 和 `.d.ts`](#essential-js-and-d-ts)'
- en: 'It’s interesting to see the combined JavaScript plus types in `.lib.ts` be
    split into `lib.js` with only JavaScript and `lib.d.ts` with only types. Why do
    that? It enables library packages to be used by either JavaScript code or TypeScript
    code:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 看到结合在 `.lib.ts` 中的 JavaScript 和类型被拆分为只包含 JavaScript 的 `lib.js` 和只包含类型的 `lib.d.ts`
    是很有趣的。为什么这样做？这使库包既能被 JavaScript 代码使用，也能被 TypeScript 代码使用：
- en: JavaScript code can ignore `.d.ts` files.
  id: totrans-83
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: JavaScript 代码可以忽略 `.d.ts` 文件。
- en: TypeScript uses them for type checking, auto-completion, refactorings, etc.
  id: totrans-84
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: TypeScript 使用它们进行类型检查、自动补全、重构等。
- en: Actually, behind the scenes, many editors (e.g. Visual Studio Code) use a kind
    of lightweight TypeScript mode when editing JavaScript code so that we also get
    simple type checking and code completion there.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 实际上，在幕后，许多编辑器（例如 Visual Studio Code）在编辑 JavaScript 代码时使用一种轻量级的 TypeScript 模式，这样我们也能在那里获得简单的类型检查和代码补全。
- en: This is the TypeScript input `lib.ts`
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 这是 TypeScript 输入 `lib.ts`
- en: '[PRE9]'
  id: totrans-87
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'It is split into `lib.js` on one hand:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 它被拆分为 `lib.js` 一方面：
- en: '[PRE10]'
  id: totrans-89
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'And `lib.d.ts` on the other hand:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 另一方面，`lib.d.ts`：
- en: '[PRE11]'
  id: totrans-91
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'Notes:'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 备注：
- en: Both files point to their source maps.
  id: totrans-93
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这两个文件都指向它们的源映射。
- en: 'By default, both files contain comments (but we can tell TypeScript not to
    include them):'
  id: totrans-94
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 默认情况下，这两个文件都包含注释（但我们也可以告诉 TypeScript 不要包含它们）：
- en: '`lib.js` has all comments so that the code is easier to read.'
  id: totrans-95
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`lib.js` 包含所有注释，这样代码更容易阅读。'
- en: '`lib.d.ts` only has JSDoc comments (`/** */`) because they are used by many
    IDEs to display inline documentation.'
  id: totrans-96
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`lib.d.ts` 只包含 JSDoc 注释 (`/** */`)，因为它们被许多 IDE 用于显示内联文档。'
- en: '[6.3.2 Optional: source maps](#optional-source-maps)'
  id: totrans-97
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[6.3.2 可选：源映射](#optional-source-maps)'
- en: 'If we compile a file `I` to a file `O` then a source map for `O` maps source
    code locations in `O` to source code locations in `I`. That means we can work
    with `O` but display information from `I` – e.g.:'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们将文件 `I` 编译成文件 `O`，则 `O` 的源映射将 `O` 中的源代码位置映射到 `I` 中的源代码位置。这意味着我们可以使用 `O`，但显示来自
    `I` 的信息——例如：
- en: '`lib.js.map`: maps `lib.js` locations to `lib.ts` locations and gives us debugging
    and stack traces for the latter when we run the former.'
  id: totrans-99
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`lib.js.map`：将 `lib.js` 位置映射到 `lib.ts` 位置，并在运行前者时为我们提供后者的调试和堆栈跟踪。'
- en: '`lib.d.ts.map`: maps `lib.d.ts` lines to `lib.ts` lines. It enables “go to
    definition” for imports from `lib.ts` to take us to that file.'
  id: totrans-100
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`lib.d.ts.map`：将 `lib.d.ts` 的行映射到 `lib.ts` 的行。它使得从 `lib.ts` 的导入能够实现“转到定义”功能，带我们到那个文件。'
- en: All source-map-related functionality except stack traces require access to the
    original TypeScript source code. That’s why it makes sense to include `lib.ts`
    if there are source maps.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 除了堆栈跟踪之外，所有与 source-map 相关的功能都需要访问原始 TypeScript 源代码。这就是为什么如果存在 source maps，包含
    `lib.ts` 是有意义的。
- en: 'This is what `lib.js.map` looks like:'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 这就是 `lib.js.map` 的样子：
- en: '[PRE12]'
  id: totrans-103
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'This is what `lib.d.ts.map` looks like:'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 这就是 `lib.d.ts.map` 的样子：
- en: '[PRE13]'
  id: totrans-105
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: In both cases, the actual content of `"mappings"` was abbreviated. And in the
    actual output of `tsc`, the JSON is always squeezed into a single line.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 在这两种情况下，实际内容中的 `"mappings"` 都被缩略了。并且在实际的 `tsc` 输出中，JSON 总是被压缩成单行。
- en: '[6.4 DefinitelyTyped: a repository with types for type-less npm packages](#definitelytyped-a-repository-with-types-for-type-less-npm-packages)'
  id: totrans-107
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[6.4 DefinitelyTyped：一个为无类型 npm 包提供类型的仓库](#definitelytyped-a-repository-with-types-for-type-less-npm-packages)'
- en: 'These days, many npm packages come with TypeScript types. However, not all
    of them do. In that case, [DefinitelyTyped](https://definitelytyped.org) may help:
    If it supports a type-less package `pkg` then we can additionally install a package
    `@types/pkg` with types for `pkg`.'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 这些天，许多 npm 包都附带 TypeScript 类型。然而，并非所有都这样做。在这种情况下，[DefinitelyTyped](https://definitelytyped.org)
    可能会帮助：如果它支持无类型的包 `pkg`，那么我们可以额外安装一个带有 `pkg` 类型的包 `@types/pkg`。
- en: One important DefinitelyTyped package for Node.js is `@types/node` with types
    for all of its APIs. If you develop TypeScript on Node.js, you will usually have
    this package as a development dependency.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 对于 Node.js 来说，一个重要的 DefinitelyTyped 包是 `@types/node`，它包含了所有其 API 的类型。如果你在 Node.js
    上开发 TypeScript，你通常会把这个包作为一个开发依赖项。
- en: '[6.5 Compiling TypeScript with tools other than `tsc`](#compiling-typescript-with-tools-other-than-tsc)'
  id: totrans-110
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[6.5 编译 TypeScript 而不是使用 `tsc` 的工具](#compiling-typescript-with-tools-other-than-tsc)'
- en: 'Let’s recap all the tasks performed by `tsc` (we’ll ignore source maps in this
    section):'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们回顾一下 `tsc` 执行的所有任务（在本节中我们将忽略 source maps）：
- en: It compiles TypeScript files to JavaScript files.
  id: totrans-112
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 它将 TypeScript 文件编译成 JavaScript 文件。
- en: It compiles TypeScript files to type declaration files.
  id: totrans-113
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 它将 TypeScript 文件编译成类型声明文件。
- en: It type-checks TypeScript files.
  id: totrans-114
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 它检查 TypeScript 文件。
- en: '##3 is so complex that only `tsc` can do it. However, for both #1 and #2, there
    are slightly simpler subsets of TypeScript where compilation does not involve
    much more than syntactic processing. That means that we can use external, faster
    tools for #1 and #2.'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 第 3 点非常复杂，只有 `tsc` 才能完成。然而，对于第 1 点和第 2 点，TypeScript 有一些稍微简单的子集，编译过程并不涉及太多除了语法处理之外的工作。这意味着我们可以为第
    1 点和第 2 点使用外部、更快的工具。
- en: There are even `tsconfig.json` settings to warn us if we don’t stay within those
    subsets of TypeScript ([more information](ch_tsconfig-json.html#compiling-without-tsc)).
    Doing that is not much of a sacrifice in practice.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 甚至有 `tsconfig.json` 设置来警告我们是否没有保持在 TypeScript 的那些子集内（[更多信息](ch_tsconfig-json.html#compiling-without-tsc)）。在实践中，这样做并不是很大的牺牲。
- en: '[6.5.1 Type stripping](#type-stripping-1)'
  id: totrans-117
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[6.5.1 类型剥离](#type-stripping-1)'
- en: '*Type stripping* is a simple and fast way of compiling TypeScript to JavaScript.
    It’s what Node.js uses when it runs TypeScript. Type stripping is fast because
    it only supports a subset of TypeScript where two things are possible:'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: '*类型剥离* 是将 TypeScript 编译成 JavaScript 的简单快捷方式。这是 Node.js 运行 TypeScript 时所使用的。类型剥离之所以快速，是因为它只支持
    TypeScript 的一个子集，其中有两件事是可能的：'
- en: Type syntax can be detected and removed by only parsing the syntax – without
    performing additional semantic analyses.
  id: totrans-119
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 类型语法可以通过仅解析语法来检测和删除，而无需执行额外的语义分析。
- en: 'No non-type language features are transpiled. In other words: Removing the
    type syntax is enough to produce JavaScript.'
  id: totrans-120
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 没有非类型语言特性会被转换。换句话说：移除类型语法就足以生成 JavaScript。
- en: '#2 means that there are several TypeScript features that we can’t use – e.g.,
    enums and JSX (HTML-like syntax inside TypeScript, as used, e.g., by React).'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 第 2 点意味着有一些 TypeScript 特性我们无法使用——例如，枚举和 JSX（TypeScript 中的类似 HTML 的语法，例如 React
    所使用的）。
- en: One considerable benefit of type stripping is that it does not need any configuration
    (via `tsconfig.json` or other means) because it’s so simple. That makes platforms
    that use it more stable w.r.t. changes made to TypeScript.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 类型剥离的一个显著好处是它不需要任何配置（通过 `tsconfig.json` 或其他方式），因为它非常简单。这使得使用它的平台在 TypeScript
    的更改方面更加稳定。
- en: '[6.5.1.1 Type stripping technique: replacing types with spaces](#ts-blank-space)'
  id: totrans-123
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: '[6.5.1.1 类型剥离技术：用空格替换类型](#ts-blank-space)'
- en: 'One clever technique for type stripping was pioneered by the [`ts-blank-space`](https://bloomberg.github.io/ts-blank-space/)
    tool (by Ashley Claymore for Bloomberg): Instead of simply removing the type syntax,
    it replaces it with spaces. That means that source code positions in the output
    don’t change. Therefore, any positions that show up (e.g.) in stack traces still
    work for the input and there is less of a need for source maps: You still need
    them for debugging and going to definitions but JavaScript generated by type stripping
    is relatively close to the original TypeScript and you are often OK even then.'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: '`ts-blank-space` 工具（由 Ashley Claymore 为 Bloomberg 开发）开创了一种类型剥离的巧妙技术：它不是简单地移除类型语法，而是用空格替换它。这意味着输出中的源代码位置不会改变。因此，任何出现在（例如）堆栈跟踪中的位置对于输入仍然有效，并且减少了源映射的需求：你仍然需要它们进行调试和跳转到定义，但类型剥离生成的
    JavaScript 相对接近原始 TypeScript，你通常也能接受。'
- en: 'For example - input (TypeScript):'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 例如 - 输入（TypeScript）：
- en: '[PRE14]'
  id: totrans-126
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'Output (JavaScript):'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 输出（JavaScript）：
- en: '[PRE15]'
  id: totrans-128
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: If you want to explore further, you can check out [the ts-blank-space playground](https://bloomberg.github.io/ts-blank-space/play/).
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想进一步探索，可以查看 [ts-blank-space 演示场](https://bloomberg.github.io/ts-blank-space/play/)。
- en: '[6.5.2 Isolated declarations](#isolated-declarations)'
  id: totrans-130
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[6.5.2 隔离声明](#isolated-declarations)'
- en: “Isolated declaration” is a style of writing TypeScript that makes it easier
    for external tools to generate declaration files. It mainly means we have to add
    type annotations in locations where the TypeScript compiler `tsc` does not need
    them – thanks to its ability to automatically derive types (so-called *type inference*).
    However, external tools are simpler and faster if they don’t need that ability.
    Additionally, they don’t have to visit and analyze external files if the type
    information is provided locally.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: “隔离声明”是一种 TypeScript 编写风格，使得外部工具生成声明文件更加容易。它主要意味着我们必须在 TypeScript 编译器 `tsc`
    不需要类型注解的位置添加类型注解——多亏了其自动推导类型（所谓 *类型推断*）的能力。然而，如果外部工具不需要这种能力，它们会更简单、更快。此外，如果类型信息是本地提供的，它们也不必访问和分析外部文件。
- en: 'The following example shows how the isolated declaration style changes code:'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 以下示例显示了隔离声明风格如何改变代码：
- en: '[PRE16]'
  id: totrans-133
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: Note that isolated declarations only affect constructs that are exported. Module-internal
    code does not show up in declaration files.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，隔离声明只影响导出的结构。模块内部代码不会出现在声明文件中。
- en: '[6.6 JSR – the JavaScript registry](#jsr-the-javascript-registry)'
  id: totrans-135
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[6.6 JSR – JavaScript 注册表](#jsr-the-javascript-registry)'
- en: '[The JavaScript registry JSR](https://jsr.io) is an alternative to npm and
    the npm registry for publishing packages. It works as follows:'
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: '[JavaScript 注册表 JSR](https://jsr.io) 是 npm 和 npm 注册表发布包的替代方案。它的工作原理如下：'
- en: For TypeScript packages, you only upload `.ts` files.
  id: totrans-137
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于 TypeScript 包，你只需上传 `.ts` 文件。
- en: 'How to install a TypeScript package depends on the platform:'
  id: totrans-138
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装 TypeScript 包的方法取决于平台：
- en: On JavaScript platforms where TypeScript-only library packages are supported,
    JSR only installs TypeScript.
  id: totrans-139
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在支持 TypeScript 库包的 JavaScript 平台上，JSR 只会安装 TypeScript。
- en: On all other platforms, JSR automatically generates `.js` files and `.d.ts`
    files and installs those, along with the `.ts` files. To make automatic generation
    possible, the TypeScript code must follow a set of rules called [“no slow types”](https://jsr.io/docs/about-slow-types)
    – which is similar to [isolated declarations](#isolated-declarations).
  id: totrans-140
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在所有其他平台上，JSR 会自动生成 `.js` 文件和 `.d.ts` 文件，并安装这些文件以及 `.ts` 文件。为了使自动生成成为可能，TypeScript
    代码必须遵循一组称为 [“无慢类型”](https://jsr.io/docs/about-slow-types) 的规则——这与 [隔离声明](#isolated-declarations)
    类似。
- en: In contrast, with the npm registry, your TypeScript library package is only
    usable on Node.js if you upload `.js` files and `.d.ts` files.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 相比之下，使用 npm 注册表，如果你的 TypeScript 库包需要支持 Node.js，你必须上传 `.js` 文件和 `.d.ts` 文件。
- en: JSR also provides several features that npm doesn’t such as automatic generation
    of documentation. See [“Why JSR?”](https://jsr.io/docs/why) in the official documentation
    for more information.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: JSR 还提供了一些 npm 没有的功能，例如自动生成文档。有关更多信息，请参阅官方文档中的 [“为什么选择 JSR？”](https://jsr.io/docs/why)。
- en: '[6.6.1 Who owns JSR?](#who-owns-jsr)'
  id: totrans-143
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[6.6.1 谁拥有 JSR？](#who-owns-jsr)'
- en: 'Quoting the official documentation page [“Governance”](https://jsr.io/docs/governance/overview):'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 引用官方文档页面 [“治理”](https://jsr.io/docs/governance/overview)：
- en: JSR is not owned by any one person or organization. It is a community-driven
    project that is open to all, built for the entire JavaScript ecosystem.
  id: totrans-145
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: JSR 不属于任何个人或组织。它是一个面向所有人的社区驱动项目，为整个 JavaScript 生态系统而构建。
- en: ''
  id: totrans-146
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: JSR is currently operated by the Deno company. We are currently working on establishing
    a governance board to oversee the project, which will then work on moving the
    project to a foundation.
  id: totrans-147
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: JSR 目前由 Deno 公司运营。我们目前正在努力建立一个治理委员会来监督项目，然后该项目将致力于将项目转移到基金会。
- en: '[6.7 Editing TypeScript](#editing-typescript)'
  id: totrans-148
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[6.7 编辑 TypeScript](#editing-typescript)'
- en: 'Two popular IDEs for JavaScript are:'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 两个流行的 JavaScript IDE 是：
- en: '[*Visual Studio Code*](https://code.visualstudio.com/) (free)'
  id: totrans-150
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[*Visual Studio Code*](https://code.visualstudio.com/)（免费）'
- en: '[*WebStorm*](https://www.jetbrains.com/webstorm/) (free for non-commercial
    use)'
  id: totrans-151
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[*WebStorm*](https://www.jetbrains.com/webstorm/)（非商业用途免费）'
- en: The observations in this section are about Visual Studio Code, but may apply
    to other IDEs, too.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 本节中的观察结果主要关于 Visual Studio Code，但也可能适用于其他 IDE。
- en: 'With Visual Studio Code, we get two different ways of type checking:'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 Visual Studio Code，我们有两种不同的类型检查方式：
- en: Any file that is currently open is automatically type-checked within Visual
    Studio Code. It order to provide that functionality, it comes with its own installation
    of TypeScript.
  id: totrans-154
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 Visual Studio Code 中，任何当前打开的文件都会自动进行类型检查。为了提供这种功能，它自带了 TypeScript 的安装。
- en: If we want to type-check all of a code base, we must invoke the TypeScript compiler
    `tsc`. We can do that via Visual Studio Code’s *tasks* – a built-in way of invoking
    external tools (for type checking, compiling, bundling, etc.). The official documentation
    has [more information on tasks](https://code.visualstudio.com/Docs/editor/tasks).
  id: totrans-155
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果我们想要检查整个代码库的类型，我们必须调用 TypeScript 编译器 `tsc`。我们可以通过 Visual Studio Code 的 *任务*
    来做这件事——这是一种调用外部工具（用于类型检查、编译、打包等）的内置方式。官方文档有关于任务的[更多信息](https://code.visualstudio.com/Docs/editor/tasks)。
- en: '[6.8 Type-checking JavaScript files](#check-js)'
  id: totrans-156
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[6.8 类型检查 JavaScript 文件](#check-js)'
- en: 'Optionally, TypeScript can also type-check JavaScript files. Obviously that
    will only give us limited results. However, to help TypeScript, we can add type
    information via JSDoc comments – e.g.:'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 可选地，TypeScript 也可以检查 JavaScript 文件。显然，这将只给我们有限的结果。然而，为了帮助 TypeScript，我们可以通过
    JSDoc 注释添加类型信息——例如：
- en: '[PRE17]'
  id: totrans-158
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: If we do that, we are still writing TypeScript, just with a different syntax.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们这样做，我们仍然在编写 TypeScript，只是使用了不同的语法。
- en: 'Benefits of this approach:'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 这种方法的优点：
- en: No need for a build step to run the code – even on platforms (such as browsers)
    that don’t support TypeScript.
  id: totrans-161
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 运行代码不需要构建步骤——即使在不支持 TypeScript 的平台（如浏览器）上也不需要。
- en: We can also generate `.d.ts` files from `.js` files with JSDoc comments. That
    is an extra build step, though. How to do that is explained in [the TypeScript
    Handbook](https://www.typescriptlang.org/docs/handbook/declaration-files/dts-from-js.html).
  id: totrans-162
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们也可以使用 JSDoc 注释从 `.js` 文件生成 `.d.ts` 文件。虽然这是一个额外的构建步骤，但如何操作在 [TypeScript 手册](https://www.typescriptlang.org/docs/handbook/declaration-files/dts-from-js.html)
    中有解释。
- en: It enables us to make a JavaScript code base more type-safe – in small incremental
    steps.
  id: totrans-163
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它使我们能够以小步骤的方式使 JavaScript 代码库更安全——类型安全。
- en: 'Downside of this approach:'
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 这种方法的缺点：
- en: The syntax becomes less pleasant to use.
  id: totrans-165
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 语法变得不那么容易使用。
- en: 'To explain the downside – consider how we define an interface in TypeScript:'
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 为了解释其缺点——考虑我们在 TypeScript 中如何定义一个接口：
- en: '[PRE18]'
  id: totrans-167
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'Doing that via a JSDoc comment looks like this:'
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 通过 JSDoc 注释实现的方式如下所示：
- en: '[PRE19]'
  id: totrans-169
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'More information in the TypeScript Handbook:'
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 更多信息请参阅 TypeScript 手册：
- en: '[“Type Checking JavaScript Files”](https://www.typescriptlang.org/docs/handbook/type-checking-javascript-files.html)'
  id: totrans-171
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[“类型检查 JavaScript 文件”](https://www.typescriptlang.org/docs/handbook/type-checking-javascript-files.html)'
- en: '[“Creating `.d.ts` Files from `.js` files”](https://www.typescriptlang.org/docs/handbook/declaration-files/dts-from-js.html)'
  id: totrans-172
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[“从 `.js` 文件创建 `.d.ts` 文件”](https://www.typescriptlang.org/docs/handbook/declaration-files/dts-from-js.html)'
- en: '[“JSDoc Reference”](https://www.typescriptlang.org/docs/handbook/jsdoc-supported-types.html)'
  id: totrans-173
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[“JSDoc 参考”](https://www.typescriptlang.org/docs/handbook/jsdoc-supported-types.html)'
