<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>25 Control flow statements</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>25 Control flow statements</h1>
<blockquote>原文：<a href="https://exploringjs.com/js/book/ch_control-flow.html">https://exploringjs.com/js/book/ch_control-flow.html</a></blockquote>

        
    
    
    
<nav class="local-toc">
  <ol>
    <li>
      <a href="#controlling-loops-break-and-continue">25.1 Controlling loops: <code>break</code> and <code>continue</code></a>
      <ol>
        <li>
          <a href="#break">25.1.1 <code>break</code></a>
        </li>
        <li>
          <a href="#labels">25.1.2 <code>break</code> plus label: leaving any labeled statement</a>
        </li>
        <li>
          <a href="#continue">25.1.3 <code>continue</code></a>
        </li>
      </ol>
    </li>
    <li>
      <a href="#control-flow-conditions">25.2 Conditions of control flow statements</a>
    </li>
    <li>
      <a href="#if">25.3 <code>if</code> statements<span> <sup>ES1</sup></span></a>
      <ol>
        <li>
          <a href="#the-syntax-of-if-statements">25.3.1 The syntax of <code>if</code> statements</a>
        </li>
      </ol>
    </li>
    <li>
      <a href="#switch">25.4 <code>switch</code> statements<span> <sup>ES3</sup></span></a>
      <ol>
        <li>
          <a href="#a-first-example-of-a-switch-statement">25.4.1 A first example of a <code>switch</code> statement</a>
        </li>
        <li>
          <a href="#dont-forget-to-return-or-break">25.4.2 Don’t forget to <code>return</code> or <code>break</code>!</a>
        </li>
        <li>
          <a href="#empty-case-clauses">25.4.3 Empty case clauses</a>
        </li>
        <li>
          <a href="#checking-for-illegal-values-via-a-default-clause">25.4.4 Checking for illegal values via a <code>default</code> clause</a>
        </li>
        <li>
          <a href="#pitfall-switch-variable-scope">25.4.5 Pitfall of <code>switch</code>: all cases exist in the same variable scope</a>
        </li>
      </ol>
    </li>
    <li>
      <a href="#while">25.5 <code>while</code> loops<span> <sup>ES1</sup></span></a>
      <ol>
        <li>
          <a href="#examples-of-while-loops">25.5.1 Examples of <code>while</code> loops</a>
        </li>
      </ol>
    </li>
    <li>
      <a href="#do-while">25.6 <code>do-while</code> loops<span> <sup>ES3</sup></span></a>
    </li>
    <li>
      <a href="#for">25.7 <code>for</code> loops<span> <sup>ES1</sup></span></a>
      <ol>
        <li>
          <a href="#examples-of-for-loops">25.7.1 Examples of <code>for</code> loops</a>
        </li>
      </ol>
    </li>
    <li>
      <a href="#for-of">25.8 <code>for-of</code> loops<span> <sup>ES6</sup></span></a>
      <ol>
        <li>
          <a href="#const-forof-vs-for">25.8.1 <code>const</code>: <code>for-of</code> vs. <code>for</code></a>
        </li>
        <li>
          <a href="#iterating-over-iterables">25.8.2 Iterating over iterables</a>
        </li>
        <li>
          <a href="#for-of-iterating-index-element">25.8.3 Iterating over [index, element] pairs of Arrays</a>
        </li>
      </ol>
    </li>
    <li>
      <a href="#forawaitof-loops-es2018">25.9 <code>for-await-of</code> loops<span> <sup>ES2018</sup></span></a>
    </li>
    <li>
      <a href="#for-in">25.10 <code>for-in</code> loops (avoid)<span> <sup>ES1</sup></span></a>
    </li>
    <li>
      <a href="#recommendations-for-looping">25.11 Recommendations for looping</a>
    </li>
  </ol>
</nav>
<p>This chapter covers the following control flow statements:</p>
<ul>
  <li>
    <code>if</code> statement [ES1]
  </li>
  <li>
    <code>switch</code> statement [ES3]
  </li>
  <li>
    <code>while</code> loop [ES1]
  </li>
  <li>
    <code>do-while</code> loop [ES3]
  </li>
  <li>
    <code>for</code> loop [ES1]
  </li>
  <li>
    <code>for-of</code> loop [ES6]
  </li>
  <li>
    <code>for-await-of</code> loop [ES2018]
  </li>
  <li>
    <code>for-in</code> loop [ES1]
  </li>
</ul>
<h3 id="controlling-loops-break-and-continue"><a class="heading-id-link" href="#controlling-loops-break-and-continue">25.1 Controlling loops: <code>break</code> and <code>continue</code></a></h3>
<p>The two operators <code>break</code> and <code>continue</code> can be used to control loops and other statements while we are inside them.</p>
<h4 id="break"><a class="heading-id-link" href="#break">25.1.1 <code>break</code></a></h4>
<p><span id="index-entry-break"/></p>
<p>There are two versions of <code>break</code>:</p>
<ul>
  <li>
    One without an operand.
  </li>
  <li>
    One with a <em>label</em> as an operand.
  </li>
</ul>
<p>The former version works inside the following statements: <code>while</code>, <code>do-while</code>, <code>for</code>, <code>for-of</code>, <code>for-await-of</code>, <code>for-in</code> and <code>switch</code>. It immediately leaves the current statement:</p>
<pre class="language-js">
<code><span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> x <span class="hljs-keyword">of</span> [<span class="hljs-string">'a'</span>, <span class="hljs-string">'b'</span>, <span class="hljs-string">'c'</span>]) {</code>
<code>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(x);</code>
<code>  <span class="hljs-keyword">if</span> (x === <span class="hljs-string">'b'</span>) <span class="hljs-keyword">break</span>;</code>
<code>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'---'</span>)</code>
<code>}</code>
</pre>
<p>Output:</p>
<pre>
<code>a</code>
<code>---</code>
<code>b</code>
</pre>
<h4 id="labels"><a class="heading-id-link" href="#labels">25.1.2 <code>break</code> plus label: leaving any labeled statement</a></h4>
<p><span id="index-entry-label"/></p>
<p><code>break</code> with an operand works everywhere. Its operand is a <em>label</em>. Labels can be put in front of any statement, including blocks. <code>break myLabel</code> leaves the statement whose label is <code>myLabel</code>:</p>
<pre class="language-js">
<code><span class="hljs-attr">myLabel</span>: { <span class="hljs-comment">// label</span></code>
<code>  <span class="hljs-keyword">if</span> (condition) <span class="hljs-keyword">break</span> myLabel; <span class="hljs-comment">// labeled break</span></code>
<code>  <span class="hljs-comment">// ···</span></code>
<code>}</code>
</pre>
<h5 id="example-break-plus-label"><a class="heading-id-link" href="#example-break-plus-label">25.1.2.1 Example: <code>break</code> plus label</a></h5>
<p>In the following example, the search can either:</p>
<ul>
  <li>
    Fail: The loop finishes without finding a <code>result</code>. That is handled directly after the loop (line B).
  </li>
  <li>
    Succeed: While looping, we find a <code>result</code>. Then we use <code>break</code> plus label (line A) to skip the code that handles failure.
  </li>
</ul>
<pre class="language-js">
<code><span class="hljs-keyword">function</span> <span class="hljs-title function_">findSuffix</span>(<span class="hljs-params">stringArray, suffix</span>) {</code>
<code>  <span class="hljs-keyword">let</span> result;</code>
<code>  <span class="hljs-attr">searchBlock</span>: {</code>
<code>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> str <span class="hljs-keyword">of</span> stringArray) {</code>
<code>      <span class="hljs-keyword">if</span> (str.<span class="hljs-title function_">endsWith</span>(suffix)) {</code>
<code>        <span class="hljs-comment">// Success:</span></code>
<code>        result = str;</code>
<code>        <span class="hljs-keyword">break</span> searchBlock; <span class="hljs-comment">// (A)</span></code>
<code>      }</code>
<code>    } <span class="hljs-comment">// for</span></code>
<code>    <span class="hljs-comment">// Failure:</span></code>
<code>    result = <span class="hljs-string">'(Untitled)'</span>; <span class="hljs-comment">// (B)</span></code>
<code>  } <span class="hljs-comment">// searchBlock</span></code>
<code/>
<code>  <span class="hljs-keyword">return</span> { suffix, result };</code>
<code>    <span class="hljs-comment">// Same as: {suffix: suffix, result: result}</span></code>
<code>}</code>
<code>assert.<span class="hljs-title function_">deepEqual</span>(</code>
<code>  <span class="hljs-title function_">findSuffix</span>([<span class="hljs-string">'notes.txt'</span>, <span class="hljs-string">'index.html'</span>], <span class="hljs-string">'.html'</span>),</code>
<code>  { <span class="hljs-attr">suffix</span>: <span class="hljs-string">'.html'</span>, <span class="hljs-attr">result</span>: <span class="hljs-string">'index.html'</span> }</code>
<code>);</code>
<code>assert.<span class="hljs-title function_">deepEqual</span>(</code>
<code>  <span class="hljs-title function_">findSuffix</span>([<span class="hljs-string">'notes.txt'</span>, <span class="hljs-string">'index.html'</span>], <span class="hljs-string">'.mjs'</span>),</code>
<code>  { <span class="hljs-attr">suffix</span>: <span class="hljs-string">'.mjs'</span>, <span class="hljs-attr">result</span>: <span class="hljs-string">'(Untitled)'</span> }</code>
<code>);</code>
</pre>
<h4 id="continue"><a class="heading-id-link" href="#continue">25.1.3 <code>continue</code></a></h4>
<p><span id="index-entry-continue"/></p>
<p><code>continue</code> only works inside <code>while</code>, <code>do-while</code>, <code>for</code>, <code>for-of</code>, <code>for-await-of</code>, and <code>for-in</code>. It immediately leaves the current loop iteration and continues with the next one – for example:</p>
<pre class="language-js">
<code><span class="hljs-keyword">const</span> lines = [</code>
<code>  <span class="hljs-string">'Normal line'</span>,</code>
<code>  <span class="hljs-string">'# Comment'</span>,</code>
<code>  <span class="hljs-string">'Another normal line'</span>,</code>
<code>];</code>
<code><span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> line <span class="hljs-keyword">of</span> lines) {</code>
<code>  <span class="hljs-keyword">if</span> (line.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'#'</span>)) <span class="hljs-keyword">continue</span>;</code>
<code>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(line);</code>
<code>}</code>
</pre>
<p>Output:</p>
<pre>
<code>Normal line</code>
<code>Another normal line</code>
</pre>
<h3 id="control-flow-conditions"><a class="heading-id-link" href="#control-flow-conditions">25.2 Conditions of control flow statements</a></h3>
<p><code>if</code>, <code>while</code>, and <code>do-while</code> have conditions that are, in principle, boolean. However, a condition only has to be <em>truthy</em> (<code>true</code> if coerced to boolean) in order to be accepted. In other words, the following two control flow statements are equivalent:</p>
<pre class="language-js">
<code><span class="hljs-keyword">if</span> (value) {}</code>
<code><span class="hljs-keyword">if</span> (<span class="hljs-title class_">Boolean</span>(value) === <span class="hljs-literal">true</span>) {}</code>
</pre>
<p>This is a list of all <em>falsy</em> values:</p>
<ul>
  <li>
    <code>undefined</code>, <code>null</code>
  </li>
  <li>
    <code>false</code>
  </li>
  <li>
    <code>0</code>, <code>NaN</code>
  </li>
  <li>
    <code>0n</code>
  </li>
  <li>
    <code>''</code>
  </li>
</ul>
<p>All other values are truthy. For more information, see <a href="ch_booleans.html#falsiness-truthiness">“Falsy and truthy values” (§17.2)</a>.</p>
<h3 id="if"><a class="heading-id-link" href="#if">25.3 <code>if</code> statements<span> <sup>ES1</sup></span></a></h3>
<p><span id="index-entry-if"/></p>
<p>These are two simple <code>if</code> statements: one with just a “then” branch and one with both a “then” branch and an “else” branch:</p>
<pre class="language-js">
<code><span class="hljs-keyword">if</span> (cond) {</code>
<code>  <span class="hljs-comment">// then branch</span></code>
<code>}</code>
<code/>
<code><span class="hljs-keyword">if</span> (cond) {</code>
<code>  <span class="hljs-comment">// then branch</span></code>
<code>} <span class="hljs-keyword">else</span> {</code>
<code>  <span class="hljs-comment">// else branch</span></code>
<code>}</code>
</pre>
<p>Instead of the block, <code>else</code> can also be followed by another <code>if</code> statement:</p>
<pre class="language-js">
<code><span class="hljs-keyword">if</span> (cond1) {</code>
<code>  <span class="hljs-comment">// ···</span></code>
<code>} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (cond2) {</code>
<code>  <span class="hljs-comment">// ···</span></code>
<code>}</code>
<code/>
<code><span class="hljs-keyword">if</span> (cond1) {</code>
<code>  <span class="hljs-comment">// ···</span></code>
<code>} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (cond2) {</code>
<code>  <span class="hljs-comment">// ···</span></code>
<code>} <span class="hljs-keyword">else</span> {</code>
<code>  <span class="hljs-comment">// ···</span></code>
<code>}</code>
</pre>
<p>We can continue this chain with more <code>else if</code>s.</p>
<h4 id="the-syntax-of-if-statements"><a class="heading-id-link" href="#the-syntax-of-if-statements">25.3.1 The syntax of <code>if</code> statements</a></h4>
<p>The general syntax of <code>if</code> statements is:</p>
<pre class="language-js">
<code><span class="hljs-keyword">if</span> («cond») «then_statement»</code>
<code><span class="hljs-keyword">else</span> «else_statement»</code>
</pre>
<p>So far, the <code>then_statement</code> has always been a block, but we can use any statement. That statement must be terminated with a semicolon:</p>
<pre class="language-js">
<code><span class="hljs-keyword">if</span> (<span class="hljs-literal">true</span>) <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Yes'</span>); <span class="hljs-keyword">else</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'No'</span>);</code>
</pre>
<p>That means that <code>else if</code> is not its own construct; it’s simply an <code>if</code> statement whose <code>else_statement</code> is another <code>if</code> statement.</p>
<h3 id="switch"><a class="heading-id-link" href="#switch">25.4 <code>switch</code> statements<span> <sup>ES3</sup></span></a></h3>
<p><span id="index-entry-switch"/></p>
<p>A <code>switch</code> statement looks as follows:</p>
<pre class="language-txt">
<code>switch («switch_expression») {</code>
<code>  «switch_body»</code>
<code>}</code>
</pre>
<p>The body of <code>switch</code> consists of zero or more case clauses:</p>
<pre class="language-txt">
<code>case «case_expression»:</code>
<code>  «statements»</code>
</pre>
<p>And, optionally, a default clause:</p>
<pre class="language-txt">
<code>default:</code>
<code>  «statements»</code>
</pre>
<p>A <code>switch</code> is executed as follows:</p>
<ul>
  <li>
    It evaluates the switch expression.
  </li>
  <li>
    It jumps to the first case clause whose expression has the same result as the switch expression.
  </li>
  <li>
    Otherwise, if there is no such clause, it jumps to the default clause.
  </li>
  <li>
    Otherwise, if there is no default clause, it does nothing.
  </li>
</ul>
<h4 id="a-first-example-of-a-switch-statement"><a class="heading-id-link" href="#a-first-example-of-a-switch-statement">25.4.1 A first example of a <code>switch</code> statement</a></h4>
<p>Let’s look at an example: The following function converts a number from 1–7 to the name of a weekday.</p>
<pre class="language-js">
<code><span class="hljs-keyword">function</span> <span class="hljs-title function_">dayOfTheWeek</span>(<span class="hljs-params">num</span>) {</code>
<code>  <span class="hljs-keyword">switch</span> (num) {</code>
<code>    <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:</code>
<code>      <span class="hljs-keyword">return</span> <span class="hljs-string">'Monday'</span>;</code>
<code>    <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:</code>
<code>      <span class="hljs-keyword">return</span> <span class="hljs-string">'Tuesday'</span>;</code>
<code>    <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:</code>
<code>      <span class="hljs-keyword">return</span> <span class="hljs-string">'Wednesday'</span>;</code>
<code>    <span class="hljs-keyword">case</span> <span class="hljs-number">4</span>:</code>
<code>      <span class="hljs-keyword">return</span> <span class="hljs-string">'Thursday'</span>;</code>
<code>    <span class="hljs-keyword">case</span> <span class="hljs-number">5</span>:</code>
<code>      <span class="hljs-keyword">return</span> <span class="hljs-string">'Friday'</span>;</code>
<code>    <span class="hljs-keyword">case</span> <span class="hljs-number">6</span>:</code>
<code>      <span class="hljs-keyword">return</span> <span class="hljs-string">'Saturday'</span>;</code>
<code>    <span class="hljs-keyword">case</span> <span class="hljs-number">7</span>:</code>
<code>      <span class="hljs-keyword">return</span> <span class="hljs-string">'Sunday'</span>;</code>
<code>  }</code>
<code>}</code>
<code>assert.<span class="hljs-title function_">equal</span>(<span class="hljs-title function_">dayOfTheWeek</span>(<span class="hljs-number">5</span>), <span class="hljs-string">'Friday'</span>);</code>
</pre>
<h4 id="dont-forget-to-return-or-break"><a class="heading-id-link" href="#dont-forget-to-return-or-break">25.4.2 Don’t forget to <code>return</code> or <code>break</code>!</a></h4>
<p>At the end of a case clause, execution continues with the next case clause, unless we <code>return</code> or <code>break</code> – for example:</p>
<pre class="language-js">
<code><span class="hljs-keyword">function</span> <span class="hljs-title function_">englishToFrench</span>(<span class="hljs-params">english</span>) {</code>
<code>  <span class="hljs-keyword">let</span> french;</code>
<code>  <span class="hljs-keyword">switch</span> (english) {</code>
<code>    <span class="hljs-keyword">case</span> <span class="hljs-string">'hello'</span>:</code>
<code>      french = <span class="hljs-string">'bonjour'</span>;</code>
<code>    <span class="hljs-keyword">case</span> <span class="hljs-string">'goodbye'</span>:</code>
<code>      french = <span class="hljs-string">'au revoir'</span>;</code>
<code>  }</code>
<code>  <span class="hljs-keyword">return</span> french;</code>
<code>}</code>
<code><span class="hljs-comment">// The result should be 'bonjour'!</span></code>
<code>assert.<span class="hljs-title function_">equal</span>(<span class="hljs-title function_">englishToFrench</span>(<span class="hljs-string">'hello'</span>), <span class="hljs-string">'au revoir'</span>);</code>
</pre>
<p>That is, our implementation of <code>dayOfTheWeek()</code> only worked because we used <code>return</code>. We can fix <code>englishToFrench()</code> by using <code>break</code>:</p>
<pre class="language-js">
<code><span class="hljs-keyword">function</span> <span class="hljs-title function_">englishToFrench</span>(<span class="hljs-params">english</span>) {</code>
<code>  <span class="hljs-keyword">let</span> french;</code>
<code>  <span class="hljs-keyword">switch</span> (english) {</code>
<code>    <span class="hljs-keyword">case</span> <span class="hljs-string">'hello'</span>:</code>
<code>      french = <span class="hljs-string">'bonjour'</span>;</code>
<code>      <span class="hljs-keyword">break</span>;</code>
<code>    <span class="hljs-keyword">case</span> <span class="hljs-string">'goodbye'</span>:</code>
<code>      french = <span class="hljs-string">'au revoir'</span>;</code>
<code>      <span class="hljs-keyword">break</span>;</code>
<code>  }</code>
<code>  <span class="hljs-keyword">return</span> french;</code>
<code>}</code>
<code>assert.<span class="hljs-title function_">equal</span>(<span class="hljs-title function_">englishToFrench</span>(<span class="hljs-string">'hello'</span>), <span class="hljs-string">'bonjour'</span>); <span class="hljs-comment">// ok</span></code>
</pre>
<h4 id="empty-case-clauses"><a class="heading-id-link" href="#empty-case-clauses">25.4.3 Empty case clauses</a></h4>
<p>The statements of a case clause can be omitted, which effectively gives us multiple case expressions per case clause:</p>
<pre class="language-js">
<code><span class="hljs-keyword">function</span> <span class="hljs-title function_">isWeekDay</span>(<span class="hljs-params">name</span>) {</code>
<code>  <span class="hljs-keyword">switch</span> (name) {</code>
<code>    <span class="hljs-keyword">case</span> <span class="hljs-string">'Monday'</span>:</code>
<code>    <span class="hljs-keyword">case</span> <span class="hljs-string">'Tuesday'</span>:</code>
<code>    <span class="hljs-keyword">case</span> <span class="hljs-string">'Wednesday'</span>:</code>
<code>    <span class="hljs-keyword">case</span> <span class="hljs-string">'Thursday'</span>:</code>
<code>    <span class="hljs-keyword">case</span> <span class="hljs-string">'Friday'</span>:</code>
<code>      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</code>
<code>    <span class="hljs-keyword">case</span> <span class="hljs-string">'Saturday'</span>:</code>
<code>    <span class="hljs-keyword">case</span> <span class="hljs-string">'Sunday'</span>:</code>
<code>      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</code>
<code>  }</code>
<code>}</code>
<code>assert.<span class="hljs-title function_">equal</span>(<span class="hljs-title function_">isWeekDay</span>(<span class="hljs-string">'Wednesday'</span>), <span class="hljs-literal">true</span>);</code>
<code>assert.<span class="hljs-title function_">equal</span>(<span class="hljs-title function_">isWeekDay</span>(<span class="hljs-string">'Sunday'</span>), <span class="hljs-literal">false</span>);</code>
</pre>
<h4 id="checking-for-illegal-values-via-a-default-clause"><a class="heading-id-link" href="#checking-for-illegal-values-via-a-default-clause">25.4.4 Checking for illegal values via a <code>default</code> clause</a></h4>
<p>A <code>default</code> clause is jumped to if the <code>switch</code> expression has no other match. That makes it useful for error checking:</p>
<pre class="language-js">
<code><span class="hljs-keyword">function</span> <span class="hljs-title function_">isWeekDay</span>(<span class="hljs-params">name</span>) {</code>
<code>  <span class="hljs-keyword">switch</span> (name) {</code>
<code>    <span class="hljs-keyword">case</span> <span class="hljs-string">'Monday'</span>:</code>
<code>    <span class="hljs-keyword">case</span> <span class="hljs-string">'Tuesday'</span>:</code>
<code>    <span class="hljs-keyword">case</span> <span class="hljs-string">'Wednesday'</span>:</code>
<code>    <span class="hljs-keyword">case</span> <span class="hljs-string">'Thursday'</span>:</code>
<code>    <span class="hljs-keyword">case</span> <span class="hljs-string">'Friday'</span>:</code>
<code>      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</code>
<code>    <span class="hljs-keyword">case</span> <span class="hljs-string">'Saturday'</span>:</code>
<code>    <span class="hljs-keyword">case</span> <span class="hljs-string">'Sunday'</span>:</code>
<code>      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</code>
<code>    <span class="hljs-attr">default</span>:</code>
<code>      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Illegal value: '</span>+name);</code>
<code>  }</code>
<code>}</code>
<code>assert.<span class="hljs-title function_">throws</span>(</code>
<code>  <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">isWeekDay</span>(<span class="hljs-string">'January'</span>),</code>
<code>  {<span class="hljs-attr">message</span>: <span class="hljs-string">'Illegal value: January'</span>});</code>
</pre>
<div class="boxout">
  <p><img src="../Images/4fc2ec98bb44cc1f4de7c6a46d9dd043.png" class="boxout-icon" height="24" alt="Icon “exercise”" data-original-src="https://exploringjs.com/js/book/icon/exercise.svg"/> <strong>Exercises: <code>switch</code></strong></p>
  <div class="boxout-vspace"/>
  <ul>
    <li>
      <code>exercises/control-flow/number_to_month_test.mjs</code>
    </li>
    <li>
      Bonus: <code>exercises/control-flow/is_object_via_switch_test.mjs</code>
    </li>
  </ul>
</div>
<h4 id="pitfall-switch-variable-scope"><a class="heading-id-link" href="#pitfall-switch-variable-scope">25.4.5 Pitfall of <code>switch</code>: all cases exist in the same variable scope</a></h4>
<p>Let’s say we want to implement a function <code>main()</code> that works as follows:</p>
<pre class="language-js">
<code>assert.<span class="hljs-title function_">equal</span>(</code>
<code>  <span class="hljs-title function_">main</span>([<span class="hljs-string">'repeat'</span>, <span class="hljs-string">'3'</span>, <span class="hljs-string">'ho'</span>]),</code>
<code>  <span class="hljs-string">'hohoho'</span></code>
<code>);</code>
<code>assert.<span class="hljs-title function_">equal</span>(</code>
<code>  <span class="hljs-title function_">main</span>([<span class="hljs-string">'once'</span>, <span class="hljs-string">'hello'</span>]),</code>
<code>  <span class="hljs-string">'hello'</span></code>
<code>);</code>
</pre>
<p>We could implement <code>main()</code> like this (to reduce verbosity, error messages are omitted):</p>
<pre class="language-js">
<code><span class="hljs-keyword">function</span> <span class="hljs-title function_">main</span>(<span class="hljs-params">args</span>) {</code>
<code>  <span class="hljs-keyword">const</span> command = args[<span class="hljs-number">0</span>];</code>
<code>  <span class="hljs-keyword">if</span> (command === <span class="hljs-literal">undefined</span>) {</code>
<code>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>();</code>
<code>  }</code>
<code>  <span class="hljs-keyword">switch</span> (command) {</code>
<code>    <span class="hljs-keyword">case</span> <span class="hljs-string">'once'</span>:</code>
<code>      <span class="hljs-keyword">const</span> text = args[<span class="hljs-number">1</span>];</code>
<code>      <span class="hljs-keyword">if</span> (text === <span class="hljs-literal">undefined</span>) {</code>
<code>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>();</code>
<code>      }</code>
<code>      <span class="hljs-keyword">return</span> text;</code>
<code>    <span class="hljs-keyword">case</span> <span class="hljs-string">'repeat'</span>:</code>
<code>      <span class="hljs-keyword">const</span> timesStr = args[<span class="hljs-number">1</span>];</code>
<code>      <span class="hljs-keyword">const</span> text = args[<span class="hljs-number">2</span>]; <span class="hljs-comment">// (A)</span></code>
<code>      <span class="hljs-keyword">if</span> (timesStr === <span class="hljs-literal">undefined</span> || text === <span class="hljs-literal">undefined</span>) {</code>
<code>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>();</code>
<code>      }</code>
<code>      <span class="hljs-keyword">const</span> times = <span class="hljs-title class_">Number</span>(timesStr);</code>
<code>      <span class="hljs-keyword">return</span> text.<span class="hljs-title function_">repeat</span>(times);</code>
<code>    <span class="hljs-attr">default</span>:</code>
<code>      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>();</code>
<code>  }</code>
<code>}</code>
</pre>
<p>Alas, in line A, we get the following syntax error:</p>
<pre>
<code>SyntaxError: Identifier 'text' has already been declared</code>
</pre>
<p>Why is that? The complete body of <code>switch</code> is a single variable scope and inside it, there are two declarations for the variable <code>text</code>.</p>
<p>But this problem is easy to fix – we can create a variable scope for each <code>switch</code> case by wrapping its code in curly braces:</p>
<pre class="language-js">
<code><span class="hljs-keyword">function</span> <span class="hljs-title function_">main</span>(<span class="hljs-params">args</span>) {</code>
<code>  <span class="hljs-keyword">const</span> command = args[<span class="hljs-number">0</span>];</code>
<code>  <span class="hljs-keyword">if</span> (command === <span class="hljs-literal">undefined</span>) {</code>
<code>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>();</code>
<code>  }</code>
<code>  <span class="hljs-keyword">switch</span> (command) {</code>
<code>    <span class="hljs-keyword">case</span> <span class="hljs-string">'once'</span>: {</code>
<code>      <span class="hljs-keyword">const</span> text = args[<span class="hljs-number">1</span>];</code>
<code>      <span class="hljs-keyword">if</span> (text === <span class="hljs-literal">undefined</span>) {</code>
<code>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>();</code>
<code>      }</code>
<code>      <span class="hljs-keyword">return</span> text;</code>
<code>    }</code>
<code>    <span class="hljs-keyword">case</span> <span class="hljs-string">'repeat'</span>: {</code>
<code>      <span class="hljs-keyword">const</span> timesStr = args[<span class="hljs-number">1</span>];</code>
<code>      <span class="hljs-keyword">const</span> text = args[<span class="hljs-number">2</span>]; <span class="hljs-comment">// (A)</span></code>
<code>      <span class="hljs-keyword">if</span> (timesStr === <span class="hljs-literal">undefined</span> || text === <span class="hljs-literal">undefined</span>) {</code>
<code>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>();</code>
<code>      }</code>
<code>      <span class="hljs-keyword">const</span> times = <span class="hljs-title class_">Number</span>(timesStr);</code>
<code>      <span class="hljs-keyword">return</span> text.<span class="hljs-title function_">repeat</span>(times);</code>
<code>    }</code>
<code>    <span class="hljs-attr">default</span>:</code>
<code>      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>();</code>
<code>  }</code>
<code>}</code>
</pre>
<h3 id="while"><a class="heading-id-link" href="#while">25.5 <code>while</code> loops<span> <sup>ES1</sup></span></a></h3>
<p><span id="index-entry-while"/></p>
<p>A <code>while</code> loop has the following syntax:</p>
<pre class="language-txt">
<code>while («condition») {</code>
<code>  «statements»</code>
<code>}</code>
</pre>
<p>Before each loop iteration, <code>while</code> evaluates <code>condition</code>:</p>
<ul>
  <li>
    If the result is falsy, the loop is finished.
  </li>
  <li>
    If the result is truthy, the <code>while</code> body is executed one more time.
  </li>
</ul>
<h4 id="examples-of-while-loops"><a class="heading-id-link" href="#examples-of-while-loops">25.5.1 Examples of <code>while</code> loops</a></h4>
<p>The following code uses a <code>while</code> loop. In each loop iteration, it removes the first element of <code>arr</code> via <code>.shift()</code> and logs it.</p>
<pre class="language-js">
<code><span class="hljs-keyword">const</span> arr = [<span class="hljs-string">'a'</span>, <span class="hljs-string">'b'</span>, <span class="hljs-string">'c'</span>];</code>
<code><span class="hljs-keyword">while</span> (arr.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {</code>
<code>  <span class="hljs-keyword">const</span> elem = arr.<span class="hljs-title function_">shift</span>(); <span class="hljs-comment">// remove first element</span></code>
<code>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(elem);</code>
<code>}</code>
</pre>
<p>Output:</p>
<pre>
<code>a</code>
<code>b</code>
<code>c</code>
</pre>
<p>If the condition always evaluates to <code>true</code>, then <code>while</code> is an infinite loop:</p>
<pre class="language-js">
<code><span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {</code>
<code>  <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() === <span class="hljs-number">0</span>) <span class="hljs-keyword">break</span>;</code>
<code>}</code>
</pre>
<h3 id="do-while"><a class="heading-id-link" href="#do-while">25.6 <code>do-while</code> loops<span> <sup>ES3</sup></span></a></h3>
<p><span id="index-entry-do-while"/></p>
<p>The <code>do-while</code> loop works much like <code>while</code>, but it checks its condition <em>after</em> each loop iteration, not before.</p>
<pre class="language-js">
<code><span class="hljs-keyword">let</span> input;</code>
<code><span class="hljs-keyword">do</span> {</code>
<code>  input = <span class="hljs-title function_">prompt</span>(<span class="hljs-string">'Enter text:'</span>);</code>
<code>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(input);</code>
<code>} <span class="hljs-keyword">while</span> (input !== <span class="hljs-string">':q'</span>);</code>
</pre>
<p><code>do-while</code> can also be viewed as a <code>while</code> loop that runs at least once.</p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/prompt"><code>prompt()</code></a> is a global function that is available in web browsers. It prompts the user to input text and returns it.</p>
<h3 id="for"><a class="heading-id-link" href="#for">25.7 <code>for</code> loops<span> <sup>ES1</sup></span></a></h3>
<p><span id="index-entry-for"/></p>
<p>A <code>for</code> loop has the following syntax:</p>
<pre class="language-txt">
<code>for («initialization»; «condition»; «post_iteration») {</code>
<code>  «statements»</code>
<code>}</code>
</pre>
<p>The first line is the <em>head</em> of the loop and controls how often the <em>body</em> (the remainder of the loop) is executed. It has three parts and each of them is optional:</p>
<ul>
  <li>
    <code>initialization</code>: sets up variables, etc. for the loop. Variables declared here via <code>let</code> or <code>const</code> only exist inside the loop.
  </li>
  <li>
    <code>condition</code>: This condition is checked before each loop iteration. If it is falsy, the loop stops.
  </li>
  <li>
    <code>post_iteration</code>: This code is executed after each loop iteration.
  </li>
</ul>
<p>A <code>for</code> loop is therefore roughly equivalent to the following <code>while</code> loop:</p>
<pre class="language-txt">
<code>«initialization»</code>
<code>while («condition») {</code>
<code>  «statements»</code>
<code>  «post_iteration»</code>
<code>}</code>
</pre>
<h4 id="examples-of-for-loops"><a class="heading-id-link" href="#examples-of-for-loops">25.7.1 Examples of <code>for</code> loops</a></h4>
<p>As an example, this is how to count from zero to two via a <code>for</code> loop:</p>
<pre class="language-js">
<code><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">3</span>; i++) {</code>
<code>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(i);</code>
<code>}</code>
</pre>
<p>Output:</p>
<pre>
<code>0</code>
<code>1</code>
<code>2</code>
</pre>
<p>This is how to log the contents of an Array via a <code>for</code> loop:</p>
<pre class="language-js">
<code><span class="hljs-keyword">const</span> arr = [<span class="hljs-string">'a'</span>, <span class="hljs-string">'b'</span>, <span class="hljs-string">'c'</span>];</code>
<code><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>; i&lt;arr.<span class="hljs-property">length</span>; i++) {</code>
<code>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr[i]);</code>
<code>}</code>
</pre>
<p>Output:</p>
<pre>
<code>a</code>
<code>b</code>
<code>c</code>
</pre>
<p>If we omit all three parts of the head, we get an infinite loop:</p>
<pre class="language-js">
<code><span class="hljs-keyword">for</span> (;;) {</code>
<code>  <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() === <span class="hljs-number">0</span>) <span class="hljs-keyword">break</span>;</code>
<code>}</code>
</pre>
<h3 id="for-of"><a class="heading-id-link" href="#for-of">25.8 <code>for-of</code> loops<span> <sup>ES6</sup></span></a></h3>
<p><span id="index-entry-for-of"/></p>
<p>A <code>for-of</code> loop iterates over any <em>iterable</em> – a data container that supports <a href="ch_sync-iteration.html#ch_sync-iteration">the <em>iteration protocol</em></a>. Each iterated value is stored in a variable, as specified in the head:</p>
<pre class="language-txt">
<code>for («iteration_variable» of «iterable») {</code>
<code>  «statements»</code>
<code>}</code>
</pre>
<p>The iteration variable is usually created via a variable declaration:</p>
<pre class="language-js">
<code><span class="hljs-keyword">const</span> iterable = [<span class="hljs-string">'hello'</span>, <span class="hljs-string">'world'</span>];</code>
<code><span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> elem <span class="hljs-keyword">of</span> iterable) {</code>
<code>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(elem);</code>
<code>}</code>
</pre>
<p>Output:</p>
<pre>
<code>hello</code>
<code>world</code>
</pre>
<p>But we can also use a (mutable) variable that already exists:</p>
<pre class="language-js">
<code><span class="hljs-keyword">const</span> iterable = [<span class="hljs-string">'hello'</span>, <span class="hljs-string">'world'</span>];</code>
<code><span class="hljs-keyword">let</span> elem;</code>
<code><span class="hljs-keyword">for</span> (elem <span class="hljs-keyword">of</span> iterable) {</code>
<code>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(elem);</code>
<code>}</code>
</pre>
<h4 id="const-forof-vs-for"><a class="heading-id-link" href="#const-forof-vs-for">25.8.1 <code>const</code>: <code>for-of</code> vs. <code>for</code></a></h4>
<p>Note that in <code>for-of</code> loops we can use <code>const</code>. The iteration variable can still be different for each iteration (it just can’t change during the iteration). Think of it as a new <code>const</code> declaration being executed each time in a fresh scope.</p>
<p>In contrast, in <code>for</code> loops we must declare variables via <code>let</code> or <code>var</code> if their values change.</p>
<h4 id="iterating-over-iterables"><a class="heading-id-link" href="#iterating-over-iterables">25.8.2 Iterating over iterables</a></h4>
<p>As mentioned before, <code>for-of</code> works with any iterable object, not just with Arrays – for example, with Sets:</p>
<pre class="language-js">
<code><span class="hljs-keyword">const</span> set = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>([<span class="hljs-string">'hello'</span>, <span class="hljs-string">'world'</span>]);</code>
<code><span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> elem <span class="hljs-keyword">of</span> set) {</code>
<code>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(elem);</code>
<code>}</code>
</pre>
<h4 id="for-of-iterating-index-element"><a class="heading-id-link" href="#for-of-iterating-index-element">25.8.3 Iterating over [index, element] pairs of Arrays</a></h4>
<p>Lastly, we can also use <code>for-of</code> to iterate over the [index, element] entries of Arrays:</p>
<pre class="language-js">
<code><span class="hljs-keyword">const</span> arr = [<span class="hljs-string">'a'</span>, <span class="hljs-string">'b'</span>, <span class="hljs-string">'c'</span>];</code>
<code><span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [index, element] <span class="hljs-keyword">of</span> arr.<span class="hljs-title function_">entries</span>()) {</code>
<code>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${index}</span> -&gt; <span class="hljs-subst">${element}</span>`</span>);</code>
<code>}</code>
</pre>
<p>Output:</p>
<pre>
<code>0 -&gt; a</code>
<code>1 -&gt; b</code>
<code>2 -&gt; c</code>
</pre>
<p>With <code>[index, element]</code>, we are using <a href="ch_destructuring.html#ch_destructuring"><em>destructuring</em></a> to access Array elements.</p>
<div class="boxout">
  <p><img src="../Images/4fc2ec98bb44cc1f4de7c6a46d9dd043.png" class="boxout-icon" height="24" alt="Icon “exercise”" data-original-src="https://exploringjs.com/js/book/icon/exercise.svg"/> <strong>Exercise: <code>for-of</code></strong></p>
  <div class="boxout-vspace"/>
  <p><code>exercises/control-flow/array_to_string_test.mjs</code></p>
</div>
<h3 id="forawaitof-loops-es2018"><a class="heading-id-link" href="#forawaitof-loops-es2018">25.9 <code>for-await-of</code> loops<span> <sup>ES2018</sup></span></a></h3>
<p><code>for-await-of</code> is like <code>for-of</code>, but it works with asynchronous iterables instead of synchronous ones. And it can only be used inside async functions and async generators.</p>
<pre class="language-js">
<code><span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> (<span class="hljs-keyword">const</span> item <span class="hljs-keyword">of</span> asyncIterable) {</code>
<code>  <span class="hljs-comment">// ···</span></code>
<code>}</code>
</pre>
<p><code>for-await-of</code> is described in detail <a href="ch_async-iteration.html#for-await-of">in the chapter on asynchronous iteration</a>.</p>
<h3 id="for-in"><a class="heading-id-link" href="#for-in">25.10 <code>for-in</code> loops (avoid)<span> <sup>ES1</sup></span></a></h3>
<p><span id="index-entry-for-in"/></p>
<p>The <code>for-in</code> loop visits all (own and inherited) enumerable property keys of an object. When looping over an Array, it is rarely a good choice:</p>
<ul>
  <li>
    It visits property keys, not values.
  </li>
  <li>
    As property keys, the indices of Array elements are strings, not numbers (<a href="ch_arrays.html#array-indices">more information on how Array elements work</a>).
  </li>
  <li>
    It visits all enumerable property keys (both own and inherited ones), not just those of Array elements.
  </li>
</ul>
<p>The following code demonstrates these points:</p>
<pre class="language-js">
<code><span class="hljs-keyword">const</span> arr = [<span class="hljs-string">'a'</span>, <span class="hljs-string">'b'</span>, <span class="hljs-string">'c'</span>];</code>
<code>arr.<span class="hljs-property">propKey</span> = <span class="hljs-string">'property value'</span>;</code>
<code/>
<code><span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> key <span class="hljs-keyword">in</span> arr) {</code>
<code>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(key);</code>
<code>}</code>
</pre>
<p>Output:</p>
<pre>
<code>0</code>
<code>1</code>
<code>2</code>
<code>propKey</code>
</pre>
<h3 id="recommendations-for-looping"><a class="heading-id-link" href="#recommendations-for-looping">25.11 Recommendations for looping</a></h3>
<ul>
  <li>
    If you want to loop over an <a href="ch_async-iteration.html#ch_async-iteration">asynchronous iterable</a> (in ES2018+), you must use <code>for-await-of</code>.
  </li>
  <li>
    For looping over any synchronous iterable (incl. Arrays), you must use <code>for-of</code>. Available in ES6+.
  </li>
  <li>
    For looping over an Array in ES5+, you can use <a href="ch_arrays.html#qref-Array.prototype.forEach">the Array method <code>.forEach()</code></a>.
  </li>
  <li>
    Before ES5, you can use a plain <code>for</code> loop to loop over an Array.
  </li>
  <li>
    Don’t use <code>for-in</code> to loop over an Array.
  </li>
</ul>

    
      
</body>
</html>