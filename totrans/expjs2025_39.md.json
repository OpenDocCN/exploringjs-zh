["```js\ninterface Iterable<T> {\n  [Symbol.iterator]() : Iterator<T>;\n}\n\nabstract class Iterator<T> {\n  abstract next() : IteratorResult<T>;\n}\n\ninterface IteratorResult<T> {\n  value: T;\n  done: boolean;\n}\n\n```", "```js\nconst iterable = ['a', 'b'];\n\n// The iterable is a factory for iterators:\nconst iterator = iterable[Symbol.iterator]();\n\n// Call .next() until .done is true:\nassert.deepEqual(\n  iterator.next(), { value: 'a', done: false }\n);\nassert.deepEqual(\n  iterator.next(), { value: 'b', done: false }\n);\nassert.deepEqual(\n  iterator.next(), { value: undefined, done: true }\n);\n\n```", "```js\nfunction logAll(iterable) {\n  const iterator = iterable[Symbol.iterator]();\n  while (true) {\n    const {value, done} = iterator.next();\n    if (done) break;\n    console.log(value);\n  }\n}\nlogAll(['a', 'b']);\n\n```", "```js\na\nb\n\n```", "```js\n> const iterable = ['a', 'b'];\n> iterable[Symbol.iterator]() instanceof Iterator\ntrue\n> Iterator.from(iterable) instanceof Iterator\ntrue\n\n```", "```js\nconst iterable = ['hello', 'beautiful', 'world'];\nfor (const x of iterable) {\n  console.log(x);\n}\n\n```", "```js\nhello\nbeautiful\nworld\n\n```", "```js\nassert.deepEqual(\n  ['BEFORE', ...iterable, 'AFTER'],\n  ['BEFORE', 'hello', 'beautiful', 'world', 'AFTER']\n);\n\n```", "```js\nconst [first, second] = iterable;\nassert.equal(first, 'hello');\nassert.equal(second, 'beautiful');\n\n```", "```js\nconst iterable = ['hello', 'beautiful', 'world'];\n\nfor (const x of iterable) {\n  console.log(x);\n}\n\nassert.deepEqual(\n  ['BEFORE', ...iterable, 'AFTER'],\n  ['BEFORE', 'hello', 'beautiful', 'world', 'AFTER']\n);\n\nconst [first, second] = iterable;\nassert.equal(first, 'hello');\nassert.equal(second, 'beautiful');\n\n```", "```js\nconst iterable = new Set().add('a').add('b').add('c');\nassert.deepEqual(\n  [...iterable],\n  ['a', 'b', 'c']\n);\nassert.deepEqual(\n  Array.from(iterable),\n  ['a', 'b', 'c']\n);\n\n```", "```js\nassert.deepEqual(\n  Iterator.from(iterable).toArray(),\n  ['a', 'b', 'c']\n);\n\n```", "```js\n/** Synchronous generator function */\nfunction* createSyncIterable() {\n yield 'a';\n yield 'b';\n yield 'c';\n}\n\n```", "```js\nfunction* map(iterable, callback) {\n  for (const x of iterable) {\n    yield callback(x);\n  }\n}\nassert.deepEqual(\n  Array.from(\n    map([1, 2, 3, 4], x => x ** 2)\n  ),\n  [1, 4, 9, 16]\n);\n\nfunction* filter(iterable, callback) {\n  for (const x of iterable) {\n    if (callback(x)) {\n      yield x;\n    }\n  }\n}\nassert.deepEqual(\n  Array.from(\n    filter([1, 2, 3, 4], x => (x % 2) === 0\n  )),\n  [2, 4]\n);\n\n```", "```js\nconst arrayIterator = [][Symbol.iterator]();\n\n```", "```js\nconst ArrayIteratorPrototype = Object.getPrototypeOf(arrayIterator);\nassert.deepEqual(\n  Reflect.ownKeys(ArrayIteratorPrototype),\n  [ 'next', Symbol.toStringTag ]\n);\nassert.equal(\n  ArrayIteratorPrototype[Symbol.toStringTag],\n  'Array Iterator'\n);\n\n```", "```js\nconst IteratorPrototype = Object.getPrototypeOf(ArrayIteratorPrototype);\nassert.equal(\n  IteratorPrototype, Iterator.prototype\n);\nassert.equal(\n  Object.hasOwn(Iterator.prototype, Symbol.iterator),\n  true\n);\nassert.equal(\n  typeof Iterator.prototype[Symbol.iterator],\n  'function'\n);\n\n```", "```js\nassert.equal(\n  Object.getPrototypeOf(Iterator.prototype) === Object.prototype,\n  true\n);\n\n```", "```js\nfunction* genFunc() {\n yield 'a';\n yield 'b';\n}\nconst genObj = genFunc();\n\n```", "```js\nassert.deepEqual(\n  genObj.next(),\n  { value: 'a', done: false }\n);\nassert.equal(\n  genObj instanceof Iterator,\n  true\n);\nassert.equal(\n  Iterator.prototype.isPrototypeOf(genObj),\n  true\n);\n\n```", "```js\n// Array iterator\nconst arrayIterator = ['a', 'b'].values();\nassert.equal(\n  // arrayIterator is a built-in iterator\n  arrayIterator instanceof Iterator, true\n);\nassert.equal(\n  // arrayIterator is iterable\n  Symbol.iterator in arrayIterator, true\n);\n\n// Generator object\nfunction* gen() { yield 'hello' }\nconst genObj = gen();\nassert.equal(\n genObj instanceof Iterator, true\n);\nassert.equal(\n Symbol.iterator in genObj, true\n);\n\n// Iterator returned by `Iterator` method\nconst iter = Iterator.from([1, 2]).map(x => x * 2);\nassert.equal(\n iter instanceof Iterator, true\n);\nassert.equal(\n Symbol.iterator in iter, true\n);\n\n```", "```js\nclass MyIterable {\n  /** This method must return an iterator */\n  * [Symbol.iterator]() {\n    yield 'good';\n    yield 'morning';\n  }\n}\nassert.deepEqual(\n  Array.from(new MyIterable()),\n  ['good', 'morning']\n);\n\n```", "```js\nfunction* createIterable() {\n yield 'a';\n yield 'b';\n}\nassert.deepEqual(\n Array.from(createIterable()),\n ['good', 'morning']\n);\n\n```", "```js\nconst iterator = Iterator.from(['a', 'b'])\nassert.equal(\n  iterator[Symbol.iterator](),\n  iterator\n);\n\n```", "```js\nconst oneTime = ['a', 'b', 'c'].values();\nfor (const x of oneTime) {\n  assert.equal(\n    x, 'a'\n  );\n  break;\n}\nassert.deepEqual(\n  Array.from(oneTime),\n  ['b', 'c']\n);\nassert.deepEqual(\n  Array.from(oneTime),\n  []\n);\n\n```", "```js\nconst manyTimes = ['a', 'b', 'c'];\nfor (const x of manyTimes) {\n  assert.equal(\n    x, 'a'\n  );\n  break;\n}\nassert.deepEqual(\n  Array.from(manyTimes),\n  ['a', 'b', 'c']\n);\nassert.deepEqual(\n  Array.from(manyTimes),\n  ['a', 'b', 'c']\n);\n\n```", "```js\nconst oneTime = ['a', 'b', 'c'].values();\nassert.deepEqual(\n  [...oneTime, ...oneTime, ...oneTime],\n  ['a', 'b', 'c']\n);\n\nconst manyTimes = ['a', 'b', 'c'];\nassert.deepEqual(\n  [...manyTimes, ...manyTimes, ...manyTimes],\n  ['a','b','c', 'a','b','c', 'a','b','c']\n);\n\n```", "```js\nassert.deepEqual(\n  ['a', 'b', 'c'].values().map(x => `=${x}=`).toArray(),\n  ['=a=', '=b=', '=c=']\n);\nassert.deepEqual(\n  ['a', 'b', 'c'].values().drop(1).toArray(),\n  ['b', 'c']\n);\nassert.deepEqual(\n  ['a', 'b', 'c'].values().take(2).toArray(),\n  ['a', 'b']\n);\n\n```", "```js\nassert.deepEqual(\n  new Set( // (A)\n    new Set([-5, 2, 6, -3]).values().filter(x => x >= 0)\n  ),\n  new Set([2, 6])\n);\nassert.deepEqual(\n  new Set( // (B)\n    new Set([-5, 2, 6, -3]).values().map(x => x / 2)\n  ),\n  new Set([-2.5, 1, 3, -1.5])\n);\n\n```", "```js\nconst domCollection = document.querySelectorAll('a');\n\n// Alas, the collection doesn’t have a method .map()\nassert.equal('map' in domCollection, false);\n\n// Solution: use an iterator\nassert.deepEqual(\n  domCollection.values().map(x => x.href).toArray(),\n  ['https://2ality.com', 'https://exploringjs.com']\n);\n\n```", "```js\nfunction quoteNonEmptyLinesArray(str) {\n  return str\n    .split(/(?<=\\r?\\n)/) // (A)\n    .filter(line => line.trim().length > 0) // (B)\n    .map(line => '> ' + line) // (C)\n    ;\n}\n\n```", "```js\nfunction quoteNonEmptyLinesIter(str) {\n  return splitLinesIter(str) // (A)\n    .filter(line => line.trim().length > 0) // (B)\n    .map(line => '> ' + line) // (C)\n    ;\n}\n\nfunction* splitLinesIter(str) {\n  let prevIndex = 0;\n  while (true) {\n    const eolIndex = str.indexOf('\\n', prevIndex);\n    if (eolIndex < 0) break;\n    // Including EOL\n    const line = str.slice(prevIndex, eolIndex + 1);\n    yield line;\n    prevIndex = eolIndex + 1;\n  }\n  if (prevIndex < str.length) {\n    yield str.slice(prevIndex);\n  }\n}\n\n```", "```js\nassert.deepEqual(\n  Array.from(quoteNonEmptyLinesIter('have\\n\\na nice\\n\\nday')),\n  [\n    '> have\\n',\n    '> a nice\\n',\n    '> day',\n  ]\n);\n\n```", "```js\n> const iter = quoteNonEmptyLinesIter('have\\n\\na nice\\n\\nday');\n> iter.next()\n{ value: '> have\\n', done: false }\n> iter.next()\n{ value: '> a nice\\n', done: false }\n> iter.next()\n{ value: '> day', done: false }\n> iter.next()\n{ value: undefined, done: true }\n\n```", "```js\n// Not an instance of `Iterator`\nconst legacyIterator = {\n  next() {\n // Infinite iterator (never done)\n return { done: false, value: '#' };\n }\n};\nassert.equal(\n Iterator.from(legacyIterator) instanceof Iterator,\n true\n);\nassert.deepEqual(\n Iterator.from(legacyIterator).take(3).toArray(),\n ['#', '#', '#']\n);\n\n```", "```js\n> Array.from(['a', 'b'].keys()) // iterable\n[ 0, 1 ]\n> ['a', 'b'].keys().toArray() // iterator\n[ 0, 1 ]\n\n```", "```js\nclass ValueIterable {\n  #values;\n  #index = 0;\n  constructor(...values) {\n    this.#values = values;\n  }\n  [Symbol.iterator]() {\n    return {\n      // Arrow function so that we can use the outer `this`\n      next: () => {\n        if (this.#index >= this.#values.length) {\n          return {done: true};\n        }\n        const value = this.#values[this.#index];\n        this.#index++;\n        return {done: false, value};\n      },\n    };\n  }\n}\n\n// legacyIterable is an iterable\nconst legacyIterable = new ValueIterable('a', 'b', 'c');\nassert.deepEqual(\n  Array.from(new ValueIterable('a', 'b', 'c')),\n  ['a', 'b', 'c']\n);\n\n// But its iterators are not instances of Iterator\nconst legacyIterator = legacyIterable[Symbol.iterator]();\nassert.equal(\n  legacyIterator instanceof Iterator, false\n);\n\n```", "```js\nclass ValueIterable {\n  // ···\n  [Symbol.iterator]() {\n    return {\n      __proto__: Iterator.prototype,\n      next: () => {\n        // ···\n      },\n    };\n  }\n}\n\n```", "```js\nclass ValueIterable {\n  // ···\n  [Symbol.iterator]() {\n    return Iterator.from({\n      next: () => {\n        // ···\n      },\n    });\n  }\n}\n\n```", "```js\nclass ValueIterable {\n  #values;\n  #index = 0;\n  constructor(...values) {\n    this.#values = values;\n  }\n  [Symbol.iterator]() {\n    const outerThis = this;\n    // Because ValueIterator is nested, it can access the private fields of\n    // ValueIterable\n    class ValueIterator extends Iterator {\n      next() {\n if (outerThis.#index >= outerThis.#values.length) {\n return {done: true};\n }\n const value = outerThis.#values[outerThis.#index];\n outerThis.#index++;\n return {done: false, value};\n }\n }\n return new ValueIterator();\n }\n}\n\n```", "```js\nassert.deepEqual(\n  Map.groupBy([0, -5, 3, -4, 8, 9], x => Math.sign(x)),\n  new Map().set(0, [0]).set(-1, [-5,-4]).set(1, [3,8,9])\n);\n\n```", "```js\nfunction* generateNumbers() {\n yield 2;\n yield -7;\n yield 4;\n}\nassert.deepEqual(\n Map.groupBy(generateNumbers(), x => Math.sign(x)),\n new Map().set(1, [2,4]).set(-1, [-7])\n);\n\n```", "```js\nassert.deepEqual(\n  Object.groupBy([0, -5, 3, -4, 8, 9], x => Math.sign(x)),\n  {'0': [0], '-1': [-5,-4], '1': [3,8,9], __proto__: null}\n);\n\n```", "```js\nconst settled = [\n  { status: 'rejected', reason: 'Jhon' },\n  { status: 'fulfilled', value: 'Jane' },\n  { status: 'fulfilled', value: 'John' },\n  { status: 'rejected', reason: 'Jaen' },\n  { status: 'rejected', reason: 'Jnoh' },\n];\n\n```", "```js\nconst {fulfilled, rejected} = Object.groupBy(settled, x => x.status); // (A)\n\n// Handle fulfilled results\nassert.deepEqual(\n  fulfilled,\n  [\n    { status: 'fulfilled', value: 'Jane' },\n    { status: 'fulfilled', value: 'John' },\n  ]\n);\n\n// Handle rejected results\nassert.deepEqual(\n  rejected,\n  [\n    { status: 'rejected', reason: 'Jhon' },\n    { status: 'rejected', reason: 'Jaen' },\n    { status: 'rejected', reason: 'Jnoh' },\n  ]\n);\n\n```", "```js\nconst persons = [\n  { name: 'Louise', country: 'France' },\n  { name: 'Felix', country: 'Germany' },\n  { name: 'Ava', country: 'USA' },\n  { name: 'Léo', country: 'France' },\n  { name: 'Oliver', country: 'USA' },\n  { name: 'Leni', country: 'Germany' },\n];\n\nassert.deepEqual(\n  Map.groupBy(persons, (person) => person.country),\n  new Map([\n    [\n      'France',\n      [\n        { name: 'Louise', country: 'France' },\n        { name: 'Léo', country: 'France' },\n      ]\n    ],\n    [\n      'Germany',\n      [\n        { name: 'Felix', country: 'Germany' },\n        { name: 'Leni', country: 'Germany' },\n      ]\n    ],\n    [\n      'USA',\n      [\n        { name: 'Ava', country: 'USA' },\n        { name: 'Oliver', country: 'USA' },\n      ]\n    ],\n  ])\n);\n\n```", "```js\n/** Synchronous generator function */\nfunction* createSyncIterable() {\n yield 'a';\n yield 'b';\n yield 'c';\n}\n\nassert.deepEqual(\n Array.from(createSyncIterable()),\n ['a', 'b', 'c']\n);\n\n```", "```js\n    for (const x of iterable) { /*···*/ }\n\n    ```", "```js\n    const arr = ['a', ...iterable, 'z'];\n    func('a', ...iterable, 'z');\n\n    ```", "```js\n    const [x, y] = iterable;\n\n    ```", "```js\n    function* generatorFunction() {\n     yield* iterable;\n    }\n\n    ```", "```js\n    const obj = Object.fromEntries(iterableOverKeyValuePairs);\n\n    ```", "```js\n    const arr = Array.from(iterable);\n\n    ```", "```js\n    const arr = [...iterable];\n\n    ```", "```js\n    const m  = new Map(iterableOverKeyValuePairs);\n    const wm = new WeakMap(iterableOverKeyValuePairs);\n\n    ```", "```js\n    const s  = new Set(iterableOverElements);\n    const ws = new WeakSet(iterableOverElements);\n\n    ```", "```js\n    const promise1 = Promise.all(iterableOverPromises);\n    const promise2 = Promise.race(iterableOverPromises);\n    const promise3 = Promise.any(iterableOverPromises);\n    const promise4 = Promise.allSettled(iterableOverPromises);\n\n    ```", "```js\nfunction* gen() {}\n\nassert.equal(\n gen() instanceof Iterator,\n true\n);\n\n```", "```js\n    Iterator<T>.prototype.drop(limit: number): Iterator<T>\n\n    ```", "```js\n    assert.deepEqual(\n      Iterator.from(['a', 'b', 'c', 'd']).drop(1).toArray(),\n      ['b', 'c', 'd']\n    );\n\n    ```", "```js\n    Iterator<T>.prototype.filter(\n      filterFn: (value: T, counter: number) => boolean\n    ): Iterator<T>\n\n    ```", "```js\n    assert.deepEqual(\n      Iterator.from(['a', 'b', 'c', 'd']).filter(x => x <= 'b').toArray(),\n      ['a', 'b']\n    );\n\n    ```", "```js\n    Iterator<T>.prototype.flatMap<U>(\n      mapFn: (value: T, counter: number) => Iterable<U> | Iterator<U>\n    ): Iterator<U>\n\n    ```", "```js\n    assert.deepEqual(\n      Iterator.from(['a', 'b', 'c', 'd'])\n      .flatMap((value, counter) => new Array(counter).fill(value))\n      .toArray(),\n      ['b', 'c', 'c', 'd', 'd', 'd']\n    );\n\n    ```", "```js\n    Iterator<T>.prototype.map<U>(\n      mapFn: (value: T, counter: number) => U\n    ): Iterator<U>\n\n    ```", "```js\n    assert.deepEqual(\n      Iterator.from(['a', 'b', 'c', 'd']).map(x => x + x).toArray(),\n      ['aa', 'bb', 'cc', 'dd']\n    );\n\n    ```", "```js\n    Iterator<T>.prototype.take(limit: number): Iterator<T>\n\n    ```", "```js\n    assert.deepEqual(\n      Iterator.from(['a', 'b', 'c', 'd']).take(1).toArray(),\n      ['a']\n    );\n\n    ```", "```js\n    Iterator<T>.prototype.every(\n      fn: (value: T, counter: number) => boolean\n    ): boolean\n\n    ```", "```js\n    assert.equal(\n      Iterator.from(['a', 'b', 'c', 'd']).every(x => x === 'c'),\n      false\n    );\n\n    ```", "```js\n    Iterator<T>.prototype.some(\n      fn: (value: T, counter: number) => boolean\n    ): boolean\n\n    ```", "```js\n    assert.equal(\n      Iterator.from(['a', 'b', 'c', 'd']).some(x => x === 'c'),\n      true\n    );\n\n    ```", "```js\n    Iterator<T>.prototype.find(\n      fn: (value: T, counter: number) => boolean\n    ): T\n\n    ```", "```js\n    assert.equal(\n      Iterator.from(['a', 'b', 'c', 'd']).find((_, counter) => counter === 1),\n      'b'\n    );\n\n    ```", "```js\n    Iterator<T>.prototype.reduce<U>(\n      reducer: (accumulator: U, value: T, counter: number) => U,\n      initialValue?: U\n    ): U\n\n    ```", "```js\n    assert.deepEqual(\n      Iterator.from(['a', 'b', 'c', 'd']).reduce((acc, v) => acc + v),\n      'abcd'\n    );\n\n    ```", "```js\n    const set = new Set([3, -2, -5, 4]);\n    assert.equal(\n      set.values().reduce((min, cur) => cur < min ? cur : min, Infinity),\n      -5\n    );\n\n    ```", "```js\n    Iterator<T>.prototype.toArray(): Array<T>\n\n    ```", "```js\n    assert.deepEqual(\n      Iterator.from(['a', 'b', 'c', 'd']).toArray(),\n      ['a', 'b', 'c', 'd']\n    );\n\n    ```", "```js\n    Iterator<T>.prototype.forEach(\n      fn: (value: T, counter: number) => void\n    ): void\n\n    ```", "```js\n    const result = [];\n    Iterator.from(['a', 'b', 'c', 'd']).forEach(x => result.unshift(x))\n    assert.deepEqual(\n      result,\n      ['d', 'c', 'b', 'a']\n    );\n\n    ```"]