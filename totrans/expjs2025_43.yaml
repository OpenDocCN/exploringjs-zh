- en: 36 Maps (Map) ES6
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://exploringjs.com/js/book/ch_maps.html](https://exploringjs.com/js/book/ch_maps.html)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[36.1 Using Maps](#using-maps)'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[36.1.1 Creating Maps](#creating-maps)'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '[36.1.2 Working with single entries](#working-with-single-entries)'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '[36.1.3 Determining the size of a Map and clearing it](#determining-the-size-of-a-map-and-clearing-it)'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '[36.1.4 Example: Counting characters](#example-counting-characters)'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '[36.2 Iterating over Maps](#iterating-over-maps)'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[36.2.1 Looping over Maps](#looping-over-maps)'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '[36.2.2 Listed in insertion order: entries, keys, values](#maps-insertion-order-entries)'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '[36.3 Converting from and to Maps](#converting-from-and-to-maps)'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[36.3.1 Converting keys, values, entries to Arrays](#converting-map-entries-to-arrays)'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '[36.3.2 Converting between Maps and Objects](#converting-between-maps-and-objects)'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '[36.4 Processing Maps](#processing-maps)'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[36.4.1 Copying Maps](#copying-maps)'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '[36.4.2 Combining multiple Maps into a single Map](#combining-maps)'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '[36.4.3 Mapping and filtering Maps via iterator methods ^(ES2025)](#mapping-filtering-maps)'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '[36.5 A few more details about the keys of Maps (advanced)](#a-few-more-details-about-the-keys-of-maps-advanced)'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[36.5.1 What keys are considered equal?](#map-key-equality)'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '[36.6 Quick reference: `Map`](#quickref-maps)'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[36.6.1 `new Map()`](#new-map)'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '[36.6.2 `Map.*`](#map)'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '[36.6.3 `Map.prototype.*`: handling single entries](#mapprototype-handling-single-entries)'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '[36.6.4 `Map.prototype`: handling all entries](#mapprototype-handling-all-entries)'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '[36.6.5 `Map.prototype`: iterating and looping](#mapprototype-iterating-and-looping)'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '[36.7 FAQ: Maps](#faq-maps)'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[36.7.1 When should I use a Map, and when should I use an object?](#when-should-i-use-a-map-and-when-should-i-use-an-object)'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '[36.7.2 When would I use an object as a key in a Map?](#when-would-i-use-an-object-as-a-key-in-a-map)'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '[36.7.3 Why do Maps preserve the insertion order of entries?](#why-do-maps-preserve-the-insertion-order-of-entries)'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '[36.7.4 Why do Maps have a `.size`, while Arrays have a `.length`?](#collection-size-vs-length)'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: Before ES6, JavaScript didn’t have a data structure for dictionaries and (ab)used
    objects as dictionaries from strings to arbitrary values. ES6 brought Maps, which
    are dictionaries from arbitrary values to arbitrary values.
  prefs: []
  type: TYPE_NORMAL
- en: '[36.1 Using Maps](#using-maps)'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: An instance of `Map` maps keys to values. A single key-value mapping is called
    an *entry*.
  prefs: []
  type: TYPE_NORMAL
- en: '[36.1.1 Creating Maps](#creating-maps)'
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: There are three common ways of creating Maps.
  prefs: []
  type: TYPE_NORMAL
- en: 'First, we can use the constructor without any parameters to create an empty
    Map:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'Second, we can pass an iterable (e.g., an Array) over key-value “pairs” (Arrays
    with two elements) to the constructor:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: 'Third, the `.set()` method adds entries to a Map and is chainable:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: '[36.1.2 Working with single entries](#working-with-single-entries)'
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: '`map.set()` and `map.get()` are for writing and reading values (given keys).'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: '[PRE4][PRE5]``js[PRE6]`js` #### [36.1.3 Determining the size of a Map and clearing
    it](#determining-the-size-of-a-map-and-clearing-it)    `map.size` contains the
    number of entries in a Map. `map.clear()` removes all entries of a Map.    [PRE7]js    ####
    [36.1.4 Example: Counting characters](#example-counting-characters)    `countChars()`
    returns a Map that maps characters to numbers of occurrences.    [PRE8]js   [PRE9]
    On the other hand, the values returned by `.keys()`, `.values()` and `.entries()`
    are also iterators – which enables us to use the iterator method `.toArray()`:    [PRE10]   [PRE11]``
    #### [36.3.2 Converting between Maps and Objects](#converting-between-maps-and-objects)    As
    long as a Map only uses strings and symbols as keys, we can convert it to an object
    (via [`Object.fromEntries()`](ch_objects.html#Object.fromEntries)):    [PRE12]    We
    can also convert an object to a Map with string or symbol keys (via [`Object.entries()`](ch_objects.html#Object.entries)):    [PRE13]    ###
    [36.4 Processing Maps](#processing-maps)    #### [36.4.1 Copying Maps](#copying-maps)    As
    we have seen, Maps are iterables over key-value pairs. Therefore, we can use the
    constructor to create a copy of a Map. That copy is *shallow*: keys and values
    are the same; they are not copied/cloned themselves.    [PRE14]    #### [36.4.2 Combining
    multiple Maps into a single Map](#combining-maps)    There are no methods for
    combining Maps, which is why we must use a workaround. Let’s combine the following
    two Maps:    [PRE15]   [PRE16]` To combine `map1` and `map2`, we create a new
    Array and spread (`...`) the entries (key-value pairs) of `map1` and `map2` into
    it (via iteration). Then we convert the Array back into a Map. All of that is
    done in line A:    [PRE17]    ![Icon “exercise”](../Images/4fc2ec98bb44cc1f4de7c6a46d9dd043.png) **Exercise:
    Combining Maps**    `exercises/maps/combine_maps_test.mjs`    #### [36.4.3 Mapping
    and filtering Maps via iterator methods ^(ES2025)](#mapping-filtering-maps)    We
    can `.map()` and `.filter()` an Array, but there are no such operations for a
    Map. The solution is:    1.  Convert the Map to an iterator over [key, value]
    pairs. 2.  Map or filter the iterator. 3.  Convert the result back to a Map.    We’ll
    use the following Map to explore how that works.    [PRE18]    Mapping `originalMap`:    [PRE19]    Filtering
    `originalMap`:    [PRE20]    What if we can’t use iterator methods? Then we can
    switch to Array methods, by    *   replacing `originalMap.entries()` *   with
    `Array.from(originalMap)`.    ### [36.5 A few more details about the keys of Maps
    (advanced)](#a-few-more-details-about-the-keys-of-maps-advanced)    Any value
    can be a key, even an object:    [PRE21] `map.set(KEY1, ''hello'');` `map.set(KEY2,
    ''world'');`  `` `assert.equal(map.get(KEY1), ''hello'');` `assert.equal(map.get(KEY2),
    ''world'');` `` [PRE22]   [PRE23] [PRE24]`js [PRE25]js`` [PRE26]js[PRE27][PRE28][PRE29][PRE30]js[PRE31]`'
  prefs: []
  type: TYPE_NORMAL
