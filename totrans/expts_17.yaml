- en: 13 What is a type in TypeScript? Two perspectives
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 13 TypeScript 中的类型是什么？两种视角
- en: 原文：[https://exploringjs.com/ts/book/ch_what-is-a-type.html](https://exploringjs.com/ts/book/ch_what-is-a-type.html)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://exploringjs.com/ts/book/ch_what-is-a-type.html](https://exploringjs.com/ts/book/ch_what-is-a-type.html)
- en: (Ad, please don’t block.)
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: （请勿阻塞，Ad。）
- en: '[13.1 Two questions for each perspective](#two-questions-for-each-perspective)'
  id: totrans-3
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[13.1 每个视角的两个问题](#two-questions-for-each-perspective)'
- en: '[13.2 Dynamic perspective: a type is a set of values](#dynamic-perspective-a-type-is-a-set-of-values)'
  id: totrans-4
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[13.2 动态视角：类型是一组值](#dynamic-perspective-a-type-is-a-set-of-values)'
- en: '[13.3 Static perspective: relationships between types](#static-perspective-relationships-between-types)'
  id: totrans-5
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[13.3 静态视角：类型之间的关系](#static-perspective-relationships-between-types)'
- en: '[13.4 Nominal type systems vs. structural type systems](#nominal-vs-structural-type-systems)'
  id: totrans-6
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[13.4 命名类型系统与结构类型系统](#nominal-vs-structural-type-systems)'
- en: '[13.5 Further reading](#further-reading-5)'
  id: totrans-7
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[13.5 进一步阅读](#further-reading-5)'
- en: What are types in TypeScript? This chapter describes two perspectives that help
    with understanding them. Both are useful; they complement each other.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: TypeScript 中的类型是什么？本章描述了帮助理解它们的两种视角。两者都很有用；它们相互补充。
- en: '[13.1 Two questions for each perspective](#two-questions-for-each-perspective)'
  id: totrans-9
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[13.1 每个视角的两个问题](#two-questions-for-each-perspective)'
- en: The following two questions are important for understanding how types work and
    need to be answered from each of the two perspectives.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 以下两个问题是理解类型工作方式的重要问题，需要从两个视角中回答。
- en: What does it mean for `arg` to have the type `MyType`?
  id: totrans-11
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`arg` 具有类型 `MyType` 的意义是什么？'
- en: '[PRE0]'
  id: totrans-12
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE0]'
- en: How is `UnionType` derived from `Type1` and `Type2`?
  id: totrans-13
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`UnionType` 是如何从 `Type1` 和 `Type2` 派生出来的？'
- en: '[PRE1]'
  id: totrans-14
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '[13.2 Dynamic perspective: a type is a set of values](#dynamic-perspective-a-type-is-a-set-of-values)'
  id: totrans-15
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[13.2 动态视角：类型是一组值](#dynamic-perspective-a-type-is-a-set-of-values)'
- en: 'From this perspective, we are interested in values and a type is a set of values:'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 从这个角度来看，我们关注的是值，类型是一组值：
- en: We can pass a given value to `myFunc()` if it is included in `MyType`.
  id: totrans-17
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果给定的值包含在 `MyType` 中，我们可以将其传递给 `myFunc()`。
- en: '`UnionType` (a set) is defined as the set-theoretic union of `Type1` and `Type2`.'
  id: totrans-18
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`UnionType`（一个集合）定义为 `Type1` 和 `Type2` 的集合论并集。'
- en: '[13.3 Static perspective: relationships between types](#static-perspective-relationships-between-types)'
  id: totrans-19
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[13.3 静态视角：类型之间的关系](#static-perspective-relationships-between-types)'
- en: 'From this perspective:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 从这个角度来看：
- en: The source code has locations and each location has a static type. In a TypeScript-aware
    editor, we can see the static type of a location if we hover above it with the
    cursor.
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 源代码有位置，每个位置都有一个静态类型。在 TypeScript 感知编辑器中，如果我们用鼠标悬停在某个位置上，我们可以看到该位置的静态类型。
- en: Types are defined via their relationships with other types.
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 类型是通过与其他类型的关系来定义的。
- en: 'The most important type relationship is *assignment compatibility*: Can a location
    whose type is `Src` be assigned to a location whose type is `Trg`? The answer
    is yes if:'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 最重要的类型关系是*赋值兼容性*：类型为 `Src` 的位置能否被赋值给类型为 `Trg` 的位置？如果答案是肯定的，那么：
- en: '`Src` and `Trg` are identical types.'
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Src` 和 `Trg` 是相同类型。'
- en: '`Src` or `Trg` is the type `any`.'
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Src` 或 `Trg` 是类型 `any`。'
- en: '`Src` is a string literal type and `Trg` is the primitive type `string`.'
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Src` 是一个字符串字面量类型，而 `Trg` 是原始类型 `string`。'
- en: '`Src` is a union type and each constituent type of `Src` is assignable to `Trg`.'
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Src` 是一个联合类型，`Src` 的每个组成部分都可以赋值给 `Trg`。'
- en: '`Src` is an intersection type and at least one constituent type of `Src` is
    assignable to `Trg`.'
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Src` 是一个交集类型，且 `Src` 的至少一个组成部分可以赋值给 `Trg`。'
- en: '`Trg` is a union type and `Src` is assignable to at least one constituent type
    of `Trg`.'
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Trg` 是一个联合类型，`Src` 可以赋值给 `Trg` 的至少一个组成部分。'
- en: '`Trg` is an intersection type and `Src` is assignable to each constituent type
    of `Trg`.'
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Trg` 是一个交集类型，`Src` 可以赋值给 `Trg` 的每个组成部分。'
- en: Etc.
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 等等。
- en: 'Let’s consider the questions:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们考虑以下问题：
- en: Parameter `arg` having type `MyType` means that we can only pass a value to
    `myFunc()` whose type is assignable to `MyType`.
  id: totrans-33
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 参数 `arg` 具有类型 `MyType` 意味着我们可以传递给 `myFunc()` 的值只能是 `MyType` 可以赋值的类型。
- en: '`UnionType` is defined by the relationships it has with other types. Above,
    we have seen two rules for union types.'
  id: totrans-34
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`UnionType` 通过与其他类型的关系来定义。在上面，我们已经看到了联合类型的两个规则。'
- en: '[13.4 Nominal type systems vs. structural type systems](#nominal-vs-structural-type-systems)'
  id: totrans-35
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[13.4 命名类型系统与结构类型系统](#nominal-vs-structural-type-systems)'
- en: 'One of the responsibilities of a static type system is to determine if two
    static types are compatible – e.g.:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 静态类型系统的一个职责是确定两个静态类型是否兼容——例如：
- en: The static type `Src` of an actual parameter (e.g., provided via a function
    call)
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 实际参数的静态类型 `Src`（例如，通过函数调用提供）
- en: The static type `Trg` of the corresponding formal parameter (e.g., specified
    as part of a function definition)
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对应形式参数的静态类型 `Trg`（例如，作为函数定义的一部分指定）
- en: 'The type system needs to check if `Src` is assignable to `Trg`. Two approaches
    for this check are (roughly):'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 类型系统需要检查 `Src` 是否可以分配给 `Trg`。这种检查有两种方法（大致上）：
- en: In a *nominal* or *nominative* type system, two static types are equal if they
    have the same identity (“name”). `Src` is only assignable to `Trg` if they are
    equal or if a relationship between them was specified explicitly – e.g., an inheritance
    relationship (`extends`).
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在一个 *名义* 或 *指示* 类型系统中，如果两个静态类型具有相同的标识（“名称”），则它们是相等的。`Src` 只能在它们相等或显式指定了它们之间的关系时分配给
    `Trg` – 例如，一个继承关系（`extends`）。
- en: Languages with nominal type systems include C++, Java and C#.
  id: totrans-41
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 具有名义类型系统的语言包括 C++、Java 和 C#。
- en: 'In a *structural* type system, a type `Src` is assignable to a type `Trg` if
    `Trg` has a structure that can receive what’s in `Src` — e.g.: For each field
    `Src.F`, there must be a field `Trg.F` such that `Src.F` is assignable to `Trg.F`.'
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在一个 *结构* 类型系统中，如果 `Trg` 具有可以接收 `Src` 中内容的结构，则类型 `Src` 可以分配给类型 `Trg` – 例如：对于每个字段
    `Src.F`，必须存在一个字段 `Trg.F`，使得 `Src.F` 可以分配给 `Trg.F`。
- en: Languages with structural type systems include TypeScript, Go (interfaces) and
    OCaml (objects).
  id: totrans-43
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 具有结构类型系统的语言包括 TypeScript、Go（接口）和 OCaml（对象）。
- en: 'The following code produces a type error in the last line with a nominal type
    system, but is legal with TypeScript’s structural type system because class `A`
    and class `B` have the same structure:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 以下代码在具有名义类型系统的最后行会产生类型错误，但在 TypeScript 的结构类型系统中是合法的，因为类 `A` 和类 `B` 具有相同的结构：
- en: '[PRE2]'
  id: totrans-45
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'TypeScript’s interfaces also work structurally – they don’t have to be implemented
    in order to match:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: TypeScript 的接口也以结构方式工作 – 它们不需要实现就可以匹配：
- en: '[PRE3]'
  id: totrans-47
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '[13.5 Further reading](#further-reading-5)'
  id: totrans-48
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[13.5 进一步阅读](#further-reading-5)'
- en: '[Chapter “Type Compatibility” in the TypeScript Handbook](https://www.typescriptlang.org/docs/handbook/type-compatibility.html)'
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[TypeScript 手册中的“类型兼容性”章节](https://www.typescriptlang.org/docs/handbook/type-compatibility.html)'
- en: 'TypeScript Language Specification 1.8: TypeScript originally had a formal language
    specification but it was discontinued after TypeScript 1.8 (which came out in
    2016). It has since been [removed](https://github.com/microsoft/TypeScript/pull/51791)
    from TypeScript’s repositories, but [a PDF file](https://github.com/microsoft/TypeScript/blob/3c99d50da5a579d9fa92d02664b1b66d4ff55944/doc/TypeScript%20Language%20Specification%20-%20ARCHIVED.pdf)
    can still be downloaded from an old commit. Especially helpful: section “3.11
    Type Relationships”.'
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: TypeScript 语言规范 1.8：TypeScript 最初有一个正式的语言规范，但在 TypeScript 1.8（2016 年发布）之后被取消。它已被从
    TypeScript 的存储库中移除，但可以从旧提交中下载 [PDF 文件](https://github.com/microsoft/TypeScript/blob/3c99d50da5a579d9fa92d02664b1b66d4ff55944/doc/TypeScript%20Language%20Specification%20-%20ARCHIVED.pdf)。特别有用的是“3.11
    类型关系”部分。
