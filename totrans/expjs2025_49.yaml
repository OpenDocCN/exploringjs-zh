- en: 41 A roadmap for asynchronous programming
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://exploringjs.com/js/book/ch_async-roadmap.html](https://exploringjs.com/js/book/ch_async-roadmap.html)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[41.1 The next chapters](#the-next-chapters)'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[41.2 Synchronous functions](#synchronous-functions)'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[41.3 JavaScript executes tasks sequentially in a single process](#javascript-executes-tasks-sequentially-in-a-single-process)'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[41.4 Callback-based asynchronous functions](#roadmap-callbacks-for-async)'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[41.5 Promise-based asynchronous functions](#promisebased-asynchronous-functions)'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[41.6 Async functions](#roadmap-async-functions)'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: This chapter is a brief roadmap for asynchronous programming.
  prefs: []
  type: TYPE_NORMAL
- en: '[41.1 The next chapters](#the-next-chapters)'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'The next chapters explain asynchronous programming in JavaScript:'
  prefs: []
  type: TYPE_NORMAL
- en: '[“Foundations of asynchronous programming in JavaScript” (§42)](ch_async-js.html#ch_async-js):'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: We’ll see how synchronous function calls work.
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: We’ll also explore JavaScript’s way of executing code in a single process, via
    its *event loop*.
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Asynchronicity via callbacks](ch_async-js.html#callback-pattern) is also described
    in that chapter.'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '[“Promises for asynchronous programming ^(ES6)” (§43)](ch_promises.html#ch_promises)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[“Async functions ^(ES2017)” (§44)](ch_async-functions.html#ch_async-functions)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[“Asynchronous iteration ^(ES2018)” (§45)](ch_async-iteration.html#ch_async-iteration)
    concludes this series of chapters on asynchronous programming. Asynchronous iteration
    is similar to [synchronous iteration](ch_sync-iteration.html#ch_sync-iteration),
    but iterated values are delivered asynchronously.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The remainder of this chapter gives you some first ideas of what all of that
    means.
  prefs: []
  type: TYPE_NORMAL
- en: '![Icon “reading”](../Images/0fb62b2fc33a72829ae9fb174dedd0d2.png) **Don’t worry
    about the details!**'
  prefs: []
  type: TYPE_NORMAL
- en: Don’t worry if you don’t understand everything yet. This is just a quick peek
    at what’s coming up. Everything is explained in much more detail in the next chapters.
  prefs: []
  type: TYPE_NORMAL
- en: '[41.2 Synchronous functions](#synchronous-functions)'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'Normal functions are *synchronous*: the caller waits until the callee is finished
    with its computation. `divideSync()` in line A is a synchronous function call:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: '[41.3 JavaScript executes tasks sequentially in a single process](#javascript-executes-tasks-sequentially-in-a-single-process)'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'By default, JavaScript *tasks* are functions that are executed sequentially
    in a single process. That looks like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: This loop is also called the *event loop* because events, such as clicking a
    mouse, add tasks to the queue.
  prefs: []
  type: TYPE_NORMAL
- en: Due to this style of cooperative multitasking, we don’t want a task to block
    other tasks from being executed while, for example, it waits for results coming
    from a server. The next subsection explores how to handle this case.
  prefs: []
  type: TYPE_NORMAL
- en: '[41.4 Callback-based asynchronous functions](#roadmap-callbacks-for-async)'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'What if `divide()` needs a server to compute its result? Then the result should
    be delivered in a different manner: The caller shouldn’t have to wait (synchronously)
    until the result is ready; it should be notified (asynchronously) when it is.
    One way of delivering the result asynchronously is by giving `divide()` a callback
    function that it uses to notify the caller.'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: 'When there is an asynchronous function call:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: 'Then the following steps happen:'
  prefs: []
  type: TYPE_NORMAL
- en: '`divideCallback()` sends a request to a server.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Then the current task `main()` is finished and other tasks can be executed.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'When a response from the server arrives, it is either:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'An error `err`: Then the following task is added to the queue.'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
- en: 'A `result` value: Then the following task is added to the queue.'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_PRE
- en: '[41.5 Promise-based asynchronous functions](#promisebased-asynchronous-functions)'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'Promises are two things:'
  prefs: []
  type: TYPE_NORMAL
- en: A standard pattern that makes working with callbacks easier.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The mechanism on which *async functions* (the topic of the next subsection)
    are built.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Invoking a Promise-based function looks as follows.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: '[41.6 Async functions](#roadmap-async-functions)'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'One way of looking at async functions is as better syntax for Promise-based
    code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: The `dividePromise()` we are calling in line A is the same Promise-based function
    as in the previous section. But we now have synchronous-looking syntax for handling
    the call. `await` can only be used inside a special kind of function, an *async
    function* (note the keyword `async` in front of the keyword `function`). `await`
    pauses the current async function and returns from it. Once the awaited result
    is ready, the execution of the function continues where it left off.
  prefs: []
  type: TYPE_NORMAL
