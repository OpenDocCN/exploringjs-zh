- en: 11 Documenting TypeScript APIs via doc comments and TypeDoc
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://exploringjs.com/ts/book/ch_jsdoc.html](https://exploringjs.com/ts/book/ch_jsdoc.html)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: (Ad, please don’t block.)
  prefs: []
  type: TYPE_NORMAL
- en: '[11.1 Doc comments](#doc-comments)'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[11.1.1 JSDoc comments](#jsdoc-comments)'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '[11.1.2 TSDoc comments](#tsdoc-comments)'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '[11.1.3 TypeDoc](#typedoc)'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '[11.2 Generating documentation](#generating-documentation)'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[11.3 Referring to parts of files from doc comments](#referring-to-parts-of-files-from-doc-comments)'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[11.3.1 Why is that useful?](#why-is-that-useful)'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '[11.3.2 Real-world example](#real-world-example)'
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: '[11.4 Further reading](#further-reading-4)'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: This chapter describes how to document TypeScript APIs via *doc comments* (multi-line
    comments whose contents follow a standard format). We will use the npm-installable
    command line tool [TypeDoc](https://typedoc.org) for this task.
  prefs: []
  type: TYPE_NORMAL
- en: '[11.1 Doc comments](#doc-comments)'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '[11.1.1 JSDoc comments](#jsdoc-comments)'
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'The de-facto standard for documenting APIs in JavaScript are [JSDoc comments](https://jsdoc.app)
    (which were inspired by [Javadoc comments](https://en.wikipedia.org/wiki/Javadoc)).
    They are multi-line comments where the opening delimiter is followed by a second
    asterisk:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: The hyphen after parameter names such as `x` is optional.
  prefs: []
  type: TYPE_NORMAL
- en: TypeScript itself supports JSDoc comments as a way to specify types in plain
    JavaScript code ([more information](https://www.typescriptlang.org/docs/handbook/jsdoc-supported-types.html)).
  prefs: []
  type: TYPE_NORMAL
- en: '[11.1.2 TSDoc comments](#tsdoc-comments)'
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: '[TSDoc](https://tsdoc.org) adapts JSDoc comments so that they are a better
    fit for TypeScript – e.g., types in comments are not allowed and the hyphen is
    mandatory:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: '[11.1.3 TypeDoc](#typedoc)'
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'The API documentation generator [TypeDoc](https://typedoc.org) uses doc comments
    to generate HTML API documentation. TSDoc comments are preferred, but JSDoc comments
    are supported, too. TypeDoc’s features include:'
  prefs: []
  type: TYPE_NORMAL
- en: Support for Markdown in doc comments, including syntax highlighting for code
    blocks.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Doc comments can refer to code fragments in external files – which can be tested
    more easily.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Web pages generated from files written in Markdown ([“external documents”](https://typedoc.org/documents/External_Documents.html)).
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[11.2 Generating documentation](#generating-documentation)'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'We can use the following `package.json` script to convert TSDoc comments to
    API documentation:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: The entry for `"api"` is a single line; I have broken it up so that it can be
    displayed better.
  prefs: []
  type: TYPE_NORMAL
- en: 'As a complementary measure, we can serve [GitHub pages](https://docs.github.com/en/pages)
    from `docs/`:'
  prefs: []
  type: TYPE_NORMAL
- en: 'File in repository: `my-package/docs/api/index.html`'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'File online (user `robin`): `https://robin.github.io/my-package/api/index.html`'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'You can check out [the API docs for `@rauschma/helpers`](https://rauschma.github.io/helpers/api/)
    online (warning: still underdocumented).'
  prefs: []
  type: TYPE_NORMAL
- en: '[11.3 Referring to parts of files from doc comments](#referring-to-parts-of-files-from-doc-comments)'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'Since version 0.27.7, TypeDoc lets us refer to parts of external files via
    the doc tag `{@includeCode}`:'
  prefs: []
  type: TYPE_NORMAL
- en: 'File `util.ts`:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: 'Note the hash (`#`) and the name `utilFunc` after the path of the file: It
    refers to a *region* inside `util_test.ts`. A region is a way to mark sequences
    of lines in a source file via comments. Regions are also supported by Visual Studio
    Code where they can be folded ([documentation](https://code.visualstudio.com/docs/editor/codebasics#_folding)).'
  prefs: []
  type: TYPE_NORMAL
- en: 'This is what the region inside `util_test.ts` looks like:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: '[11.3.1 Why is that useful?](#why-is-that-useful)'
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: 'The file names already suggest the use case for this feature: It enables us
    to publish documentation where all code examples (such as region `utilFunc`) are
    tested.'
  prefs: []
  type: TYPE_NORMAL
- en: In the past, TypeDoc only let us include full files, which meant one file per
    example – with test boilerplate showing up in the documentation.
  prefs: []
  type: TYPE_NORMAL
- en: '[11.3.2 Real-world example](#real-world-example)'
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
- en: The following files are an excerpt from real-world code.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Check out the result online: [Function arrayToChunks](https://rauschma.github.io/helpers/api/functions/collection_array.arrayToChunks.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Another example: [Class UnexpectedValueError](https://rauschma.github.io/helpers/api/classes/typescript_error.UnexpectedValueError.html)'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: 'File `array.ts`:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: 'File `array_test.ts`:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: '[11.4 Further reading](#further-reading-4)'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '[Documentation for `{@includeCode}`](https://typedoc.org/documents/Tags.__include_.html)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Related tools:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[Markcheck](https://github.com/rauschma/markcheck) checks code example in Markdown
    files.'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
- en: '[jsdoctest](https://github.com/yamadapc/jsdoctest) runs JSDoc examples (written
    in JavaScript) as doctests.'
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
