- en: 11 Documenting TypeScript APIs via doc comments and TypeDoc
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 11 使用文档注释和 TypeDoc 记录 TypeScript API
- en: 原文：[https://exploringjs.com/ts/book/ch_jsdoc.html](https://exploringjs.com/ts/book/ch_jsdoc.html)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://exploringjs.com/ts/book/ch_jsdoc.html](https://exploringjs.com/ts/book/ch_jsdoc.html)
- en: (Ad, please don’t block.)
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: （广告，请勿拦截。）
- en: '[11.1 Doc comments](#doc-comments)'
  id: totrans-3
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[11.1 文档注释](#doc-comments)'
- en: '[11.1.1 JSDoc comments](#jsdoc-comments)'
  id: totrans-4
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[11.1.1 JSDoc 注释](#jsdoc-comments)'
- en: '[11.1.2 TSDoc comments](#tsdoc-comments)'
  id: totrans-5
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[11.1.2 TSDoc 注释](#tsdoc-comments)'
- en: '[11.1.3 TypeDoc](#typedoc)'
  id: totrans-6
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[11.1.3 TypeDoc](#typedoc)'
- en: '[11.2 Generating documentation](#generating-documentation)'
  id: totrans-7
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[11.2 生成文档](#generating-documentation)'
- en: '[11.3 Referring to parts of files from doc comments](#referring-to-parts-of-files-from-doc-comments)'
  id: totrans-8
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[11.3 从文档注释中引用文件的部分](#referring-to-parts-of-files-from-doc-comments)'
- en: '[11.3.1 Why is that useful?](#why-is-that-useful)'
  id: totrans-9
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[11.3.1 为什么这很有用？](#why-is-that-useful)'
- en: '[11.3.2 Real-world example](#real-world-example)'
  id: totrans-10
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[11.3.2 真实世界的例子](#real-world-example)'
- en: '[11.4 Further reading](#further-reading-4)'
  id: totrans-11
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '[11.4 进一步阅读](#further-reading-4)'
- en: This chapter describes how to document TypeScript APIs via *doc comments* (multi-line
    comments whose contents follow a standard format). We will use the npm-installable
    command line tool [TypeDoc](https://typedoc.org) for this task.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 本章描述了如何通过 *文档注释*（多行注释，其内容遵循标准格式）来记录 TypeScript API。我们将使用可安装的 npm 命令行工具 [TypeDoc](https://typedoc.org)
    来完成这项任务。
- en: '[11.1 Doc comments](#doc-comments)'
  id: totrans-13
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[11.1 文档注释](#doc-comments)'
- en: '[11.1.1 JSDoc comments](#jsdoc-comments)'
  id: totrans-14
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[11.1.1 JSDoc 注释](#jsdoc-comments)'
- en: 'The de-facto standard for documenting APIs in JavaScript are [JSDoc comments](https://jsdoc.app)
    (which were inspired by [Javadoc comments](https://en.wikipedia.org/wiki/Javadoc)).
    They are multi-line comments where the opening delimiter is followed by a second
    asterisk:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 在 JavaScript 中记录 API 的默认标准是[JSDoc 注释](https://jsdoc.app)（其灵感来源于[Javadoc 注释](https://en.wikipedia.org/wiki/Javadoc)）。它们是多行注释，其中开界定符后面跟着第二个星号：
- en: '[PRE0]'
  id: totrans-16
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: The hyphen after parameter names such as `x` is optional.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 参数名称如`x`之后的连字符是可选的。
- en: TypeScript itself supports JSDoc comments as a way to specify types in plain
    JavaScript code ([more information](https://www.typescriptlang.org/docs/handbook/jsdoc-supported-types.html)).
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: TypeScript 本身支持 JSDoc 注释作为在纯 JavaScript 代码中指定类型的方式（[更多信息](https://www.typescriptlang.org/docs/handbook/jsdoc-supported-types.html)）。
- en: '[11.1.2 TSDoc comments](#tsdoc-comments)'
  id: totrans-19
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[11.1.2 TSDoc 注释](#tsdoc-comments)'
- en: '[TSDoc](https://tsdoc.org) adapts JSDoc comments so that they are a better
    fit for TypeScript – e.g., types in comments are not allowed and the hyphen is
    mandatory:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: '[TSDoc](https://tsdoc.org) 适应 JSDoc 注释，以便它们更适合 TypeScript – 例如，注释中的类型是不允许的，连字符是强制性的：'
- en: '[PRE1]'
  id: totrans-21
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '[11.1.3 TypeDoc](#typedoc)'
  id: totrans-22
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[11.1.3 TypeDoc](#typedoc)'
- en: 'The API documentation generator [TypeDoc](https://typedoc.org) uses doc comments
    to generate HTML API documentation. TSDoc comments are preferred, but JSDoc comments
    are supported, too. TypeDoc’s features include:'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: API 文档生成器 [TypeDoc](https://typedoc.org) 使用文档注释来生成 HTML API 文档。TSDoc 注释是首选，但也支持
    JSDoc 注释。TypeDoc 的功能包括：
- en: Support for Markdown in doc comments, including syntax highlighting for code
    blocks.
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 支持在文档注释中使用 Markdown，包括代码块的语法高亮。
- en: Doc comments can refer to code fragments in external files – which can be tested
    more easily.
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 文档注释可以引用外部文件中的代码片段 – 这可以更容易地进行测试。
- en: Web pages generated from files written in Markdown ([“external documents”](https://typedoc.org/documents/External_Documents.html)).
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从用 Markdown 编写的文件生成的网页（[“外部文档”](https://typedoc.org/documents/External_Documents.html)）。
- en: '[11.2 Generating documentation](#generating-documentation)'
  id: totrans-27
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[11.2 生成文档](#generating-documentation)'
- en: 'We can use the following `package.json` script to convert TSDoc comments to
    API documentation:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以使用以下`package.json`脚本来将 TSDoc 注释转换为 API 文档：
- en: '[PRE2]'
  id: totrans-29
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: The entry for `"api"` is a single line; I have broken it up so that it can be
    displayed better.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: '`"api"` 的条目是一行；我将其拆分以便更好地显示。'
- en: 'As a complementary measure, we can serve [GitHub pages](https://docs.github.com/en/pages)
    from `docs/`:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 作为补充措施，我们可以从 `docs/` 提供GitHub页面：
- en: 'File in repository: `my-package/docs/api/index.html`'
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 仓库中的文件：`my-package/docs/api/index.html`
- en: 'File online (user `robin`): `https://robin.github.io/my-package/api/index.html`'
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在线文件（用户`robin`）：`https://robin.github.io/my-package/api/index.html`
- en: 'You can check out [the API docs for `@rauschma/helpers`](https://rauschma.github.io/helpers/api/)
    online (warning: still underdocumented).'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以在线查看`@rauschma/helpers`的API文档（警告：文档尚不完整）。
- en: '[11.3 Referring to parts of files from doc comments](#referring-to-parts-of-files-from-doc-comments)'
  id: totrans-35
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[11.3 从文档注释中引用文件的部分](#referring-to-parts-of-files-from-doc-comments)'
- en: 'Since version 0.27.7, TypeDoc lets us refer to parts of external files via
    the doc tag `{@includeCode}`:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 自版本 0.27.7 以来，TypeDoc 允许我们通过 doc 标签 `{@includeCode}` 引用外部文件的部分：
- en: 'File `util.ts`:'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 文件 `util.ts`：
- en: '[PRE3]'
  id: totrans-38
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Note the hash (`#`) and the name `utilFunc` after the path of the file: It
    refers to a *region* inside `util_test.ts`. A region is a way to mark sequences
    of lines in a source file via comments. Regions are also supported by Visual Studio
    Code where they can be folded ([documentation](https://code.visualstudio.com/docs/editor/codebasics#_folding)).'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 注意文件路径后的哈希 (`#`) 和名称 `utilFunc`：它指的是 `util_test.ts` 内的 *区域*。区域是通过注释标记源文件中行序列的一种方式。Visual
    Studio Code 也支持区域，它们可以被折叠（[文档](https://code.visualstudio.com/docs/editor/codebasics#_folding)）。
- en: 'This is what the region inside `util_test.ts` looks like:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 这就是 `util_test.ts` 内区域的样貌：
- en: '[PRE4]'
  id: totrans-41
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '[11.3.1 Why is that useful?](#why-is-that-useful)'
  id: totrans-42
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[11.3.1 为什么这很有用？](#why-is-that-useful)'
- en: 'The file names already suggest the use case for this feature: It enables us
    to publish documentation where all code examples (such as region `utilFunc`) are
    tested.'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 文件名已经暗示了此功能的使用场景：它使我们能够发布包含所有代码示例（如区域 `utilFunc`）的文档的文档。
- en: In the past, TypeDoc only let us include full files, which meant one file per
    example – with test boilerplate showing up in the documentation.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 在过去，TypeDoc 只允许我们包含完整文件，这意味着每个示例一个文件 – 测试模板在文档中显示。
- en: '[11.3.2 Real-world example](#real-world-example)'
  id: totrans-45
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: '[11.3.2 现实世界示例](#real-world-example)'
- en: The following files are an excerpt from real-world code.
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 以下文件是来自现实世界代码的摘录。
- en: 'Check out the result online: [Function arrayToChunks](https://rauschma.github.io/helpers/api/functions/collection_array.arrayToChunks.html)'
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在线查看结果：[Function arrayToChunks](https://rauschma.github.io/helpers/api/functions/collection_array.arrayToChunks.html)
- en: 'Another example: [Class UnexpectedValueError](https://rauschma.github.io/helpers/api/classes/typescript_error.UnexpectedValueError.html)'
  id: totrans-48
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 另一个示例：[Class UnexpectedValueError](https://rauschma.github.io/helpers/api/classes/typescript_error.UnexpectedValueError.html)
- en: 'File `array.ts`:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 文件 `array.ts`：
- en: '[PRE5]'
  id: totrans-50
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'File `array_test.ts`:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 文件 `array_test.ts`：
- en: '[PRE6]'
  id: totrans-52
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '[11.4 Further reading](#further-reading-4)'
  id: totrans-53
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '[11.4 进一步阅读](#further-reading-4)'
- en: '[Documentation for `{@includeCode}`](https://typedoc.org/documents/Tags.__include_.html)'
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[关于 `{@includeCode}` 的文档](https://typedoc.org/documents/Tags.__include_.html)'
- en: 'Related tools:'
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 相关工具：
- en: '[Markcheck](https://github.com/rauschma/markcheck) checks code example in Markdown
    files.'
  id: totrans-56
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[Markcheck](https://github.com/rauschma/markcheck) 检查 Markdown 文件中的代码示例。'
- en: '[jsdoctest](https://github.com/yamadapc/jsdoctest) runs JSDoc examples (written
    in JavaScript) as doctests.'
  id: totrans-57
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[jsdoctest](https://github.com/yamadapc/jsdoctest) 运行 JSDoc 示例（用 JavaScript
    编写）作为 doctests。'
