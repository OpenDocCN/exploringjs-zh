# 49 下一步：Web 开发概览

> 原文：[`exploringjs.com/js/book/ch_next-steps.html`](https://exploringjs.com/js/book/ch_next-steps.html)

1.  49.1 防止感到不知所措的技巧

1.  49.2 值得学习的 Web 开发知识

    1.  49.2.1 关注 WebAssembly（Wasm）！

1.  49.3 JavaScript 工具概览

    1.  49.3.1 构建：从我们编写的 JavaScript 到我们部署的 JavaScript

    1.  49.3.2 静态检查

    1.  49.3.3 测试

    1.  49.3.4 包管理器

    1.  49.3.5 库

1.  49.4 与 JavaScript 无关的工具

你现在已经了解了大多数 JavaScript 语言。本章概述了 Web 开发并描述了下一步。它回答了以下问题：

+   我接下来应该学习什么来进行 Web 开发？

+   我应该了解哪些与 JavaScript 相关的工具？

### 49.1 防止感到不知所措的技巧

Web 开发已经成为一个庞大的领域：在 JavaScript、Web 浏览器、服务器端 JavaScript、JavaScript 库和 JavaScript 工具之间，有很多东西需要了解。此外，一切都在不断变化：有些东西过时了，新的东西被发明了等等。

当面对这个不断变化的知识浩瀚时，如何避免感到不知所措？

+   专注于你最常使用的 Web 技术，并深入学习它们。如果你做前端开发，那可能是 JavaScript、CSS、SVG 或其他东西。

+   对于 JavaScript：了解语言，但也要尝试以下每个类别中的一个工具（这些将在稍后详细介绍）。

    +   编译器：将未来的 JavaScript 或 JavaScript 的超集编译成普通 JavaScript。

    +   打包器：将 Web 应用程序使用的所有模块合并成一个文件（脚本或模块）。这使加载更快，并能够消除死代码。

    +   静态检查器。例如：

        +   Linters：检查反模式、样式违规等问题。

        +   类型检查器：静态类型检查 JavaScript 并报告错误。

    +   测试库和工具

    +   版本控制（通常是 git）

![图标“提示”](img/8440b17bb8219cda9f9405ac83c36db0.png) **相信你按需学习的本领**

出于纯粹的好奇心学习某件事是值得赞扬的。但我对试图学习一切并过于分散精力持谨慎态度。这也会引起对知识不足的焦虑（因为你永远不会知道足够多）。相反，相信你按需学习的本领！

### 49.2 值得学习的 Web 开发知识

这些是值得学习的一些 Web 开发知识：

+   浏览器 API，如 *文档对象模型*（DOM），浏览器在内存中对 HTML 的表示。它们是任何前端开发的基础。

+   与 JavaScript 相关的技术，如 HTML 和 CSS。

+   前端框架：当你开始学习网页开发时，编写没有库的用户界面可能会有所帮助。一旦你更有信心，前端框架可以使许多事情变得更容易，特别是对于大型应用程序。流行的框架包括：Alpine.js, Angular, Ember, Lit, Preact, Qwik, React, Solid, Stencil, Svelte, Vue.js。

+   JavaScript 运行时：一些 JavaScript 平台用于在服务器上运行代码。但它们也用于运行命令行工具。最受欢迎的运行时是 Node.js。大多数与 JavaScript 相关的工具（甚至编译器！）都是用基于 Node.js 的 JavaScript 实现的，并通过 npm 安装。开始使用 Node.js 的一个好方法是 [将其用于 shell 脚本](https://exploringjs.com/nodejs-shell-scripting/)。

    +   其他 JavaScript 运行时包括：Deno, Bun。

    +   该领域的重要标准组织：[WinterCG](https://wintercg.org)（Web-interoperable Runtimes Community Group）。“该社区组旨在为 JavaScript 运行时提供一个协作 API 互操作性的空间。我们专注于记录和改进跨运行时（尤其是非浏览器运行时）的 Web 平台 API 的互操作性。”

+   JavaScript 工具：现代 Web 开发涉及许多工具。在本章的后面部分，将概述当前的工具生态系统。

+   渐进式 Web 应用（PWAs）：渐进式 Web 应用的核心思想是赋予 Web 应用传统上只有原生应用才有的功能——例如：在移动和桌面操作系统上的原生安装；离线操作；向用户显示通知。Google 发布了 [一个清单](https://web.dev/articles/pwa-checklist)，详细说明了什么使 Web 应用成为 *渐进式*。最低要求包括：

    +   应用程序必须通过 HTTPS（而不是不安全的 HTTP）提供服务。

    +   应用程序必须有一个 *Web App Manifest 文件*，指定应用程序名称和图标（通常以多个分辨率）等元数据。图标的文件也必须存在。

    +   应用程序必须有一个 *服务工作者*：应用程序在后台运行的基础层，在单独的进程中（独立于网页）。其一项职责是在没有互联网连接时保持应用程序运行。其中，两种机制帮助它做到这一点：它是一个本地代理，监督应用程序的所有 Web 资源请求。它还可以访问浏览器的缓存。因此，当应用程序离线时，它可以使用缓存来满足请求——在最初缓存所有关键资源之后。服务工作者还包括在后台同步数据；接收服务器发送的推送消息；以及上述向用户显示通知的功能。

学习 Web 开发（包括 JavaScript）的一个好资源是 [MDN Web 文档](https://developer.mozilla.org/en-US/docs/Learn)。

#### 49.2.1 关注 WebAssembly (Wasm)!

[WebAssembly](https://webassembly.org) 是一个内置在大多数 JavaScript 引擎中的通用虚拟机。我们通常得到以下的工作分配：

+   JavaScript 用于动态、高级代码。

+   WebAssembly 用于静态、底层代码。

对于静态代码，WebAssembly 相当快：将 C/C++代码编译到 WebAssembly，其速度大约是相同代码编译为本地代码的 50% ([source](https://arxiv.org/abs/1901.09056))。用例包括支持新的视频格式、机器学习、游戏等。它有助于它相对容易地将现有的代码库（例如用 C 编写的代码）编译到 WebAssembly。

WebAssembly 作为各种语言的编译目标工作得很好。这意味着 JavaScript 会被编译到 WebAssembly 或被另一种语言取代吗？

##### 49.2.1.1 JavaScript 会被编译到 WebAssembly 吗？

JavaScript 引擎为 JavaScript 的高度动态特性执行了许多优化。如果我们想将 JavaScript 编译到 WebAssembly，我们不得不在 WebAssembly 之上实现这些优化。结果将比当前引擎慢，并且具有类似的代码库。因此，我们不会得到任何好处。

##### 49.2.1.2 JavaScript 会被另一种语言取代吗？

WebAssembly 意味着 JavaScript 即将被另一种语言取代吗？WebAssembly 确实使得在 Web 浏览器中支持除 JavaScript 之外的语言变得更加容易。但那些语言在该平台上面临几个挑战：

+   所有浏览器 API 都是基于 JavaScript 的。

+   其他语言的运行时（标准库等）会产生额外的内存开销，而 JavaScript 的运行时已经内置在 Web 浏览器中。

+   JavaScript 广为人知，拥有许多库和工具等。

对于动态代码，JavaScript 相对较快。因此，在可预见的未来，它可能仍然是高级代码最受欢迎的选择。对于底层代码，将更多静态语言（如 Rust）编译到 WebAssembly 是一个有趣的选择。

由于它只是一个虚拟机，关于 WebAssembly 实际上相关的学习内容并不多。但值得注意它在 Web 开发中不断发展的角色。它也作为独立的虚拟机变得越来越受欢迎：

+   该领域的重要标准组织：“[字节码联盟](https://bytecodealliance.org) 是一个非营利组织，致力于创建基于 WebAssembly 和 WebAssembly 系统接口 (WASI) 等标准的安全新软件基础。”

+   [WebAssembly 系统接口 (WASI)](https://wasi.dev): “一组针对编译为 W3C WebAssembly (Wasm) 标准的软件的标准 API 规范。WASI 旨在为可以从任何语言编译为 Wasm 并在任何地方运行的应用程序提供安全的标准接口——从浏览器到云到嵌入式设备。”

+   [WebAssembly 组件模型 (WCM)](https://component-model.bytecodealliance.org)： “用于构建可互操作 Wasm 库、应用程序和环境的广泛架构。”

+   [warg – Wasm 包的安全注册协议](https://warg.io)：WebAssembly 包管理器的重要基础。

### 49.3 JavaScript 工具概述

在本节中，我们来看看：

+   工具类别

+   那些类别中特定工具的名称

前者更为重要。随着工具的流行与淘汰，名称会发生变化，但我希望你能看到其中的一些。

#### 49.3.1 构建：从我们编写的 JavaScript 到我们部署的 JavaScript

*构建* JavaScript 意味着将我们编写的 JavaScript 转换为我们部署的 JavaScript。以下工具通常涉及此过程。

##### 49.3.1.1 转译器

转译器是一种将源代码编译成源代码的编译器。在 JavaScript 社区中流行的两个转译器是：

+   TypeScript 是 JavaScript 的超集。大致上，它是 JavaScript 的最新版本加上静态类型。TypeScript 编译器 `tsc` 执行两个任务：

    +   它会检查 JavaScript 代码的类型。

    +   它将 TypeScript 编译成 JavaScript（看起来仍然非常相似）。

    一个重要的趋势是使用更快的工具（如下面的打包器）来处理相对简单的将 TypeScript 编译成 JavaScript 的任务，并且只在开发期间使用 TypeScript 编译器进行类型检查——这是一个复杂的任务（到目前为止，还没有出现 `tsc` 的实际替代品）。

+   Babel 将即将到来的和现代 JavaScript 功能编译成较旧的语言版本。这意味着我们可以在代码中使用新功能，并且仍然能在较旧的浏览器上运行它。

    +   大多数浏览器现在都是“持续更新”的，并且经常更新自己。在那之前，Babel 是必不可少的。现在它被使用的较少，这也得益于 TypeScript 的流行。

##### 49.3.1.2 压缩

压缩意味着将 JavaScript 编译成等效的、更小的（即字符更少）JavaScript。它通过重命名变量、删除注释、删除空白等来实现。

例如，给定以下输入：

```js
let numberOfOccurrences = 5;
if (Math.random()) {
  // Math.random() is not zero
  numberOfOccurrences++
}

```

压缩工具可能会生成：

```js
let a=5;Math.random()&&a++;

```

打包器（见下文）通常支持压缩。

##### 49.3.1.3 打包器

*打包器* 编译和优化 JavaScript 应用的代码。打包器的输入是许多文件——应用的所有代码以及它使用的库。打包器将这些输入文件组合起来，生成更少的输出文件（[这通常可以提高性能](https://medium.com/@asyncmax/the-right-way-to-bundle-your-assets-for-faster-sites-over-http-2-437c37efe3ff))。

打包器通过*摇树优化*等技术最小化其输出的大小：只有那些在某个地方（跨所有代码，考虑传递性导入）被导入的模块导出会被放入输出中。

在打包的同时执行编译步骤，如转译和压缩，也是很常见的。

流行的打包工具包括：

+   更像是一个框架（工具掌握控制权）：

    +   Vite

+   更像是一个库（我们控制工具）：

    +   esbuild

    +   Rollup

    +   Rolldown

+   在以下两者之间：

    +   Parcel

    +   Rspack

    +   TurboPack

    +   webpack

##### 49.3.1.4 任务运行器

有时会有涉及多个工具或调用具有特定参数的工具的构建任务。*任务运行器*（遵循 Unix `make`的传统）让我们为这样的任务定义更简单的名称，并且通常还帮助连接工具和处理文件。有以下几种：

+   专用任务运行器：grunt, gulp, broccoli 等。

+   可以用作简单任务运行器的工具：

    +   大多数包管理器都可以运行任务，例如通过`package.json`中的`"scripts"`。

    +   大多数运行时也自带了运行任务的内建支持。

#### 49.3.2 静态检查

*静态检查*意味着对源代码进行*静态分析*（不运行它）。它可以用来检测各种问题。工具有：

+   Linters：检查源代码中的问题模式、未使用变量等。如果你还在学习语言，linters 特别有用，因为它们会指出你是否做错了什么。

    +   流行的 linters 包括 ESLint, Biome, oxlint, quick-lint-js

+   代码风格检查器：检查代码是否格式正确。它们考虑缩进、括号后的空格、逗号后的空格等。

    +   示例：JSCS（JavaScript 代码风格检查器）

+   代码格式化工具：根据我们可以自定义的规则自动格式化我们的代码。

    +   示例：Prettier, Biome

+   类型检查器：为 JavaScript 添加静态类型检查。

    +   最受欢迎的类型检查器：TypeScript（它也是一个转译器）

#### 49.3.3 测试

JavaScript 有许多测试框架——例如：

+   单元测试：AVA, Jasmine, Jest, Mocha, QUnit, Vitest 等。

    +   JavaScript 运行时 Node.js、Deno 和 Bun 都内置了测试运行器。

+   集成测试：Jenkins, Cypress 等。

+   用户界面测试：CasperJS, Nightwatch.js, TestCafé, Cypress, Playwright, Web Test Runner 等。

+   自动化浏览器（例如用于测试）：Puppeteer, Selenium 等。

#### 49.3.4 包管理器

最受欢迎的 JavaScript 包管理器是 npm。它最初是 Node.js 的包管理器，但后来也成为了客户端 Web 开发和各种工具的领导者。

以下是对 npm 的替代方案，它们使用 npm 的*包注册表*（想想在线数据库）：

+   [Yarn](https://yarnpkg.com)对 npm 有另一种看法；它所开创的一些功能现在也被 npm 支持。

+   [pnpm](https://github.com/pnpm/pnpm)专注于在本地安装包时节省空间。

此外，还有 JSR（JavaScript 注册）：

+   它专注于 TypeScript，但也支持 JavaScript。

+   它可以被所有上述的包管理器（包括 npm）使用。

+   对它的支持内置在 Deno 中。JSR 是由 Deno 背后的团队创建的，旨在与之良好匹配。

#### 49.3.5 库

+   各种助手：[lodash](https://lodash.com)（最初基于 Underscore.js 库）是 JavaScript 最受欢迎的通用助手库之一。

+   数据结构：以下库是众多例子中的两个。

    +   [Immutable.js](https://github.com/immutable-js/immutable-js)为 JavaScript 提供了不可变的数据结构。

    +   [Immer](https://github.com/immerjs/immer)是 Immutable.js 的一个有趣的轻量级替代品。它也不改变它操作的数据，但它与普通对象、数组、集合和映射一起工作。

+   日期库：JavaScript 对日期的内置支持有限，且充满了陷阱。关于日期的章节列出了我们可以使用的库。

+   国际化：在这个领域，ECMAScript 的标准库通过[ECMAScript 国际化 API (ECMA-402)](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl)得到补充。它通过全局变量`Intl`访问，并在大多数现代浏览器中可用。

+   实现和访问服务：以下是由各种库和工具支持的两种流行选项。

    +   REST（代表状态传输）是服务中一个流行的选项，基于 HTTP(S)。

    +   RPC（远程过程调用）是与服务器通信的另一种流行范式。对于 RPC 有许多标准和方法——两个例子：

        +   [JSON-RPC 标准](https://www.jsonrpc.org)： “一种轻量级的远程过程调用协议。它被设计得非常简单！”

        +   [gRPC 框架](https://grpc.io)： “gRPC 是一个现代的开源高性能远程过程调用（RPC）框架，可以在任何环境中运行。它可以高效地连接数据中心内和跨数据中心的多个服务，并具有可插拔的支持，包括负载均衡、跟踪、健康检查和身份验证。它也适用于分布式计算的最后一英里，以连接设备、移动应用程序和浏览器到后端服务。”

    +   [GraphQL](https://graphql.org/)更复杂（例如，它可以组合多个数据源）并支持查询语言。

### 49.4 工具（与 JavaScript 无关）

由于 JavaScript 只是网络开发中涉及的多种工件之一，因此存在更多工具。这些只是其中的一些例子：

+   CSS：

    +   压缩器：通过删除注释等来减小 CSS 的大小。

    +   预处理器：允许我们编写紧凑的 CSS（有时还增加了控制流结构等），这些 CSS 在部署时会被展开成更冗长的 CSS。

    +   框架：提供布局、外观良好的用户界面组件等方面的帮助。

+   图片：自动优化位图图像的大小等。
